<template>
    <template if:false={isMobile}>
        <div class="slds-grid">
            <svg xmlns="http://www.w3.org/2000/svg" class="com-icon pointer slds-m-top_xxx-small">
                <use xlink:href={homeSvg} onclick={handleHomePage}></use>
            </svg>
            <lightning-icon
                icon-name="utility:chevronright"
                size="xx-small"
                class="slds-m-top_xxx-small slds-m-horizontal_xx-small"
            >
            </lightning-icon>
            <div class="pp-message-txt">{labels.messagesLabel}</div>
        </div>
        <div class="msg-txt slds-m-vertical_small">{labels.messagesLabel}</div>
        <div class="slds-grid rectangle-box slds-p-around--small">
            <img src={message_disclaimer} class="info-icon" />
            <span class="slds-p-left_x-small msg-disclaimer-color">{labels.disclaimerLabel}</span>
        </div>
        <lightning-layout class="layout-box slds-m-top_small">
            <template if:true={loaded}>
                <c-web-spinner
                    class="main-spinner"
                    show-spinner={loaded}
                    fixed="true"
                ></c-web-spinner>
            </template>
            <lightning-layout-item size="4" class="divider">
                <div class="border-btm slds-p-around_large">{labels.messagesLabel}</div>
                <template if:true={isInitialized}>
                    <c-pp-message-list
                        conversation-wrappers={conversationWrappers}
                        enrollments={enrollments}
                        onstudyselected={changeStudyConversation}
                        onmtoggle={mobileViewToggle}
                        message_attachment={message_attachment}
                    ></c-pp-message-list>
                </template>
            </lightning-layout-item>

            <lightning-layout-item size="8">
                <lightning-layout class="slds-grid_align-space border-btm">
                    <lightning-layout-item
                        size="10"
                        class="slds-p-around_large study-txt-ellipse"
                        title={studyName}
                    >
                        {studyName}</lightning-layout-item
                    >
                    <lightning-layout-item size="2" class={addPointer} style="text-align: center">
                        <img
                            src={televisitAttendees_icon}
                            class="group-icon img-color"
                            id="img-color"
                            onclick={showParticipants}
                        />
                        <template if:true={showCount}>
                            <span
                                class="slds-p-left_x-small team-color team-count"
                                onclick={showParticipants}
                                >{peopleCount}</span
                            >
                        </template>
                    </lightning-layout-item>
                    <div class="slds-p-horizontal_large box-container">
                        <template if:true={nameList}>
                            <template for:each={nameList} for:item="n">
                                <c-pp-people-count
                                    key={n.key}
                                    userpic-id={n.key}
                                    user-name={n.value}
                                    usr-pic={usrPic}
                                ></c-pp-people-count>
                            </template>
                        </template>
                    </div>
                </lightning-layout>
                <template if:true={isMessageLoaded}>
                    <c-pp-message-board
                        onsavemessage={handleSpinner}
                        message-templates={messageTemplates}
                        select-con-wrap={selectConWrap}
                        first-enrollments={firstEnrollments}
                        oncalltoparent={mobileViewToggle}
                        onmessageboardcmp={refreshPage}
                        device-size={deviceSize}
                        is-i-e={isIE}
                        pi-contact-names={piContactNames}
                        is-secondary={isSecondary}
                    ></c-pp-message-board>
                </template>
            </lightning-layout-item>
        </lightning-layout>
    </template>
    <template if:true={isMobile}>
        <lightning-layout multiple-rows class="slds-m-around_medium">
            <lightning-layout-item size="12">
                <span class="">
                    <lightning-icon
                        icon-name="utility:chevronleft"
                        alternative-text="chevronleft"
                        size="x-small"
                        title="chevronleft"
                        class="left-chevron"
                    ></lightning-icon> </span
                ><span class="back">Back</span>
            </lightning-layout-item>
            <lightning-layout-item size="12" class="">
                <div class="mob-pp-message-txt">{labels.messagesLabel}</div>
            </lightning-layout-item>
            <lightning-layout-item size="12" class="mob-rectangle-box slds-p-around--small">
                <lightning-icon
                    icon-name="utility:info"
                    alternative-text="info"
                    size="small"
                    title="info"
                    class="info-icon"
                ></lightning-icon
                ><span>{labels.disclaimerLabel}</span>
            </lightning-layout-item>
        </lightning-layout>
    </template>
</template>
