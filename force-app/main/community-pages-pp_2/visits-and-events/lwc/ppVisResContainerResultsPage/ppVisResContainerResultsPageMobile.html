<template>
    <template lwc:if={isMobile}>
        <template lwc:if={isInitialized}>
            <div class="slds-grid slds-wrap slds-grid_vertical-align-center horizontal-padding">
                <div
                    class="slds-col slds-size_1-of-1 slds-p-horizontal_none vertical-padding"
                    onclick={handleNavigation}
                >
                    <span class="slds-p-right_small">
                        <lightning-icon
                            icon-name="utility:chevronleft"
                            size="x-small"
                            class="left-chevron-icon"
                        >
                        </lightning-icon>
                    </span>
                    <span class="back-text">{label.Back}</span>
                </div>
                <div class="slds-col slds-size_1-of-1 slds-float_left slds-p-horizontal_none">
                    <div
                        class="slds-grid slds-wrap slds-grid_vertical-align-center slds-m-bottom_x-small"
                    >
                        <div class="slds-col visit-name slds-grow-none slds-p-horizontal_none">
                            <div class="visit-name">{patientVisitName}</div>
                            <div class="completed-date">
                                <lightning-formatted-date-time
                                    value={completedDate}
                                    class="completed-date"
                                    year="numeric"
                                    month="short"
                                    day="2-digit"
                                    time-zone={userTimezone}
                                ></lightning-formatted-date-time>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="slds-col slds-size_1-of-1 slds-p-horizontal_none">
                    <div class="disclaimer">{resultTypeDisclaimer}</div>
                </div>
                <div
                    class="slds-col slds-size_1-of-1 slds-align_absolute-center slds-p-vertical_small horizontal-line"
                >
                    <div>
                        <c-pp-download-results-data
                            patient-visit-nam={patientVisitName}
                            patient-visit-id={currentVisitId}
                        ></c-pp-download-results-data>
                    </div>
                </div>
                <div
                    class="slds-col slds-size_1-of-1 slds-p-vertical_medium slds-p-horizontal_none"
                >
                    <div class="slds-align_absolute-center visit-result-buttons">
                        <template lwc:if={showTabs}>
                            <template lwc:if={group2}>
                                <button
                                    class={button1Group2Class}
                                    value={Button1Label}
                                    onclick={handleResultTypeSelection}
                                    name="Button1Group2"
                                >
                                    {Button1Label}
                                </button>
                                <button
                                    class={button2Group2Class}
                                    value={Button2Label}
                                    onclick={handleResultTypeSelection}
                                    name="Button2Group2"
                                >
                                    {Button2Label}
                                </button>
                            </template>
                            <template lwc:else>
                                <button
                                    class={button1Group3Class}
                                    value={Button1Label}
                                    onclick={handleResultTypeSelection}
                                    name="Button1Group3"
                                >
                                    {Button1Label}
                                </button>
                                <button
                                    class={button2Group3Class}
                                    value={Button2Label}
                                    onclick={handleResultTypeSelection}
                                    name="Button2Group3"
                                >
                                    {Button2Label}
                                </button>
                                <button
                                    class={button3Group3Class}
                                    value={Button3Label}
                                    onclick={handleResultTypeSelection}
                                    name="Button3Group3"
                                >
                                    {Button3Label}
                                </button>
                            </template>
                        </template>
                    </div>
                </div>
                <div
                    class="slds-col slds-size_1-of-1 container-visit-results slds-p-horizontal_none"
                >
                    <div class="slds-col slds-size_1-of-1">
                        <div class="slds-grid slds-wrap slds-gutters">
                            <div
                                class="slds-col slds-size_12-of-12 result-type-toggle slds-p-horizontal_none"
                            >
                                <c-web-spinner
                                    class="main-spinner"
                                    fixed="true"
                                    show-spinner={showToggleSpinner}
                                ></c-web-spinner>

                                <div class="slds-grid slds-p-top_xxx-small">
                                    <!--Toggle Label-->
                                    <div class="show-result-type-text">
                                        <span>{toggleLabel}</span>
                                    </div>
                                    <!--Toggle Helptext-->
                                    <div class="slds-p-horizontal_x-small pp-tooltip">
                                        <lightning-helptext
                                            content={label.PP_Visit_Result_Toggle_Helptext}
                                            icon-name="utility:info"
                                        ></lightning-helptext>
                                    </div>
                                    <!--TOGGLE START-->
                                    <div class="slds-p-horizontal_small">
                                        <span
                                            ><lightning-input
                                                type="toggle"
                                                checked={toggleValue}
                                                messagetoggleactive="ON"
                                                variant="label-hidden"
                                                messagetoggleinactive="OFF"
                                                onchange={handleVRToggle}
                                            >
                                            </lightning-input
                                        ></span>
                                    </div>
                                    <!--TOGGLE END-->
                                </div>
                            </div>
                        </div>
                    </div>
                    <div
                        class="slds-col slds-size_1-of-1 slds-p-horizontal_none result-container-mobile"
                    >
                        <!--VITALS SECTION START-->
                        <template lwc:if={isVitalsSelected}>
                            <template lwc:if={showSpinnerResults}>
                                <c-web-spinner
                                    class="main-spinner"
                                    show-spinner={showSpinnerResults}
                                ></c-web-spinner
                            ></template>
                            <template lwc:else>
                                <template lwc:if={isVitalsToggleOn}>
                                    <c-pp-visit-result-section
                                        visit-result-type-with-sub-types={visitResultTypeWithSubTypes}
                                        patient-visit={currentVisit}
                                        selected-result-type={selectedResultType}
                                        selected-visit={currentVisit}
                                    ></c-pp-visit-result-section>
                                </template>
                                <!-- Vital Toggle OFF-->
                                <template lwc:else>
                                    <div class="slds-grid slds-wrap slds-gutters">
                                        <div
                                            class="slds-col slds-size_12-of-12 slds-p-top_xx-large slds-p-bottom_small"
                                        >
                                            <img
                                                src={toggleOffHeart}
                                                class="toggle-off-image slds-align_absolute-center"
                                            />
                                        </div>
                                        <div
                                            class="slds-col slds-size_12-of-12 toggle-off-text slds-p-horizontal_small slds-align_absolute-center slds-p-bottom_large"
                                        >
                                            {label.Vitals_Toggle_Off}
                                        </div>
                                    </div>
                                </template>
                            </template>
                        </template>
                        <!--VITALS SECTION END-->
                        <!--LABS SECTION START-->
                        <template lwc:elseif={isLabsSelected}>
                            <template lwc:if={showSpinnerResults}>
                                <c-web-spinner
                                    class="main-spinner"
                                    show-spinner={showSpinnerResults}
                                ></c-web-spinner
                            ></template>
                            <template lwc:else>
                                <template lwc:if={isLabsToggleOn}>
                                    <c-pp-visit-result-section
                                        visit-result-type-with-sub-types={visitResultTypeWithSubTypes}
                                        patient-visit={currentVisit}
                                        selected-result-type={selectedResultType}
                                        selected-visit={currentVisit}
                                    ></c-pp-visit-result-section>
                                </template>
                                <!--    Lab Toggle OFF-->
                                <template lwc:else>
                                    <div class="slds-grid slds-wrap">
                                        <div
                                            class="slds-col slds-size_12-of-12 slds-p-top_xx-large slds-p-bottom_small"
                                        >
                                            <img
                                                src={toggleOffHeart}
                                                class="toggle-off-image slds-align_absolute-center"
                                            />
                                        </div>
                                        <div
                                            class="slds-col slds-size_12-of-12 toggle-off-text slds-p-horizontal_small slds-align_absolute-center slds-p-bottom_large"
                                        >
                                            {label.Labs_Toggle_Off}
                                        </div>
                                    </div>
                                </template>
                            </template>
                        </template>

                        <!--LABS SECTION END-->
                        <!--BIOMARKERS SECTION START-->
                        <template lwc:elseif={isBiomarkersSelected}>
                            <template lwc:if={isBiomarkersToggleOn}>
                                <c-pp-visit-result-section
                                    visit-result-type-with-sub-types={visitResultTypeWithSubTypes}
                                    patient-visit={currentVisit}
                                    selected-result-type={selectedResultType}
                                    selected-visit={currentVisit}
                                ></c-pp-visit-result-section>
                            </template>
                            <!--   Biomarker Toggle OFF-->
                            <template lwc:else>
                                <div class="slds-grid slds-wrap">
                                    <div
                                        class="slds-col slds-size_12-of-12 slds-p-top_xx-large slds-p-bottom_small"
                                    >
                                        <img
                                            src={toggleOffHeart}
                                            class="toggle-off-image slds-align_absolute-center"
                                        />
                                    </div>
                                    <div
                                        class="slds-col slds-size_12-of-12 toggle-off-text slds-p-horizontal_small slds-align_absolute-center slds-p-bottom_large"
                                    >
                                        {label.Biomarkers_Toggle_Off}
                                    </div>
                                </div>
                            </template>
                        </template>
                        <!--BIOMARKERS SECTION END-->
                    </div>
                </div>
            </div>
        </template>
        <template lwc:else>
            <c-web-spinner class="main-spinner" show-spinner={showSpinner}></c-web-spinner>
        </template>
    </template>
</template>
