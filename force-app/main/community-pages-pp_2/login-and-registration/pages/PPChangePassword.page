<!--
 - Created by Sravani Dasari
 -->

<apex:page id="PPChangePassword" showHeader="false" title="{!$Label.site.change_password}" controller="RRChangePasswordController"
    standardStylesheets="false" docType="html-5.0" language="{!userVal.Contact.Language__c}" action="{!initTemplateData}">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <apex:slds />
    <apex:stylesheet value="{!$Resource.proximanova}/proximanova.css" />
    <apex:stylesheet value="{!$Resource.Community_CSS_Core}" />
    <apex:stylesheet value="{!$Resource.Community_CSS_PP_Theme}" />
    <apex:includeScript value="{!$Resource.svg4everybody}" />
    <apex:includeScript value="{!$Resource.jquery224}" />
    <apex:includeScript value="{!$Resource.rr_community_js}" />
    <link id="themeCSS" href="{!$Resource.Community_CSS_Stub}" rel="stylesheet" type="text/css" />

    <apex:outputPanel rendered="{!!contact.Is_First_Logon__c}">
        <div id="container" class="container">
            <div style="{!if(isRTL == true,if(and(contact.Is_First_Logon__c == false,templateName != 'GSK'),'opacity:1;','opacity:1;direction:rtl;'), 'opacity:1')}">
                <apex:form id="main_form">
                    <!-- change password page: -->
                    <apex:outputPanel styleClass="change-password">
                        <style>
                            .cp-content-lofi {
                                overflow: auto;
                                position: fixed;
                                width: 100%;
                                height: 100%;
                                font-family: 'Proxima Nova';
                                background-color: white;
                            }

                            .cp-body-content {
                                display: flex;
                                justify-content: center;
                            }
                        </style>
                        <apex:outputPanel >
                            <div class="cp-content-lofi">
                                <div class="cp-body-cell">
                                    <c:PPLite_ForgotPassword backgroundcss="{!backgroundStyle}" isCPRAAvailable="{!isCPRAAvailable}" LinkToRedirect="{!CPRALink}"
                                        CPRAlabel="{!$Label[CPRAlabel]}"></c:PPLite_ForgotPassword>
                                </div>
                            </div>
                        </apex:outputPanel>
                    </apex:outputPanel>
                </apex:form>
            </div>
        </div>
    </apex:outputPanel>
    <apex:outputPanel rendered="{!contact.Is_First_Logon__c}" id="regispanel">
        <style>
            .study-vertical-bar {
                box-sizing: border-box;
                height: 16px;
                width: 1px;
                border: 1px solid #B5B5B5;
            }

            .mob-view {
                max-width: 798px;
                border-radius: 8px;
                border: 1px solid #e9e9e9;
                margin-bottom: 0.5rem
            }

            .desk-view {
                max-width: 798px;
                border-radius: 8px;
                background: #f2f2f2;
                border: 1px solid #e9e9e9;
                margin-bottom: 0.5rem
            }

            .mob-inside-view {
                border-radius: 8px;
                background: #f2f2f2;
                border: 1px solid #e9e9e9;
            }

            .study-p-left {
                padding-left: 1.5rem;
            }

            .txt-color {
                color: #015ff1;
            }

            .main-header-brand {
                background: linear-gradient(to bottom, #00839a 0%, #005587 100%);
                border-bottom-right-radius: 20px;
            }

            .rr-header-content {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                z-index: 8700;
            }

            @media not print {
                .rr-header-content,
                .rr-header-margin {
                    height: 50px;
                }
            }

            .iqvia {
                height: 24px;
                width: 41px;
                color: #ffffff;
                font-family: 'Proxima Nova';
                font-size: 16px;
                letter-spacing: 0;
                line-height: 24px;
            }

            .patient-portal {
                height: 24px;
                width: 99px;
                color: #ffffff;
                font-family: 'Proxima Nova';
                font-size: 16px;
                font-weight: bold;
                letter-spacing: 0;
                line-height: 24px;
            }

            .rr-white-panel {
                border: 1px solid #f2f2f2;
                border: 1px solid #e9e9e9;
                border-radius: 12px;
                background-color: #ffffff;
                box-shadow: 0 4px 4px 0 rgb(0 0 0 / 4%);
                overflow: hidden;
                margin: 19px;
            }

            .contentMargin {
                margin: 1.5rem;
            }

            html {
                background-color: #f8f9fb !important;
            }

            .rr-body-content {
                background-color: #f8f9fb;
            }

            body {
                background-color: #f8f9fb !important;
            }

            .slds-scope .slds-gutters {
                margin-right: -0.75rem;
                margin-left: -0.75rem;
                margin-bottom: 0.75rem;
            }

            .slds-gutters .slds-col {
                padding-right: 0.75rem;
                padding-left: 0.75rem;
            }

            .slds-grid .rr-form-element {
                margin-top: 10px;
                margin-bottom: 10px;
                max-width: 328px;
            }

            .slds-scope {
                font-family: 'Proxima Nova';
            }

            .ap-section-title {
                height: 24px;
                /* width: 199px; */
                color: #444444;
                font-family: 'Proxima Nova';
                font-size: 24px;
                font-weight: 700;
                letter-spacing: 0;
                line-height: 24px;
                margin-bottom: 0.25rem;
            }

            .slds-scope td.tdclas {
                color: #015ff1;
                font-family: 'Proxima Nova';
                font-size: 16px;
                font-weight: 500;
                padding-left: 17px;
                padding-top: 10px;
            }

            .slds-scope td.tdclas .disabled {
                opacity: 0.4;
                cursor: default;
            }

            .MediumBText,
            .slds-scope .eightCharacters td {
                color: #444444;
                font-family: 'Proxima Nova';
                font-size: 16px;
                line-height: 24px;
                font-weight: 600;
            }

            .studyConsentText {
                color: #444444;
                font-family: 'Proxima Nova';
                font-size: 16px;
                line-height: 24px;
                font-weight: 500;
                margin-bottom: 8px;
            }

            .outreachConsentText {
                color: #444444;
                font-family: 'Proxima Nova';
                font-size: 16px;
                line-height: 24px;
                font-weight: 500;
            }

            .timeZoneText {
                font-size: 13px;
                max-width: 945px;
                margin-top: 20px;
                color: #444;
            }

            .timeZoneText>.slds-grid {
                margin-top: 0.5rem;
            }

            .checkmarklofi {
                fill: #595959;
            }

            .checkmarklofi.eye-icon .checksizelofi-eye {
                margin-top: 3px;
            }

            .checkgreenmarklofi {
                fill: #00cc00;
            }

            .checksizelofi {
                width: 20px;
                height: 20px;
            }

            .eye-icon {
                /*float: right;*/
                margin-top: 0px;
                padding-left: 0px;
            }

            .eye-icon-rtl {
                /*float: left;*/
                margin-top: -30px;
                padding-right: 242px;
            }

            .eye-icon-info {
                float: right;
                margin-top: 11px;
                margin-left: -26px;
            }

            .eye-icon-mask {
                margin-top: 0px;
                padding-left: 0px;
            }

            .eye-icon-mask-rtl {
                /*float: left;*/
                margin-top: -30px;
                padding-right: 242px;
            }

            .checksizelofi2 {
                width: 24px;
                height: 24px;
            }

            .checksizelofi-eye {
                width: 34px;
                height: 35px;
                fill: #595959 !important;
                cursor: pointer;
            }

            input:focus {
                outline: none !important;
                /*border: 1px solid red;*/
                box-shadow: none;
            }

            .has-error input {
                border: 1px solid #e20000 !important;
            }

            .old-pass-error input {
                border: 1px solid #e20000 !important;
            }

            .rr-form-element input[type='password']:hover,
            .rr-form-element input[type='text']:hover {
                border-color: #d9d9d9;
            }

            .password-criteria-green {
                color: #00b51f;
            }

            .password-criteria-grey {
                color: #444444;
            }

            .rr-form-element input[type='password']:hover,
            .rr-form-element input[type='text']:hover {
                border-color: #d9d9d9;
            }

            .pwd-match {
                margin-top: 0.25em;
                color: #26b515;
                font-family: 'Proxima Nova';
                font-size: 16px;
            }

            .criteria-msg {
                margin-top: 0.25em;
                color: #26b515;
                font-family: 'Proxima Nova';
                font-size: 16px;
                /*visibility:hidden;*/
            }

            .all-content-lofi {
                top: 0;
                left: 0;
                font-family: 'Proxima Nova';
                background-color: rgb(255, 255, 255);
                overflow: hidden !important;
            }

            .logo-block-lofi-mobile {
                margin: auto;
                max-width: 500px;
                margin-top: 4em;
            }

            .brand-logo {
                text-align: center;
                color:#444;
            }

            .tooltipLabel {
                display: flex;
            }

            .tooltipLabel>label {
                padding-right: 5px;
            }

            .cp-save-btn-container {
                height: 50px;
                margin-top: 30px;
                display: flex;
                align-items: baseline;
            }

            .cp-save-btn {
                width: 33%;
            }

            .logo-block-lofi .slds-p-left_large .slds-medium-size--1-of-2:nth-child(1) .header-subtitle {
                margin-left: 45px;
            }

            .tickmark {
                display: none;
            }

            .rr-form-element .password-input {
                position: relative;
            }

            .rr-form-element input[type='password'],
            .rr-form-element input[type='text'] {
                padding: 10px;
            }

            .button-eye {
                width: 26px;
                height: 32px;
                position: absolute;
                right: 10px;
                bottom: 0;
                display: inline-block;
            }

            .brow-mob-button-eye {
                margin-right: 238px !important;
            }

            .checksizelofi1 {
                width: 16px;
                height: 16px;
            }

            input:focus {
                outline: none !important;
                border: 1px solid #015ff1;
            }

            input[type='text'] {
                padding-left: 10px;
                padding-right: 10px;
            }

            input[type='password'] {
                padding-left: 10px;
                padding-right: 10px;
            }

            .slds-scope .selectInput {
                position: relative;
            }

            .slds-scope .selectInput:after {
                content: '';
                position: absolute;
                top: 13px;
                right: 1rem;
                width: 0;
                height: 0;
                border: 5px solid transparent;
                border-top: 0;
                border-bottom: 6px solid #000;
                border-radius: 2px;
                transform: scale(-1);
            }

            .slds-scope select.slds-input {
                padding-right: 1.75rem;
                color: #000;
            }

            .slds-scope slds-grid select.slds-input:focus,
            .slds-scope slds-grid select.slds-input:active {
                color: #000;
            }

            .slds-scope .slds-checkbox [type='checkbox']:checked+.slds-checkbox__label .slds-checkbox_faux:before {
                content: '';
                position: absolute;
                display: inline-block;
                box-sizing: border-box;
                width: 16px;
                height: 16px;
                left: 0;
                border-radius: 2px;
                font-size: 0.8125rem;
                text-align: center;
                background-color: #015ff1;
                border-radius: 2px;
                border: none;
                top: -1px;
            }

            .slds-scope .slds-checkbox [type='checkbox']:checked+.slds-checkbox__label .slds-checkbox_faux:after {
                position: absolute;
                content: ' ';
                display: inline-block;
                color: #015ff1;
                transform: rotate(40deg);
                height: 10px;
                width: 6px;
                top: 0;
                left: 5px;
                border-bottom: 2px solid #fff;
                border-right: 2px solid #fff;
                border-radius: 0;
            }

            .slds-scope .slds-checkbox [type='checkbox']:checked:focus+.slds-checkbox__label .slds-checkbox_faux {
                box-shadow: none;
            }

            .eye-icon-pos {
                position: absolute;
                right: 0;
                top: 8px;
            }

            .rr-form-element .slds-input {
                font-size: 1rem;
            }

            .slds-scope button,
            .slds-scope select {
                -moz-appearance: none;
                -webkit-appearance: none;
            }

            .rr-form-element .slds-input[disabled] {
                opacity: 1;
                border: 1px solid #d9d9d9;
                border-radius: 16px;
                background-color: #f2f2f2;
                box-shadow: 0 2px 4px 0 rgb(0 0 0 / 0%);
            }

            .container {
                box-sizing: border-box;
                height: 32px;
                width: 318px;
                border: 1px solid #d9d9d9;
                border-radius: 16px !important;
                background-color: #ffffff;
                box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0);
            }

            .btn-upload-photo {
                position: relative;
            }

            .btn-upload-photo,
            .remove-photo {
                cursor: pointer;
            }

            .btn-upload-photo .input-control {
                position: absolute;
                /* top: 0; */
                left: 0;
                opacity: 0;
                cursor: pointer;
                width: 80px;
            }

            .btn-upload-photo .input-controlRTL {
                position: absolute;
                /* top: 0; */
                left: 0;
                opacity: 0;
                cursor: pointer;
                width: 80px;
            }

            .edit-photo {
                color: #015ff1;
                font-weight: 500;
                font-size: 16px;
                font-family: 'Proxima Nova';
                /* margin-right: 17px; */
            }

            .slds-scope .slds-form-element__icon,
            .slds-scope .tooltip .slds-button {
                padding: 0;
                border: none;
            }

            .slds-scope .tooltip .slds-button__icon {
                width: 1rem;
                height: 1rem;
                fill: #595959;
            }

            .slds-scope .tooltip {
                position: relative;
            }

            .slds-scope .tooltip>.slds-button:hover .slds-button__icon,
            .slds-scope .tooltip>.slds-button:hover .slds-button__icon:focus,
            .slds-scope .tooltip>.slds-button:hover .slds-button__icon:active {
                fill: #000;
            }

            .slds-scope .tooltip>.slds-button:focus,
            .slds-scope .tooltip>.slds-button:active {
                outline: none;
                box-shadow: none;
                border: none;
            }

            .slds-scope .tooltip:after {
                position: absolute;
                content: '';
                background-color: #ecf3ff;
                width: 1.75rem;
                height: 27px;
                border-radius: 50%;
                z-index: -1;
                box-sizing: content-box;
                left: -6px;
                right: 0;
                top: -5px;
                bottom: 0;
                transform: scale(0, 0);
                transition: all 0.2s;
            }

            .slds-scope .tooltip:hover:after {
                transform: scale(1, 1);
                transition: all 0.2s;
            }

            .slds-form-element__icon.tooltip button.slds-button_icon::before {
                content: attr(help-text);
                border-radius: 5px;
                padding: 10px;
                font-size: 12px;
                line-height: 18px;
                position: absolute;
                z-index: 999;
                text-align: left;
                left: 50%;
                bottom: 9999px;
                background: #444;
                color: #f8f8f8;
                min-height: 32px;
                min-width: 200px;
                opacity: 0;
                transition: opacity 0.4s ease-out;
            }

            .slds-form-element__icon.tooltip button.slds-button_icon::after {
                content: '';
                position: absolute;
                top: -15px;
                left: 50%;
                margin-left: -8px;
                border-width: 8px;
                border-style: solid;
                border-color: #444 transparent transparent transparent;
                opacity: 0;
            }

            .slds-form-element__icon.tooltip:hover button.slds-button_icon::before {
                opacity: 1;
                bottom: 30px;
                left: -93px;
            }

            .slds-form-element__icon.tooltip:hover button.slds-button_icon::after {
                opacity: 1;
            }

            .slds-scope .slds-form-element__control {
                display: flex;
                align-items: center;
            }

            .slds-scope .slds-form-element__label {
                font-size: 1rem;
                color: #444;
                padding-left: 0.75rem;
            }

            .slds-scope .slds-col footer.footerdown {
                display: flex;
                /* justify-content: flex-end; */
                justify-content: space-between;
                align-items: center;
                background: #f2f2f2;
                height: 60px;
                width: 100%;
                color: #999999;
                font-family: 'Proxima Nova';
                font-size: 12px;
                letter-spacing: 0;
                line-height: 14px;
                padding-right: 25px;
            }

            .slds-scope .slds-col footer.footerdownMobile {
                /* display: flex; */
                /* justify-content: flex-end; */
                justify-content: space-between;
                align-items: center;
                background: #f2f2f2;
                height: 60px;
                width: 100%;
                color: #999999;
                font-family: 'Proxima Nova';
                font-size: 12px;
                letter-spacing: 0;
                line-height: 14px;
                padding-right: 25px;
            }

            .cpralinkcss {
                margin-left: 26px;
            }

            .copyrightMobile {
                margin-top: 8px !important;
            }

            .changepwdbtn button:disabled,
            button[disabled] {
                opacity: 0.4;
            }

            .changepwdbtn {
                color: #ffffff;
                border-radius: 16px;
                background-color: #0768fd !important;
                padding-left: 1.25rem;
                padding-right: 1.25rem;
            }

            .slds-scope .slds-button {
                color: #ffffff;
                border-radius: 16px;
                background-color: #015ff1;
                padding-left: 1.25rem;
                padding-right: 1.25rem;
            }

            .slds-scope .slds-button[disabled],
            .slds-scope .slds-button:disabled {
                opacity: 0.4 !important;
            }

            .certifyCheck {
                margin-top: 1.75rem;
            }

            .slds-scope .slds-gutters .slds-col.slds-small-size_4-of-12:nth-child(3),
            .slds-scope .slds-gutters .slds-col.slds-small-size_4-of-12:nth-child(4) {
                white-space: nowrap;
            }

            .study-card {
                background-color: #f2f2f2;
                margin: 10px 10px 10px 0px;
                border-radius: 5px;
                vertical-align: middle;
            }

            .study-card-mobile {
                background-color: #f2f2f2;
                margin: 0px 10px 20px 10px;
                border-radius: 5px;
            }

            .com-icon {
                fill: #595959;
                height: 20px;
                width: 20px;
            }

            .study-paramters {
                font-size: 14px;
                font-weight: 600;
            }

            .border-right-style {
                border-right: 1px solid lightgray;
            }

            .mb-child-div-10 div {
                margin-bottom: 5px;
            }

            .ml-5 {
                margin-left: 0.5rem;
            }


            @media all and (max-width: 768px) {
                .brow-mob-button-eye {
                    margin-right: 300px !important;
                }

                .slds-scope .slds-medium-size_1-of-4 {
                    width: 30%;
                }

                .slds-scope .slds-medium-size_1-of-5 {
                    width: 25%;
                }
                .cpralinkcss {
                    text-align: center;
                    padding-top: 0.7rem;
                    margin-left: unset;
                }
                .mob-mar-top {
                    padding-top: 1rem;
                    padding-bottom: .5rem;
                }
                .study-p-left {
                    padding-left: .5rem;
                    padding-right: .5rem;
                }
            }

            @media all and (max-width: 486px) {
                .contentMargin {
                    margin: 1rem;
                }

                .slds-scope .slds-gutters {
                    margin: 0;
                }

                .ap-section-title {
                    margin-bottom: 0.75rem;
                }

                .slds-scope .slds-gutters .slds-col.slds-medium-size_1-of-4 {
                    width: 100%;
                    margin-top: 0.75rem;
                    margin-bottom: 0.75rem;
                    padding: 0;
                }

                .slds-scope .slds-gutters .slds-col.slds-small-size_2-of-12:nth-child(1) {
                    width: 35%;
                    margin-bottom: 0.5rem;
                    padding-right: 0;
                    order: 1;
                }

                .slds-scope .slds-gutters .slds-col.slds-small-size_4-of-12:nth-child(3) {
                    width: 65%;
                    margin-bottom: 0.5rem;
                    padding-right: 0;
                    order: 2;
                }

                .slds-scope .slds-gutters .slds-col.slds-small-size_2-of-12:nth-child(2) {
                    width: 35%;
                    margin-bottom: 0.5rem;
                    padding-right: 0;
                    order: 3;
                }
                .slds-scope .slds-gutters .slds-col.slds-small-size_4-of-12:nth-child(4) {
                    width: 65%;
                    margin-bottom: 0.5rem;
                    padding-right: 0;
                    order: 4;
                }

                .slds-scope .slds-button.changepwdbtn {
                    width: 100%;
                }

                .certifyCheck {
                    margin-top: 0;
                }

                .timeZoneText {
                    margin-top: 0.75rem;
                }

                .timeZoneText>.slds-gutters {
                    margin-top: 0.5rem;
                }

                .slds-scope .slds-notify.slds-notify_toast {
                    min-width: unset;
                    max-width: 23rem;
                }
            }

            .checkboxcss {
                width: 1rem;
                height: 1rem;
                vertical-align: middle;
            }

            .minorErrorText {
                color: red;
            }
        </style>

        <script>
            window.onload = function () {
                disableSaveBtn();
                checkPassWord();
            };

            var pwdMatchLabel = '{!JSENCODE($Label.PP_PasswordsMatch)}';
            var pwdMisMatchLabel = '{!JSENCODE($Label.PPLite_PasswordsMismatch)}';
            function checkPassWord() {
                var p1 = $('.newpasswordtxt').val();
                if (p1) {
                    checkEnteredPassword(p1);
                }
                var p2 = $('.verifypwdtxt').val();
                console.log('p1 sss', p1, 'p2', p2);
                let newPasswordSpan = $('.new-password-span');
                let reenterPasswordSpan = $('.reenter-password-span');
                if (newPasswordSpan.hasClass('old-pass-error')) {
                    newPasswordSpan.removeClass('old-pass-error');
                }
                if (p1 != p2) {
                    console.log('p1!=p2');
                    if (p1 && p2) {
                        //  $('.pwd-match').css('visibility', 'visible');
                        $('.pwd-match').css('display', 'block');
                        $('.pwd-match').css('color', 'red');
                        $('.pwd-match').html(pwdMisMatchLabel);
                        if (!reenterPasswordSpan.hasClass('has-error')) {
                            reenterPasswordSpan.addClass('has-error');
                        }
                        disableSaveBtn();
                        validForm = false;
                        console.log('p1&p2');
                    } else {
                        // $('.pwd-match').css('visibility','hidden');
                        console.log('inside1--->');
                        $('.pwd-match').html(' ');
                        if (reenterPasswordSpan.hasClass('has-error')) {
                            reenterPasswordSpan.removeClass('has-error');
                        }
                        if (p1 != p2) {
                            disableSaveBtn();
                        }
                    }
                } else {
                    if (p1 && p2) {
                        // $('.pwd-match').css('color', '#26b515');
                        $('.pwd-match').html(pwdMatchLabel);
                        $('.pwd-match').css('display', 'none');
                        if (reenterPasswordSpan.hasClass('has-error')) {
                            reenterPasswordSpan.removeClass('has-error');
                        }
                        var isDelegate = '{!isDelegate}';
                        var btn = document.querySelector('.changepwdbtn');
                        var attCheckBox = document.getElementById(
                            '{!$Component.reg_form.attestation}'
                        );

                        if (
                            isDelegate == 'false' ||
                            (isDelegate && attCheckBox && attCheckBox.checked)
                        ) {
                            btn.removeAttribute('disabled');
                        }
                        validForm = false;
                        var criteria = $('.criteria-msg').css('display');
                        if (criteria == 'block') {
                            if (p1 != p2) {
                                disableSaveBtn();
                            }
                        }
                    } else {
                        //$('.pwd-match').css('visibility','hidden');
                        console.log('inside2--->');
                        validForm = true;
                        if (p1.length == 0) {
                            newPasswordSpan.removeClass('has-error');
                            $('.criteria-msg').html(' ');
                        }
                        $('.pwd-match').html(' ');
                    }
                }
                if (isDelegate) {
                    if (
                        document.getElementById('PPChangePassword:reg_form:passwHiddenField') !=
                        null
                    ) {
                        document.getElementById(
                            'PPChangePassword:reg_form:passwHiddenField'
                        ).value =
                            $('.pwd-match').css('display') == 'block' ||
                            $('.criteria-msg').css('display') == 'block';
                    }
                }
            }
            function toggleRenterPassword() {
                toggleRenteredPassword();
            }
            function toggleFirstPassword(event) {
                toggleNew();
                checkPassWord();
            }
            function doOutreach(chkboxCtrl) {
                if (chkboxCtrl.checked) {
                    var dmconst = document.querySelector('.directmailconsent');
                    dmconst.checked = true;
                    var smsconst = document.querySelector('.smsconsent');
                    smsconst.checked = true;
                    var emailconst = document.querySelector('.emailconsent');
                    emailconst.checked = true;
                    var phoneconst = document.querySelector('.phoneconsent');
                    phoneconst.checked = true;
                } else {
                    var dmconst = document.querySelector('.directmailconsent');
                    dmconst.checked = false;
                    var smsconst = document.querySelector('.smsconsent');
                    smsconst.checked = false;
                    var emailconst = document.querySelector('.emailconsent');
                    emailconst.checked = false;
                    var phoneconst = document.querySelector('.phoneconsent');
                    phoneconst.checked = false;
                }

            }
            function doAllConsent(chkboxCtrl) {
                if (chkboxCtrl.checked) {
                    if (document.querySelector(".directmailconsent").checked &&
                        document.querySelector(".emailconsent").checked &&
                        document.querySelector(".smsconsent").checked &&
                        document.querySelector(".phoneconsent").checked
                    ) {
                        var constall = document.querySelector('.outreachall');
                        constall.checked = true;
                    }
                } else {
                    if (!document.querySelector(".directmailconsent").checked ||
                        !document.querySelector(".emailconsent").checked ||
                        !document.querySelector(".smsconsent").checked ||
                        !document.querySelector(".phoneconsent").checked
                    ) {
                        var constall = document.querySelector('.outreachall');
                        constall.checked = false;
                    }
                }
            }
            function doallStudyConsent(chkboxCtrl) {
                if (chkboxCtrl.checked) { 
                    var currentstudy = event.currentTarget.id;
                    var studyids = currentstudy.substr(currentstudy.length - 7);
                    let studyno = studyids.charAt(0);
                    

                    var smscon = 'PPChangePassword:reg_form:pers:' + studyno + ':smscn';
                    var smsconst = document.getElementById(smscon);
                    smsconst.checked = true;
                    var phonecon = 'PPChangePassword:reg_form:pers:' + studyno + ':phone';
                    var phoneconst = document.getElementById(phonecon);
                    phoneconst.checked = true;
                    var emailcon = 'PPChangePassword:reg_form:pers:' + studyno + ':email';
                    var emailconst = document.getElementById(emailcon);
                    emailconst.checked = true;
                    var dmailcon = 'PPChangePassword:reg_form:pers:' + studyno + ':dmail';
                    var dmailconst = document.getElementById(dmailcon);
                    dmailconst.checked = true;


                } else {
                    
                    var currentstudy = event.currentTarget.id;
                   
                    var studyids = currentstudy.substr(currentstudy.length - 7);
                    
                    let studyno = studyids.charAt(0);
                   

                    var smscon = 'PPChangePassword:reg_form:pers:' + studyno + ':smscn';
                    var smsconst = document.getElementById(smscon);
                    smsconst.checked = false;
                    var phonecon = 'PPChangePassword:reg_form:pers:' + studyno + ':phone';
                    var phoneconst = document.getElementById(phonecon);
                    phoneconst.checked = false;
                    var emailcon = 'PPChangePassword:reg_form:pers:' + studyno + ':email';
                    var emailconst = document.getElementById(emailcon);
                    emailconst.checked = false;
                    var dmailcon = 'PPChangePassword:reg_form:pers:' + studyno + ':dmail';
                    var dmailconst = document.getElementById(dmailcon);
                    dmailconst.checked = false;
                }

            }
            function doStudyConsent(chkboxCtrl) {
                if (chkboxCtrl.checked) {
                    var currentstudy = event.currentTarget.id;
                    
                    var studyids = currentstudy.substr(currentstudy.length - 7);
                   
                    let studyno = studyids.charAt(0);//alert(studyno);
                    

                    var smscon = 'PPChangePassword:reg_form:pers:' + studyno + ':smscn';
                    var smsconst = document.getElementById(smscon); 

                    var phonecon = 'PPChangePassword:reg_form:pers:' + studyno + ':phone';
                    var phoneconst = document.getElementById(phonecon); 

                    var emailcon = 'PPChangePassword:reg_form:pers:' + studyno + ':email';
                    var emailconst = document.getElementById(emailcon); 

                    var dmailcon = 'PPChangePassword:reg_form:pers:' + studyno + ':dmail';
                    var dmailconst = document.getElementById(dmailcon);



                    if (smsconst.checked &&
                        phoneconst.checked &&
                        emailconst.checked &&
                        dmailconst.checked
                    ) {  
                        var studycons = 'PPChangePassword:reg_form:pers:' + studyno + ':study';
                        var studyconsall = document.getElementById(studycons);
                        studyconsall.checked = true;
                    }
                } else {
                   
                    var currentstudy = event.currentTarget.id;
                   
                    var studyids = currentstudy.substr(currentstudy.length - 7);
                    
                    let studyno = studyids.charAt(0);

                    var smscon = 'PPChangePassword:reg_form:pers:' + studyno + ':smscn';
                    var smsconst = document.getElementById(smscon); 

                    var phonecon = 'PPChangePassword:reg_form:pers:' + studyno + ':phone';
                    var phoneconst = document.getElementById(phonecon); 

                    var emailcon = 'PPChangePassword:reg_form:pers:' + studyno + ':email';
                    var emailconst = document.getElementById(emailcon); 

                    var dmailcon = 'PPChangePassword:reg_form:pers:' + studyno + ':dmail';
                    var dmailconst = document.getElementById(dmailcon); 



                    if (!smsconst.checked ||
                        !phoneconst.checked ||
                        !emailconst.checked ||
                        !dmailconst.checked
                    ) {  
                        var studycons = 'PPChangePassword:reg_form:pers:' + studyno + ':study';
                        var studyconsall = document.getElementById(studycons);
                        studyconsall.checked = false;
                    }
                }
            }
            function doStudyConsentDel(chkboxCtrl) {
                if (chkboxCtrl.checked) {
                    var currentstudy = event.currentTarget.id;
                   
                    var studyids = currentstudy.substr(currentstudy.length - 7);
                   
                    let studyno = studyids.charAt(0);
                    

                    var smscon = 'PPChangePassword:reg_form:perss:' + studyno + ':smscn';
                    var smsconst = document.getElementById(smscon); 

                    var phonecon = 'PPChangePassword:reg_form:perss:' + studyno + ':phone';
                    var phoneconst = document.getElementById(phonecon); 

                    var emailcon = 'PPChangePassword:reg_form:perss:' + studyno + ':email';
                    var emailconst = document.getElementById(emailcon); 

                    var dmailcon = 'PPChangePassword:reg_form:perss:' + studyno + ':dmail';
                    var dmailconst = document.getElementById(dmailcon); 



                    if (smsconst.checked &&
                        phoneconst.checked &&
                        emailconst.checked &&
                        dmailconst.checked
                    ) {  
                        var studycons = 'PPChangePassword:reg_form:perss:' + studyno + ':study';
                        var studyconsall = document.getElementById(studycons);
                        studyconsall.checked = true;
                    }
                } else {
                    
                    var currentstudy = event.currentTarget.id;
                    
                    var studyids = currentstudy.substr(currentstudy.length - 7);
                   
                    let studyno = studyids.charAt(0);

                    var smscon = 'PPChangePassword:reg_form:perss:' + studyno + ':smscn';
                    var smsconst = document.getElementById(smscon); 

                    var phonecon = 'PPChangePassword:reg_form:perss:' + studyno + ':phone';
                    var phoneconst = document.getElementById(phonecon); 

                    var emailcon = 'PPChangePassword:reg_form:perss:' + studyno + ':email';
                    var emailconst = document.getElementById(emailcon); 

                    var dmailcon = 'PPChangePassword:reg_form:perss:' + studyno + ':dmail';
                    var dmailconst = document.getElementById(dmailcon); 



                    if (!smsconst.checked ||
                        !phoneconst.checked ||
                        !emailconst.checked ||
                        !dmailconst.checked
                    ) {  
                        var studycons = 'PPChangePassword:reg_form:perss:' + studyno + ':study';
                        var studyconsall = document.getElementById(studycons);
                        studyconsall.checked = false;
                    }
                }
            }
            function doallStudyConsentDel(chkboxCtrl) {
                if (chkboxCtrl.checked) {
                   
                    var currentstudy = event.currentTarget.id;
                    
                    var studyids = currentstudy.substr(currentstudy.length - 7);
                    
                    let studyno = studyids.charAt(0);

                    var smscon = 'PPChangePassword:reg_form:perss:' + studyno + ':smscn';
                    var smsconst = document.getElementById(smscon);
                    smsconst.checked = true;
                    var phonecon = 'PPChangePassword:reg_form:perss:' + studyno + ':phone';
                    var phoneconst = document.getElementById(phonecon);
                    phoneconst.checked = true;
                    var emailcon = 'PPChangePassword:reg_form:perss:' + studyno + ':email';
                    var emailconst = document.getElementById(emailcon);
                    emailconst.checked = true;
                    var dmailcon = 'PPChangePassword:reg_form:perss:' + studyno + ':dmail';
                    var dmailconst = document.getElementById(dmailcon);
                    dmailconst.checked = true;


                } else {
                   
                    var currentstudy = event.currentTarget.id;
                   
                    var studyids = currentstudy.substr(currentstudy.length - 7);
                    
                    let studyno = studyids.charAt(0);

                    var smscon = 'PPChangePassword:reg_form:perss:' + studyno + ':smscn';
                    var smsconst = document.getElementById(smscon);
                    smsconst.checked = false;
                    var phonecon = 'PPChangePassword:reg_form:perss:' + studyno + ':phone';
                    var phoneconst = document.getElementById(phonecon);
                    phoneconst.checked = false;
                    var emailcon = 'PPChangePassword:reg_form:perss:' + studyno + ':email';
                    var emailconst = document.getElementById(emailcon);
                    emailconst.checked = false;
                    var dmailcon = 'PPChangePassword:reg_form:perss:' + studyno + ':dmail';
                    var dmailconst = document.getElementById(dmailcon);
                    dmailconst.checked = false;
                }

            }
        </script>

        <script>
            document.addEventListener('click', (x) => 0);

            $(document).ready(function () {
                var btn = document.querySelector('.changepwdbtn');
                btn.disabled = true;
            });
            $(document).on('keyup', '.verifypwdtxt', function () {
                //if (document.querySelector(".verifypwdtxt").value) {
                checkPassWord();
                //}
                $('.error-msg').html(' ');
                validForm = false;
            });
            $(document).on('change', '.verifypwdtxt', function () {
                //if (document.querySelector(".verifypwdtxt").value) {
                checkPassWord();
                //}
                $('.error-msg').html(' ');
                validForm = false;
            });

            $(document).on('keyup', '.newpasswordtxt', function () {
                //if (document.querySelector(".verifypwdtxt").value) {
                checkPassWord();
                //}
                $('.error-msg').html(' ');
                let newPasswordSpan = $('.new-password-span');
                if (newPasswordSpan.hasClass('old-pass-error')) {
                    newPasswordSpan.removeClass('old-pass-error');
                }
                var currentValue = $(this).val();
                console.log('value entered-->input');
                var number = /([0-9])/;
                var lowercase = /([a-z])/;
                var uppercase = /([A-Z])/;

                var special_characters =
                    /([!,",#,$,%,&,',(,),*,\-,+,.,\/,:,;,<,=,>,?,@,\[,\,\],^,_,`,{,|,},~,])/;
                var pwdCriteriaMetLabel = '{!JSENCODE($Label.PP_MeetingCriteria)}';
                var pwdCriteriaNotMetLabel = '{!JSENCODE($Label.PP_PasswordCriteriaNotMet)}';
                checkEnteredPassword(currentValue);
                validForm = false;
                checkPassWord();
            });

            function checkEnteredPassword(currentValue) {
                try {
                    let newPasswordSpan = $('.new-password-span');
                    var number = /([0-9])/;
                    var lowercase = /([a-z])/;
                    var uppercase = /([A-Z])/;

                    var special_characters =
                        /([!,",#,$,%,&,',(,),*,\-,+,.,\/,:,;,<,=,>,?,@,\[,\,\],^,_,`,{,|,},~,])/;
                    var pwdCriteriaMetLabel = '{!JSENCODE($Label.PP_MeetingCriteria)}';
                    var pwdCriteriaNotMetLabel = '{!JSENCODE($Label.PP_PasswordCriteriaNotMet)}';
                    console.log('checkEnteredPassword');
                    if (currentValue.length >= 8) {
                        $('#eightchar').css('display', 'none');
                        $('#eightchar1').css('display', 'block');
                        $('#eightchar1').addClass('checkgreenmarklofi');
                        $('#pp_eightchar').removeClass();
                        $('#pp_eightchar').addClass('password-criteria-green');
                    } else {
                        $('#eightchar1').css('display', 'none');
                        $('#eightchar').css('display', 'block');
                        $('#eightchar').addClass('checkmarklofi');
                        $('#pp_eightchar').removeClass();
                        $('#pp_eightchar').addClass('password-criteria-grey');
                    }
                    if (currentValue.match(number)) {
                        $('#numb').css('display', 'none');
                        $('#numb1').css('display', 'block');
                        $('#numb1').addClass('checkgreenmarklofi');
                        $('#pp_pwd').removeClass();
                        $('#pp_pwd').addClass('password-criteria-green');
                    } else {
                        $('#numb1').css('display', 'none');
                        $('#numb').css('display', 'block');
                        $('#numb').addClass('checkmarklofi');
                        $('#pp_pwd').removeClass();
                        $('#pp_pwd').addClass('password-criteria-grey');
                    }
                    if (currentValue.match(lowercase)) {
                        $('#lc').css('display', 'none');
                        $('#lc1').css('display', 'block');
                        $('#lc1').addClass('checkgreenmarklofi');
                        $('#pp_lower').removeClass();
                        $('#pp_lower').addClass('password-criteria-green');
                    } else {
                        $('#lc').addClass('checkmarklofi');
                        $('#lc1').css('display', 'none');
                        $('#lc').css('display', 'block');
                        $('#pp_lower').removeClass();
                        $('#pp_lower').addClass('password-criteria-grey');
                    }
                    if (currentValue.match(uppercase)) {
                        $('#uc').css('display', 'none');
                        $('#uc1').css('display', 'block');
                        $('#uc1').addClass('checkgreenmarklofi');
                        $('#pp_upper').removeClass();
                        $('#pp_upper').addClass('password-criteria-green');
                    } else {
                        $('#uc').addClass('checkmarklofi');
                        $('#uc1').css('display', 'none');
                        $('#uc').css('display', 'block');
                        $('#pp_upper').removeClass();
                        $('#pp_upper').addClass('password-criteria-grey');
                    }
                    if (currentValue.match(special_characters)) {
                        $('#special').css('display', 'none');
                        $('#special1').css('display', 'block');
                        $('#special1').addClass('checkgreenmarklofi');
                        $('#pp_special').removeClass();
                        $('#pp_special').addClass('password-criteria-green');
                    } else {
                        $('#special').addClass('checkmarklofi');
                        $('#special1').css('display', 'none');
                        $('#special').css('display', 'block');
                        $('#pp_special').removeClass();
                        $('#pp_special').addClass('password-criteria-grey');
                    }

                    if (
                        currentValue.length >= 8 &&
                        ((currentValue.match(number) &&
                            currentValue.match(lowercase) &&
                            currentValue.match(uppercase)) ||
                            (currentValue.match(lowercase) &&
                                currentValue.match(uppercase) &&
                                currentValue.match(special_characters)) ||
                            (currentValue.match(number) &&
                                currentValue.match(uppercase) &&
                                currentValue.match(special_characters)) ||
                            (currentValue.match(lowercase) &&
                                currentValue.match(number) &&
                                currentValue.match(special_characters)))
                    ) {
                        console.log('3 matching criteria--->');
                        $('#info-icon').removeClass();
                        $('#info-icon').addClass('checkgreenmarklofi');
                        validForm = true;
                        $('.slds-icon').css('fill', '#26b515');
                        // $('.slds-icon').removeClass();
                        //$('.slds-icon').addClass('checkgreenmarklofi');
                        /*$('.criteria-msg').css('visibility', 'visible');*/
                        $('.criteria-msg').css('display', 'none');
                        $('.criteria-msg').html(pwdCriteriaMetLabel);
                        // $('.re-enter-pwd-icon-pos1').css('top', 168);
                        // $('.re-enter-pwd-icon-pos').css('top', 168);
                        if (newPasswordSpan.hasClass('has-error')) {
                            newPasswordSpan.removeClass('has-error');
                        }
                    } else {
                        console.log('not matching criteria--->');
                        $('#info-icon').removeClass();
                        $('#info-icon').addClass('checkredmark');
                        $('.slds-icon').css('fill', 'red');
                        $('.criteria-msg').css('display', 'block');
                        //$('.slds-icon').removeClass();
                        // $('.slds-icon').addClass('checkredmark');
                        // $('.criteria-msg').css('visibility', 'visible');
                        $('.criteria-msg').css('color', 'red');
                        // $('.re-enter-pwd-icon-pos1').css('top', 195);
                        // $('.re-enter-pwd-icon-pos').css('top', 172);
                        $('.criteria-msg').html(pwdCriteriaNotMetLabel);
                        if (!newPasswordSpan.hasClass('has-error')) {
                            newPasswordSpan.addClass('has-error');
                        }
                        if (currentValue.length == 0) {
                            newPasswordSpan.removeClass('has-error');
                            $('.criteria-msg').html(' ');
                        }
                        disableSaveBtn();
                    }
                } catch (e) {
                    console.error(e);
                }
            }

            $(document).on('change', '.newpasswordtxt', function () {
                //if (document.querySelector(".verifypwdtxt").value) {
                checkPassWord();
                //}
                $('.error-msg').html(' ');
                let newPasswordSpan = $('.new-password-span');
                if (newPasswordSpan.hasClass('old-pass-error')) {
                    newPasswordSpan.removeClass('old-pass-error');
                }
                var currentValue = $(this).val();
                console.log('value entered-->input');
                var number = /([0-9])/;
                var lowercase = /([a-z])/;
                var uppercase = /([A-Z])/;

                var special_characters =
                    /([!,",#,$,%,&,',(,),*,\-,+,.,\/,:,;,<,=,>,?,@,\[,\,\],^,_,`,{,|,},~,])/;
                var pwdCriteriaMetLabel = '{!JSENCODE($Label.PP_MeetingCriteria)}';
                var pwdCriteriaNotMetLabel = '{!JSENCODE($Label.PP_PasswordCriteriaNotMet)}';

                if (currentValue.length >= 8) {
                    $('#eightchar').css('display', 'none');
                    $('#eightchar1').css('display', 'block');
                    $('#eightchar1').addClass('checkgreenmarklofi');
                    $('#pp_eightchar').removeClass();
                    $('#pp_eightchar').addClass('password-criteria-green');
                } else {
                    $('#eightchar1').css('display', 'none');
                    $('#eightchar').css('display', 'block');
                    $('#eightchar').addClass('checkmarklofi');
                    $('#pp_eightchar').removeClass();
                    $('#pp_eightchar').addClass('password-criteria-grey');
                }
                if (currentValue.match(number)) {
                    $('#numb').css('display', 'none');
                    $('#numb1').css('display', 'block');
                    $('#numb1').addClass('checkgreenmarklofi');
                    $('#pp_pwd').removeClass();
                    $('#pp_pwd').addClass('password-criteria-green');
                } else {
                    $('#numb1').css('display', 'none');
                    $('#numb').css('display', 'block');
                    $('#numb').addClass('checkmarklofi');
                    $('#pp_pwd').removeClass();
                    $('#pp_pwd').addClass('password-criteria-grey');
                }
                if (currentValue.match(lowercase)) {
                    $('#lc').css('display', 'none');
                    $('#lc1').css('display', 'block');
                    $('#lc1').addClass('checkgreenmarklofi');
                    $('#pp_lower').removeClass();
                    $('#pp_lower').addClass('password-criteria-green');
                } else {
                    $('#lc').addClass('checkmarklofi');
                    $('#lc1').css('display', 'none');
                    $('#lc').css('display', 'block');
                    $('#pp_lower').removeClass();
                    $('#pp_lower').addClass('password-criteria-grey');
                }
                if (currentValue.match(uppercase)) {
                    $('#uc').css('display', 'none');
                    $('#uc1').css('display', 'block');
                    $('#uc1').addClass('checkgreenmarklofi');
                    $('#pp_upper').removeClass();
                    $('#pp_upper').addClass('password-criteria-green');
                } else {
                    $('#uc').addClass('checkmarklofi');
                    $('#uc1').css('display', 'none');
                    $('#uc').css('display', 'block');
                    $('#pp_upper').removeClass();
                    $('#pp_upper').addClass('password-criteria-grey');
                }
                if (currentValue.match(special_characters)) {
                    $('#special').css('display', 'none');
                    $('#special1').css('display', 'block');
                    $('#special1').addClass('checkgreenmarklofi');
                    $('#pp_special').removeClass();
                    $('#pp_special').addClass('password-criteria-green');
                } else {
                    $('#special').addClass('checkmarklofi');
                    $('#special1').css('display', 'none');
                    $('#special').css('display', 'block');
                    $('#pp_special').removeClass();
                    $('#pp_special').addClass('password-criteria-grey');
                }

                if (
                    currentValue.length >= 8 &&
                    ((currentValue.match(number) &&
                        currentValue.match(lowercase) &&
                        currentValue.match(uppercase)) ||
                        (currentValue.match(lowercase) &&
                            currentValue.match(uppercase) &&
                            currentValue.match(special_characters)) ||
                        (currentValue.match(number) &&
                            currentValue.match(uppercase) &&
                            currentValue.match(special_characters)) ||
                        (currentValue.match(lowercase) &&
                            currentValue.match(number) &&
                            currentValue.match(special_characters)))
                ) {
                    console.log('4 matching criteria--->');
                    $('#info-icon').removeClass();
                    $('#info-icon').addClass('checkgreenmarklofi');
                    validForm = true;
                    $('.slds-icon').css('fill', '#26b515');
                    //$('.criteria-msg').css('visibility', 'visible');
                    $('.criteria-msg').css('display', 'none');
                    $('.criteria-msg').html(pwdCriteriaMetLabel);
                    if (newPasswordSpan.hasClass('has-error')) {
                        newPasswordSpan.removeClass('has-error');
                    }
                    //  $('.re-enter-pwd-icon-pos1').css('top', 168);
                    //$('.re-enter-pwd-icon-pos').css('top', 168);
                } else {
                    console.log('not matching criteria--->');
                    $('#info-icon').removeClass();
                    $('#info-icon').addClass('checkredmark');
                    $('.slds-icon').css('fill', 'red');
                    //$('.criteria-msg').css('visibility', 'visible');
                    $('.criteria-msg').css('display', 'block');
                    $('.criteria-msg').css('color', 'red');
                    // $('.re-enter-pwd-icon-pos1').css('top', 195);
                    // $('.re-enter-pwd-icon-pos').css('top', 172);
                    $('.criteria-msg').html(pwdCriteriaNotMetLabel);
                    if (!newPasswordSpan.hasClass('has-error')) {
                        newPasswordSpan.addClass('has-error');
                    }
                    disableSaveBtn();
                }
                validForm = false;
                checkPassWord();
            });

            $(function () {
                $('.newpasswordtxt').keyup(function () {
                    //if (document.querySelector(".verifypwdtxt").value) {
                    checkPassWord();
                    //}
                    $('.error-msg').html(' ');
                    let newPasswordSpan = $('.new-password-span');
                    if (newPasswordSpan.hasClass('old-pass-error')) {
                        newPasswordSpan.removeClass('old-pass-error');
                    }
                    var currentValue = $(this).val();
                    console.log('value entered-->');
                    var number = /([0-9])/;
                    var lowercase = /([a-z])/;
                    var uppercase = /([A-Z])/;
                    //var special_characters = /([~,!,@,#,$,%,^,&,*,-,_,+,=,?,>,<])/;
                    var special_characters =
                        /([!,",#,$,%,&,',(,),*,\-,+,.,\/,:,;,<,=,>,?,@,\[,\,\],^,_,`,{,|,},~,])/;
                    var pwdCriteriaMetLabel = '{!JSENCODE($Label.PP_MeetingCriteria)}';
                    var pwdCriteriaNotMetLabel = '{!JSENCODE($Label.PP_PasswordCriteriaNotMet)}';
                    if (currentValue.length >= 8) {
                        $('#eightchar').css('display', 'none');
                        $('#eightchar1').css('display', 'block');
                        $('#eightchar1').addClass('checkgreenmarklofi');
                        $('#pp_eightchar').removeClass();
                        $('#pp_eightchar').addClass('password-criteria-green');
                    } else {
                        $('#eightchar1').css('display', 'none');
                        $('#eightchar').css('display', 'block');
                        $('#eightchar').addClass('checkmarklofi');
                        $('#pp_eightchar').removeClass();
                        $('#pp_eightchar').addClass('password-criteria-grey');
                    }
                    if (currentValue.match(number)) {
                        $('#numb').css('display', 'none');
                        $('#numb1').css('display', 'block');
                        $('#numb1').addClass('checkgreenmarklofi');
                        $('#pp_pwd').removeClass();
                        $('#pp_pwd').addClass('password-criteria-green');
                    } else {
                        $('#numb1').css('display', 'none');
                        $('#numb').css('display', 'block');
                        $('#numb').addClass('checkmarklofi');
                        $('#pp_pwd').removeClass();
                        $('#pp_pwd').addClass('password-criteria-grey');
                    }
                    if (currentValue.match(lowercase)) {
                        $('#lc').css('display', 'none');
                        $('#lc1').css('display', 'block');
                        $('#lc1').addClass('checkgreenmarklofi');
                        $('#pp_lower').removeClass();
                        $('#pp_lower').addClass('password-criteria-green');
                    } else {
                        $('#lc').addClass('checkmarklofi');
                        $('#lc1').css('display', 'none');
                        $('#lc').css('display', 'block');
                        $('#pp_lower').removeClass();
                        $('#pp_lower').addClass('password-criteria-grey');
                    }
                    if (currentValue.match(uppercase)) {
                        $('#uc').css('display', 'none');
                        $('#uc1').css('display', 'block');
                        $('#uc1').addClass('checkgreenmarklofi');
                        $('#pp_upper').removeClass();
                        $('#pp_upper').addClass('password-criteria-green');
                    } else {
                        $('#uc').addClass('checkmarklofi');
                        $('#uc1').css('display', 'none');
                        $('#uc').css('display', 'block');
                        $('#pp_upper').removeClass();
                        $('#pp_upper').addClass('password-criteria-grey');
                    }
                    if (currentValue.match(special_characters)) {
                        $('#special').css('display', 'none');
                        $('#special1').css('display', 'block');
                        $('#special1').addClass('checkgreenmarklofi');
                        $('#pp_special').removeClass();
                        $('#pp_special').addClass('checkgreenmarklofi');
                    } else {
                        $('#special').addClass('checkmarklofi');
                        $('#special1').css('display', 'none');
                        $('#special').css('display', 'block');
                        $('#pp_special').removeClass();
                        $('#pp_special').addClass('password-criteria-grey');
                    }
                    if (
                        currentValue.length >= 8 &&
                        ((currentValue.match(number) &&
                            currentValue.match(lowercase) &&
                            currentValue.match(uppercase)) ||
                            (currentValue.match(lowercase) &&
                                currentValue.match(uppercase) &&
                                currentValue.match(special_characters)) ||
                            (currentValue.match(number) &&
                                currentValue.match(uppercase) &&
                                currentValue.match(special_characters)) ||
                            (currentValue.match(lowercase) &&
                                currentValue.match(number) &&
                                currentValue.match(special_characters)))
                    ) {
                        console.log('1 matching criteria--->');
                        $('#info-icon').removeClass();
                        $('#info-icon').addClass('checkgreenmarklofi');
                        validForm = true;
                        $('.slds-icon').css('fill', '#26b515');
                        //$('.slds-icon').removeClass();
                        //$('.slds-icon').addClass('checkgreenmarklofi');
                        // $('.criteria-msg').css('visibility', 'visible');
                        $('.criteria-msg').css('display', 'none');
                        $('.criteria-msg').html(pwdCriteriaMetLabel);
                        if (newPasswordSpan.hasClass('has-error')) {
                            newPasswordSpan.removeClass('has-error');
                        }
                        // $('.re-enter-pwd-icon-pos1').css('top', 168);
                        // $('.re-enter-pwd-icon-pos').css('top', 168);
                    } else {
                        console.log('not matching criteria--->');
                        $('#info-icon').removeClass();
                        $('#info-icon').addClass('checkredmark');
                        $('.slds-icon').css('fill', 'red');
                        //$('.slds-icon').removeClass();
                        //$('.slds-icon').addClass('checkredmark');
                        //$('.criteria-msg').css('visibility', 'visible');
                        //$('.criteria-msg').css('color', 'red');
                        $('.criteria-msg').css('display', 'block');
                        if (!newPasswordSpan.hasClass('has-error')) {
                            newPasswordSpan.addClass('has-error');
                        }
                        //$('.re-enter-pwd-icon-pos1').css('top', 195);
                        //  $('.re-enter-pwd-icon-pos').css('top', 172);
                        //$('.criteria-msg').html(pwdCriteriaNotMetLabel);
                    }
                    validForm = false;
                    disableSaveBtn();
                });
            });
            $(function () {
                $('.newpasswordtxt').change(function () {
                    // if (document.querySelector(".verifypwdtxt").value) {
                    checkPassWord();
                    //}
                    $('.error-msg').html(' ');
                    let newPasswordSpan = $('.new-password-span');
                    if (newPasswordSpan.hasClass('old-pass-error')) {
                        newPasswordSpan.removeClass('old-pass-error');
                    }
                    var currentValue = $(this).val();
                    var number = /([0-9])/;
                    var lowercase = /([a-z])/;
                    var uppercase = /([A-Z])/;
                    //var special_characters = /([~,!,@,#,$,%,^,&,*,-,_,+,=,?,>,<])/;
                    var special_characters =
                        /([!,",#,$,%,&,',(,),*,\-,+,.,\/,:,;,<,=,>,?,@,\[,\,\],^,_,`,{,|,},~,])/;
                    var pwdCriteriaMetLabel = '{!JSENCODE($Label.PP_MeetingCriteria)}';
                    var pwdCriteriaNotMetLabel = '{!JSENCODE($Label.PP_PasswordCriteriaNotMet)}';

                    if (currentValue.length >= 8) {
                        $('#eightchar').css('display', 'none');
                        $('#eightchar1').css('display', 'block');
                        $('#eightchar1').addClass('checkgreenmarklofi');
                        $('#pp_eightchar').removeClass();
                        $('#pp_eightchar').addClass('password-criteria-green');
                    } else {
                        $('#eightchar1').css('display', 'none');
                        $('#eightchar').css('display', 'block');
                        $('#eightchar').addClass('checkmarklofi');
                        $('#pp_eightchar').removeClass();
                        $('#pp_eightchar').addClass('password-criteria-grey');
                    }
                    if (currentValue.match(number)) {
                        $('#numb').css('display', 'none');
                        $('#numb1').css('display', 'block');
                        $('#numb1').addClass('checkgreenmarklofi');
                        $('#pp_pwd').removeClass();
                        $('#pp_pwd').addClass('password-criteria-green');
                    } else {
                        $('#numb1').css('display', 'none');
                        $('#numb').css('display', 'block');
                        $('#numb').addClass('checkmarklofi');
                        $('#pp_pwd').removeClass();
                        $('#pp_pwd').addClass('password-criteria-grey');
                    }
                    if (currentValue.match(lowercase)) {
                        $('#lc').css('display', 'none');
                        $('#lc1').css('display', 'block');
                        $('#lc1').addClass('checkgreenmarklofi');
                        $('#pp_lower').removeClass();
                        $('#pp_lower').addClass('password-criteria-green');
                    } else {
                        $('#lc').addClass('checkmarklofi');
                        $('#lc1').css('display', 'none');
                        $('#lc').css('display', 'block');
                        $('#pp_lower').removeClass();
                        $('#pp_lower').addClass('password-criteria-grey');
                    }
                    if (currentValue.match(uppercase)) {
                        $('#uc').css('display', 'none');
                        $('#uc1').css('display', 'block');
                        $('#uc1').addClass('checkgreenmarklofi');
                        $('#pp_upper').removeClass();
                        $('#pp_upper').addClass('password-criteria-green');
                    } else {
                        $('#uc').addClass('checkmarklofi');
                        $('#uc1').css('display', 'none');
                        $('#uc').css('display', 'block');
                        $('#pp_upper').removeClass();
                        $('#pp_upper').addClass('password-criteria-grey');
                    }
                    if (currentValue.match(special_characters)) {
                        $('#special').css('display', 'none');
                        $('#special1').css('display', 'block');
                        $('#special1').addClass('checkgreenmarklofi');
                        $('#pp_special').removeClass();
                        $('#pp_special').addClass('checkgreenmarklofi');
                    } else {
                        $('#special').addClass('checkmarklofi');
                        $('#special1').css('display', 'none');
                        $('#special').css('display', 'block');
                        $('#pp_special').removeClass();
                        $('#pp_special').addClass('password-criteria-grey');
                    }
                    if (
                        currentValue.length >= 8 &&
                        ((currentValue.match(number) &&
                            currentValue.match(lowercase) &&
                            currentValue.match(uppercase)) ||
                            (currentValue.match(lowercase) &&
                                currentValue.match(uppercase) &&
                                currentValue.match(special_characters)) ||
                            (currentValue.match(number) &&
                                currentValue.match(uppercase) &&
                                currentValue.match(special_characters)) ||
                            (currentValue.match(lowercase) &&
                                currentValue.match(number) &&
                                currentValue.match(special_characters)))
                    ) {
                        console.log('2 matching criteria--->');
                        $('#info-icon').removeClass();
                        $('#info-icon').addClass('checkgreenmarklofi');
                        validForm = true;
                        $('.slds-icon').css('fill', '#26b515');
                        //$('.criteria-msg').css('visibility', 'visible');
                        $('.criteria-msg').css('display', 'none');
                        $('.criteria-msg').html(pwdCriteriaMetLabel);
                        if (newPasswordSpan.hasClass('has-error')) {
                            newPasswordSpan.removeClass('has-error');
                        }
                        //$('.re-enter-pwd-icon-pos1').css('top', 168);
                        // $('.re-enter-pwd-icon-pos').css('top', 168);
                        //var btn = document.querySelector(".changepwdbtn");
                        //btn.disabled = false;
                    } else {
                        console.log('not matching criteria--->');
                        $('#info-icon').removeClass();
                        $('#info-icon').addClass('checkredmark');
                        $('.slds-icon').css('fill', 'red');
                        //$('.criteria-msg').css('visibility', 'visible');
                        $('.criteria-msg').css('color', 'red');
                        $('.criteria-msg').css('display', 'block');
                        $('.criteria-msg').html(pwdCriteriaNotMetLabel);
                        if (!newPasswordSpan.hasClass('has-error')) {
                            newPasswordSpan.addClass('has-error');
                        }
                        // $('.re-enter-pwd-icon-pos1').css('top', 195);
                        //$('.re-enter-pwd-icon-pos').css('top', 172);
                        //var btn = document.querySelector(".changepwdbtn");
                        //btn.disabled = true;
                    }
                    disableSaveBtn();
                    validForm = false;
                });
            });
            function disableSaveBtn() {
                var currentValue = document.querySelector('.newpasswordtxt').value;
                var number = /([0-9])/;
                var lowercase = /([a-z])/;
                var uppercase = /([A-Z])/;
                var passWordCriteriaMet = false;
                var special_characters =
                    /([!,",#,$,%,&,',(,),*,\-,+,.,\/,:,;,<,=,>,?,@,\[,\,\],^,_,`,{,|,},~,])/;
                if (
                    currentValue.length >= 8 &&
                    ((currentValue.match(number) &&
                        currentValue.match(lowercase) &&
                        currentValue.match(uppercase)) ||
                        (currentValue.match(lowercase) &&
                            currentValue.match(uppercase) &&
                            currentValue.match(special_characters)) ||
                        (currentValue.match(number) &&
                            currentValue.match(uppercase) &&
                            currentValue.match(special_characters)) ||
                        (currentValue.match(lowercase) &&
                            currentValue.match(number) &&
                            currentValue.match(special_characters)))
                ) {
                    passWordCriteriaMet = true;
                } else {
                    passWordCriteriaMet = false;
                }
                var passWordsMatch =
                    document.querySelector('.newpasswordtxt').value ==
                    document.querySelector('.verifypwdtxt').value;
                if (
                    document.querySelector('.newpasswordtxt').value &&
                    document.querySelector('.verifypwdtxt').value &&
                    passWordsMatch == true &&
                    passWordCriteriaMet == true
                ) {
                    var btn = document.querySelector('.changepwdbtn');
                    var savButtonDisabled = '{!isSaveButtonDisabled}';
                    btn.disabled = false || savButtonDisabled;
                } else {
                    var btn = document.querySelector('.changepwdbtn');
                    btn.disabled = true;
                }
                if (document.getElementById('PPChangePassword:reg_form:passwHiddenField') != null) {
                    document.getElementById('PPChangePassword:reg_form:passwHiddenField').value =
                        $('.pwd-match').css('display') == 'block' ||
                        $('.criteria-msg').css('display') == 'block';
                }
            }
        </script>

        <script>
            var validForm = true;
            function switchVisibility(btnId) {
                $('#btn_' + btnId).toggleClass('visible');
                var input = document.getElementById('PP_RRChangePassword:reg_form:pwd_' + btnId);
                var type = 'text';
                if (input.getAttribute('type') === type) type = 'password';
                input.setAttribute('type', type);
            }

            //init SVG for EveryBbody
            $(document).ready(function () {
                svg4everybody();
                $('#themeCSS').attr('href', '{!themeCSS}');
                if (!$('.ci-bottom-aria').hasClass('ci-hidden')) {
                    $('.terms-and-conditions').addClass('cookie-policy-padding');
                    $('.rr-bottom-bar-area').addClass('cookie-bottom');
                }
                var country = '{!country}';
                if (country) $("[id$='PP_RRChangePassword:reg_form:countryId']").val(country);
                var state = '{!state}';
                if (state) $("[id$='PP_RRChangePassword:reg_form:stateId']").val(state);
                if (country)
                    $("[id$='PP_RRChangePassword:reg_form:countryIdParticiapnt']").val(country);
                if (state) $("[id$='PP_RRChangePassword:reg_form:stateIdParticiapnt']").val(state);
                var yearofBirth = '{!birthYear}';
                var d = document.getElementById('{!$Component.reg_form.yearofbirth}');
                if (yearofBirth && d) d.value = yearofBirth;
            });
            function throwToastMesg(isDeleted) {
                var addPhotoLabel = '{!JSENCODE($Label.PP_PhotoAdd)}';
                var removePhotoLabel = '{!JSENCODE($Label.PP_PhotoRemove)}';
                var element = document.getElementById('ToastMessage');
                document.getElementsByClassName('slds-text-heading_small')[0].innerHTML = isDeleted
                    ? removePhotoLabel
                    : addPhotoLabel;
                element.style.display = 'block';
                uploadAF();
            }
            function closeToastMesg() {
                var element = document.getElementById('ToastMessage');
                element.style.display = 'none';
            }
            function attestScript() {
                attestFun();
            }

        </script>
        <!-- upload photo: -->
        <div class="rr-header-content main-header-brand" style="{!if(isRTL== true , 'direction:rtl;','')}">
            <img src="{!$Resource.PP_DesktopLogos+'/Patient_Portal_Logo.svg'}" class="logo-block" style="margin: 17px" />
        </div>
        <div class="slds-scope" style="{!if(isRTL== true , 'direction:rtl;','')}">
            <div class="rr-header-margin"></div>
            <div class="rr-body-content">
                <!--Notification-->
                <div style="
                        height: 4rem;
                        display: none;
                        margin-bottom: -26px;
                        margin-top: -40px;
                        margin-left: 0.5rem;
                    " id="ToastMessage">
                    <div class="slds-notify_container slds-is-relative">
                        <div class="slds-notify_container slds-is-relative">
                            <div class="slds-notify slds-notify_toast slds-theme_success" role="alert" style="
                                    border-radius: 8px;
                                    background-color: #009d3f;
                                    justify-content: center;
                                    box-shadow: 0 8px 20px 0 rgba(0, 0, 0, 0.3);
                                ">
                                <span class="slds-assistive-text">success</span>
                                <span class="slds-icon_container slds-icon-utility-success slds-m-right_small slds-no-flex slds-align-top" title="Description of icon when needed">
                                    <svg aria-hidden="true" class="slds-icon slds-icon_small">
                                        <use xlink:href="/apexpages/slds/latest/assets/icons/utility-sprite/svg/symbols.svg#success" xmlns:xlink="http://www.w3.org/1999/xlink"></use>
                                    </svg>
                                </span>
                                <div class="slds-notify__content">
                                    <apex:outputPanel rendered="{!!hasProfilePic}">
                                        <h2 class="slds-text-heading_small" style="font-weight: bold">
                                            {!$Label.PP_PhotoAdd}
                                        </h2>
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!hasProfilePic}">
                                        <h2 class="slds-text-heading_small" style="font-weight: bold">
                                            {!$Label.PP_PhotoRemove}
                                        </h2>
                                    </apex:outputPanel>
                                </div>
                                <button id="clo" class="slds-button slds-button_icon slds-notify__close" title="Close" onclick="closeToastMesg()" style="
                                        top: 1.5rem !important;
                                        width: 20px;
                                        height: 24px;
                                        width: 24px;
                                        background-color: transparent;
                                        padding-right: 3px;
                                        color: #ffffff;
                                    ">
                                    <svg class="slds-button__icon slds-button__icon_large" style="margin-left: -23px" aria-hidden="true">
                                        <use xlink:href="/apexpages/slds/latest/assets/icons/utility-sprite/svg/symbols.svg#close" xmlns:xlink="http://www.w3.org/1999/xlink"></use>
                                    </svg>
                                    <span class="slds-assistive-text">Close</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <!--end-->
                <div class="rr-white-panel">
                    <div class="contentMargin">
                        <div class="slds-grid slds-wrap">
                            <div class="debug" style="display: none">
                                template name: {!templateName} community name: {!currentCommunityName} site name: {!siteName}
                            </div>
                            <div class="ap-section-title">{!$Label.PP_ProfileInformation}</div>
                        </div>
                        <div>
                            <apex:form id="uploadpic">
                                <apex:actionFunction action="{!upload}" name="uploadAF" />
                                <apex:actionFunction action="{!deletePicture}" name="deleteAF" />
                                <table style="width: auto">
                                    <tr>
                                        <td rowspan="2">
                                            <apex:image value="{!$Resource.pp_community_icons + '/userprofile_avatar.svg'}" style="
                                                    border-radius: 50%;
                                                    height: 56px;
                                                    margin-left: 3px;
                                                    margin-top: 10px;
                                                    width: 56px;
                                                    border-radius: 50%;
                                                " rendered="{!!hasProfilePic}" />
                                            <apex:image value="{!photolink}" style="
                                                    border-radius: 50%;
                                                    height: 56px;
                                                    margin-left: 3px;
                                                    margin-top: 10px;
                                                    width: 56px;
                                                    border-radius: 50%;
                                                " rendered="{!hasProfilePic}" />
                                        </td>
                                        <td class="tdclas">
                                            <div class="btn-upload-photo">
                                                <span class="add-photo">{!addPhotoLabel}</span>
                                                <apex:inputFile styleClass="{!if(isRTL == true,'input-controlRTL','input-control')}" value="{!blobValue}" contentType="{!contentType}"
                                                    fileName="{!filename}" onchange="throwToastMesg(false)" />
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="tdclas" style="padding-top: 0">
                                            <span onclick="{!if(hasProfilePic,'throwToastMesg(true);deleteAF();','')}" class="remove-photo" style="{!if(isRTL == true, 'display: contents;', '')}  {!if(hasProfilePic,'','opacity:0.4; cursor: default')} ">
                                                {!$Label.PP_Remove_Photo}
                                            </span>
                                        </td>
                                    </tr>
                                </table>
                            </apex:form>
                        </div>
                        <apex:form id="reg_form">
                            <!-- update language function: -->
                            <apex:actionFunction action="{!translateFieldsAction}" name="translateFields" />
                            <apex:actionFunction action="{!updateBrowserLanguageAction}" name="updateLanguage" onComplete="translateFields();" />
                            <div class="slds-grid slds-wrap" style="margin-top: 22px">
                                <div class="ap-section-title" style="font-size: 20px">
                                    {!$Label.PP_LoginInfo}
                                </div>
                            </div>
                            <div class="slds-grid slds-wrap slds-gutters">
                                <div class="rr-form-element slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                                    <label>{!$Label.PP_Username}</label>
                                    <input class="slds-input container" type="text " value="{!maskUserName}" disabled="true " style="border-radius: 16px" />
                                </div>
                            </div>
                            <div class="slds-grid slds-wrap slds-gutters">
                                <div class="rr-form-element {!IF(!isPaswordsEquals, 'error', '')} slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                                    <label>{!$Label.PP_NewPassword}
                                        <span title="required" class="slds-required">*</span>
                                    </label>
                                    <div class="password-input">
                                        <div>
                                            <span class="new-password-span">
                                                <apex:outputPanel id="showinputpwd">
                                                    <apex:inputSecret value="{!newPassword}" redisplay="true" styleClass="newpasswordtxt container" style="padding-right: 40px"
                                                        id="newpwd" rendered="{!showNewPassword == true}" />
                                                    <apex:input value="{!newPassword}" styleClass="newpasswordtxt container" style="padding-right: 40px" id="new-password" rendered="{!showNewPassword == false}"
                                                    />
                                                </apex:outputPanel>
                                            </span>
                                            <apex:actionFunction action="{!toggleNewPassword}" name="toggleNew" reRender="showinputpwd,icons,hidden-eye,visible-eye,newpwd,new-password">
                                            </apex:actionFunction>
                                            <apex:outputPanel id="icons">
                                                <span id="eye-hidden-icon" class="{!if(isRTL == true,'checkmarklofi eye-icon-mask-rtl','checkmarklofi eye-icon-mask eye-icon-pos')}"
                                                    style="{!if(showNewPassword == true ,'display:block','display:none')}">
                                                    <apex:outputPanel id="hidden-eye">
                                                        <svg class="checksizelofi-eye" aria-hidden="true" onclick="toggleFirstPassword();">
                                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="15" opacity="0.5" xlink:href="{!$Resource.rr_community_icons}/icons.svg#eye-hidden-lofi"></use>
                                                        </svg>
                                                    </apex:outputPanel>
                                                </span>
                                                <span id="eye-icon" class="{!if(isRTL == true,'checkmarklofi eye-icon-rtl','checkmarklofi eye-icon eye-icon-pos')}" style="{!if(showNewPassword == false , 'display:block','display:none')}">
                                                    <apex:outputPanel id="visible-eye">
                                                        <svg class="checksizelofi-eye" aria-hidden="true" onclick="toggleFirstPassword(event);">
                                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20" opacity="0.5" xlink:href="{!$Resource.rr_community_icons}/icons.svg#icon-eye-lofi"></use>
                                                        </svg>
                                                    </apex:outputPanel>
                                                </span>
                                            </apex:outputPanel>
                                        </div>
                                        <div class="criteria-msg criteria-msg1"></div>
                                    </div>
                                </div>
                                <!-- <apex:messages styleClass="lg-error-alert" lang="{!translation.Language__c}" rendered="{!failingPageResponse == Null}" /> -->
                                <apex:outputPanel styleClass="error-description" rendered="{!!isPaswordsEquals}">{!$Label.PG_Login_T_Passwords_do_not_match}</apex:outputPanel>

                                <div class="rr-form-element {!IF(!isPaswordsEquals, 'error', '')} slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                                    <label>{!$Label.PP_Reenterpassword}
                                        <span title="required" class="slds-required">*</span>
                                    </label>
                                    <div class="password-input">
                                        <span class="reenter-password-span">
                                            <apex:outputPanel id="showinput">
                                                <apex:input value="{!verifyNewPassword}" styleClass="container verifypwdtxt " style="padding-right: 40px" rendered="{!showPassword == false}"
                                                    id="verifypwd" onchange="checkPassWord();">
                                                </apex:input>
                                                <apex:inputSecret value="{!verifyNewPassword}" onchange="checkPassWord();" id="verify-pwd" redisplay="true" styleClass="container verifypwdtxt"
                                                    rendered="{!showPassword==true}" style="padding-right: 40px">
                                                </apex:inputSecret>
                                            </apex:outputPanel>
                                        </span>
                                        <apex:actionFunction action="{!togglePassword}" name="toggleRenteredPassword" reRender="showinput,pwd-eye,pwd-eye-hidden,showinputtext,icons-new,verifypwd,verify-pwd">
                                        </apex:actionFunction>
                                        <apex:outputPanel id="icons-new">
                                            <span id="eye-icon" class="{!if(isRTL==true , 'checkmarklofi eye-icon-rtl', 'checkmarklofi eye-icon eye-icon-pos re-enter-pwd-icon-pos')}"
                                                style="{!if(showPassword==false ,
                               'display:block', 'display:none')} ">
                                                <apex:outputPanel onclick="toggleRenterPassword(); " id="pwd-eye">
                                                    <svg class="checksizelofi-eye" aria-hidden="true">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink " width="20" height="20" opacity="0.5" xlink:href="{!$Resource.rr_community_icons}/icons.svg#icon-eye-lofi"></use>
                                                    </svg>
                                                </apex:outputPanel>
                                            </span>
                                            <span id="eye-hidden-icon " class="{!if(isRTL==true , 'checkmarklofi eye-icon-mask-rtl', 'checkmarklofi eye-icon-mask eye-icon-pos re-enter-pwd-icon-pos1')}"
                                                style="{!if(showPassword==true ,
                               'display:block', 'display:none')} ">
                                                <apex:outputPanel onclick="toggleRenterPassword(); " id="pwd-eye-hidden">
                                                    <svg class="checksizelofi-eye" aria-hidden="true ">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink " width="20" height="15" opacity="0.5" xlink:href="{!$Resource.rr_community_icons}/icons.svg#eye-hidden-lofi"></use>
                                                    </svg>
                                                </apex:outputPanel>
                                            </span>
                                        </apex:outputPanel>
                                        <div class="pwd-match"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="slds-grid slds-wrap" style="margin-top: 22px">
                                <div class="ap-section-title" style="font-size: 1rem">
                                    {!$Label.PP_PasswordRequirement}
                                </div>
                            </div>
                            <div class="slds-p-bottom_x-large eightCharacters" style="color: black">
                                <div class="MediumBText">{!$Label.PP_PasswordMustInclude}</div>
                                <table id="tablePwdStatus" cellpadding="2" cellspacing="1" border="0" style="{!if(isRTL == true, 'width: auto', '')}">
                                    <tbody class="eightCharacters">
                                        <tr class="slds-p-left_medium slds-p-bottom_x-large eightCharacters">
                                            <td width="1rem">
                                                <div id="div_nLength" class="fail" style="{!if(isRTL == true, 'display: contents', 'padding-right:10px;')}">
                                                    <span id="eightchar" class="checkmarklofi" style="{!if(isRTL == true, 'float: right;padding-right:0', '')}">
                                                        <svg class="checksizelofi" aria-hidden="true">
                                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!$Resource.rr_community_icons}/icons.svg#icon-close"></use>
                                                        </svg>
                                                    </span>
                                                    <span id="eightchar1" class="checkmarklofi tickmark" style="{!if(isRTL == true, 'float: right;padding-right:0;', '')}">
                                                        <svg class="checksizelofi1" aria-hidden="true">
                                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!$Resource.rr_community_icons}/icons.svg#check-box"></use>
                                                        </svg>
                                                    </span>
                                                </div>
                                            </td>
                                            <td>
                                                <span id="pp_eightchar" class="password-criteria-grey">{!$Label.Pswd_8_Characters}</span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="2" class="{!if(isRTL == true,'and-include-any-3-rtl','and-include-any-3')}">
                                                <span class="password-criteria-text">{!$Label.PP_IncludeAnythreeofbelow}</span>
                                            </td>
                                        </tr>
                                        <tr class="eightCharacters">
                                            <td width="1rem">
                                                <div id="div_nNumber" class="fail" style="{!if(isRTL == true, 'display: contents', 'padding-right:10px;')}">
                                                    <span id="numb" class="checkmarklofi" style="{!if(isRTL == true, 'float: right;padding-right:0', '')}">
                                                        <svg class="checksizelofi" aria-hidden="true">
                                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!$Resource.rr_community_icons}/icons.svg#icon-close"></use>
                                                        </svg>
                                                    </span>
                                                    <span id="numb1" class="checkmarklofi tickmark" style="{!if(isRTL == true, 'float: right;padding-right:0;', '')}">
                                                        <svg class="checksizelofi1" aria-hidden="true">
                                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!$Resource.rr_community_icons}/icons.svg#check-box"></use>
                                                        </svg>
                                                    </span>
                                                </div>
                                            </td>
                                            <td class="">
                                                <span id="pp_pwd" class="password-criteria-grey">{!$Label.Pswd_Numbers}</span>
                                            </td>
                                        </tr>
                                        <tr class="eightCharacters">
                                            <td>
                                                <div id="div_nAlphaUC" class="fail" style="{!if(isRTL==true,'','padding-right:10px;')}">
                                                    <span id="uc" class="checkmarklofi" style="{!if(isRTL == true, 'float: right;padding-right:0;', '')}">
                                                        <svg class="checksizelofi" aria-hidden="true">
                                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!$Resource.rr_community_icons}/icons.svg#icon-close"></use>
                                                        </svg>
                                                    </span>
                                                    <span id="uc1" class="checkmarklofi tickmark" style="{!if(isRTL == true, 'float: right;padding-right:0;', '')}">
                                                        <svg class="checksizelofi1" aria-hidden="true">
                                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!$Resource.rr_community_icons}/icons.svg#check-box"></use>
                                                        </svg>
                                                    </span>
                                                </div>
                                            </td>
                                            <td class="">
                                                <span id="pp_upper" class="password-criteria-grey">{!$Label.Pswd_Uppercase}</span>
                                            </td>
                                        </tr>
                                        <tr class="eightCharacters">
                                            <td>
                                                <div id="div_nAlphaLC" class="fail" style="{!if(isRTL==true,'','padding-right:10px;')}">
                                                    <span id="lc" class="checkmarklofi" style="{!if(isRTL == true, 'float: right;padding-right:0;', '')}">
                                                        <svg class="checksizelofi" aria-hidden="true">
                                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!$Resource.rr_community_icons}/icons.svg#icon-close"></use>
                                                        </svg>
                                                    </span>
                                                    <span id="lc1" class="checkmarklofi tickmark" style="{!if(isRTL == true, 'float: right;padding-right:0;', '')}">
                                                        <svg class="checksizelofi1" aria-hidden="true">
                                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!$Resource.rr_community_icons}/icons.svg#check-box"></use>
                                                        </svg>
                                                    </span>
                                                </div>
                                            </td>
                                            <td>
                                                <span id="pp_lower" class="password-criteria-grey">{!$Label.Pswd_Lowercase}</span>
                                            </td>
                                        </tr>
                                        <tr class="eightCharacters">
                                            <td>
                                                <div id="div_nSpecial" class="fail" style="{!if(isRTL==true,'','padding-right:10px;')}">
                                                    <span id="special" class="checkmarklofi" style="{!if(isRTL == true, 'float: right;padding-right:0;', '')}">
                                                        <svg class="checksizelofi" aria-hidden="true">
                                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!$Resource.rr_community_icons}/icons.svg#icon-close"></use>
                                                        </svg>
                                                    </span>
                                                    <span id="special1" class="checkmarklofi tickmark" style="{!if(isRTL == true, 'float: right;padding-right:0;', '')}">
                                                        <svg class="checksizelofi1" aria-hidden="true">
                                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!$Resource.rr_community_icons}/icons.svg#check-box"></use>
                                                        </svg>
                                                    </span>
                                                </div>
                                            </td>
                                            <td>
                                                <span id="pp_special" class="password-criteria-grey">
                                                    {!$Label.Pswd_Special_Characters}</span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <!--- Contact Information -->
                            <div class="slds-grid slds-wrap">
                                <div class="ap-section-title" style="font-size: 20px">
                                    {!$Label.PP_ContactInformation}
                                </div>
                            </div>
                            <div class="MediumBText">{!$Label.PP_ContactInfo_Change}</div>
                            <div class="slds-grid slds-wrap slds-gutters">
                                <div class="rr-form-element slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                                    <label>{!$Label.PP_FirstName}
                                        <span title="required" class="slds-required">*</span>
                                    </label>
                                    <input class="slds-input container" type="text " value="{!participant.First_Name__c}" disabled="true " style="border-radius: 16px"
                                    />
                                </div>
                                <div class="rr-form-element slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                                    <label>{!$Label.PP_LastName}
                                        <span title="required" class="slds-required">*</span>
                                    </label>
                                    <input class="slds-input container" type="text " value="{!maskLastName}" disabled="true " style="border-radius: 16px" />
                                </div>
                                <div class="rr-form-element slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                                    <label>{!$Label.PP_Daytime_Phone} </label>
                                    <input class="slds-input container" type="text " value="{!maskDaytimephone}" disabled="true " style="border-radius: 16px"
                                    />
                                </div>
                            </div>
                            <div class="slds-grid slds-wrap slds-gutters">
                                <div class="rr-form-element slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                                    <label>{!$Label.PP_Country}
                                        <span title="required" class="slds-required">*</span>
                                    </label>
                                    <!--<input class="slds-input " type="text " value="{!participant.Mailing_Country_Code__c}" disabled="true " style="border-radius: 16px;"></input> -->
                                    <apex:actionRegion >
                                        <apex:selectList id="countryIdParticiapnt" styleClass="slds-input container" disabled="true" size="1" value="{!participant.Mailing_Country_Code__c}">
                                            <apex:selectOption itemLabel="--None--" itemValue="" />
                                            <apex:selectOptions value="{!countries}" />
                                            <apex:actionSupport event="onchange" action="{!updateStatesAction}" reRender="stateIdParticiapnt,yearofbirth,attestation,saveButton,minorErrorMessageParent"
                                            />
                                        </apex:selectList>
                                    </apex:actionRegion>
                                </div>
                                <div class="rr-form-element slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                                    <label>{!$Label.PP_State}
                                        <span title="required" class="slds-required">*</span>
                                    </label>
                                    <!-- <input class="slds-input " type="text " value="Useremail@gmail.com" disabled="true " style="border-radius: 16px;"></input> -->
                                    <apex:actionRegion >
                                        <apex:selectList id="stateIdParticiapnt" styleClass="slds-input container" disabled="true" size="1" value="{!participant.Mailing_State_Code__c}">
                                            <apex:selectOption itemLabel="--None--" itemValue="" />
                                            <apex:selectOptions value="{!states}" />
                                            <apex:actionSupport event="onchange" action="{!updateYearOfBirth}" reRender="yearofbirth,saveButton,minorErrorMessageParent,attestation"
                                            />
                                        </apex:selectList>
                                    </apex:actionRegion>
                                </div>
                                <div class="rr-form-element slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                                    <label>{!$Label.PP_Zippostalcode}</label>
                                    <!-- <input class="slds-input container" type="text " value="{!participant.Mailing_Zip_Postal_Code__c}" style="border-radius: 16px;"></input>  -->
                                    <apex:inputText value="{!participant.Mailing_Zip_Postal_Code__c}" styleClass="slds-input container" style="border-radius: 16px"
                                    />
                                </div>
                            </div>
                            <apex:outputPanel rendered="{!isDelegate}">
                                <div class="slds-grid slds-wrap slds-gutters">
                                    <div class="rr-form-element slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                                        <label>{!$Label.PE_Year_Of_Birth}
                                            <span title="required" class="slds-required">*</span>
                                        </label>
                                        <div class="selectInput">
                                            <apex:actionRegion >
                                                <apex:selectList id="yearofbirth" styleClass="slds-input container" size="1" value="{!participant.Birth_Year__c}">
                                                    <apex:selectOption itemLabel="{!$Label.None}" itemValue=" " />
                                                    <apex:selectOptions value="{!years}" />
                                                    <apex:actionSupport event="onchange" action="{!validateAgeOfMajority}" reRender="minorErrorMessageParent,attestation,saveButton"
                                                    />
                                                </apex:selectList>
                                            </apex:actionRegion>
                                        </div>
                                        <apex:outputPanel id="minorErrorMessageParent">
                                            <apex:outputPanel id="minorErrorMessage" rendered="{!showErrorMessage}">
                                                <apex:outputText value="{!$Label.PP_MinorMessage}" styleClass="minorErrorText" />
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </div>
                                    <div class="rr-form-element slds-col slds-size_1-of-1 slds-medium-size_3-of-4" style="max-width: 920px">
                                        <div class="slds-form-element certifyCheck">
                                            <div class="slds-form-element__control">
                                                <apex:actionRegion >
                                                    <!-- <apex:inputCheckbox value="{!per.Permit_Voice_Text_contact_for_this_study__c}" styleClass="checkboxcss" /> -->
                                                    <apex:actionRegion >
                                                        <apex:inputHidden value="{!passwordValidation}" id="passwHiddenField" />
                                                        <apex:actionFunction name="attestFun" action="{!ppValidateSaveButton}" rerender="saveButton,passwHiddenField" />
                                                        <apex:inputCheckbox value="{!isAttested}" id="attestation" disabled="{!isDisabled}" styleClass="checkboxcss" onclick="attestScript()">
                                                        </apex:inputCheckbox>
                                                        <!--<span class="{!if(isRTL,'attestation-confirmation-message attestation-RTL','attestation-confirmation-message attestation-LTR')}">{!$Label.Attestation_Confirmation_Message}</span> -->
                                                    </apex:actionRegion>
                                                    <label class="slds-checkbox__label" for="checkbox-unique-id-81 " style="margin-bottom: 0">
                                                        <span class="slds-checkbox_faux"></span>
                                                        <span class="slds-form-element__label">{!$Label.PP_Attest_Message}</span>
                                                    </label>
                                                </apex:actionRegion>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </apex:outputPanel>
                            <!--- Contact Information End -->
                            <!--- Language Options -->
                            <div class="slds-grid slds-wrap" style="margin-top: 22px">
                                <div class="ap-section-title" style="font-size: 20px">
                                    {!$Label.PP_LanguageOptions}
                                </div>
                            </div>
                            <div style="max-width: 798px; margin-bottom: 0.5rem" class="MediumBText">
                                {!$Label.PP_LanguageOptions_Info}
                            </div>
                            <div class="slds-grid slds-wrap slds-gutters">
                                <div class="rr-form-element slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                                    <div class="tooltipLabel">
                                        <label>{!$Label.PP_Preferred_Lang}
                                            <span title="required " class="slds-required">*</span>
                                        </label>
                                        <span class="slds-form-element__icon tooltip">
                                            <button type="button " class="slds-button slds-button_icon" aria-describedby="salesforce-lightning-helptext-bubble_e9d01f7b-4039-a66d-d7d6-3859dd5f1248 "
                                                help-text="{!$Label.PG_AS_F_Preferred_Language_Help_Text}" style="background-color: transparent">
                                                <lightning-primitive-icon lightning-primitiveicon_primitiveicon-host=" ">
                                                    <svg lightning-primitiveIcon_primitiveIcon="" focusable="false
                   " data-key="info" aria-hidden="true" class="slds-button__icon">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!$Resource.pp_community_icons}/icons.svg#info"></use>
                                                    </svg>
                                                </lightning-primitive-icon>
                                                <span class="slds-assistive-text"></span>
                                            </button>
                                        </span>
                                    </div>
                                    <div class="selectInput">
                                        <apex:inputField styleClass="slds-input container preferLang" value="{!userVal.contact.Language__c}">
                                            <apex:actionSupport event="onchange" action="{!updateLanguageAction}" rerender="regispanel" oncomplete="checkPassWord();"
                                            />
                                        </apex:inputField>
                                    </div>
                                </div>
                                <div class="rr-form-element slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                                    <div class="tooltipLabel">
                                        <label> {!$Label.PP_Secondary_Lang} </label>
                                        <span class="slds-form-element__icon tooltip">
                                            <button type="button" class="slds-button slds-button_icon" aria-describedby="salesforce-lightning-helptext-bubble_e9d01f7b-4039-a66d-d7d6-3859dd5f1248 "
                                                help-text="{!$Label.PG_AS_F_2nd_Choice_Language_Help_Text}" style="background-color: transparent">
                                                <lightning-primitive-icon lightning-primitiveicon_primitiveicon-host=" ">
                                                    <svg lightning-primitiveIcon_primitiveIcon=" " focusable="false
                   " data-key="info " aria-hidden="true " class="slds-button__icon">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink " xlink:href="{!$Resource.pp_community_icons}/icons.svg#info "></use>
                                                    </svg>
                                                </lightning-primitive-icon>
                                                <span class="slds-assistive-text"></span>
                                            </button>
                                        </span>
                                    </div>

                                    <div class="selectInput">
                                        <apex:inputField styleClass="slds-input container" value="{!userVal.contact.Second_Choice_Language__c}">
                                            <apex:actionSupport event="onchange" action="{!updateLanguageAction}" oncomplete="checkPassWord();" />
                                        </apex:inputField>
                                    </div>
                                </div>
                                <div class="rr-form-element slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                                    <div class="tooltipLabel">
                                        <label> {!$Label.PP_Third_Lang} </label>
                                        <span class="slds-form-element__icon tooltip">
                                            <button type="button" class="slds-button slds-button_icon" aria-describedby="salesforce-lightning-helptext-bubble_e9d01f7b-4039-a66d-d7d6-3859dd5f1248 "
                                                help-text="{!$Label.PG_AS_F_3rd_Choice_Language_Help_Text}" style="background-color: transparent">
                                                <lightning-primitive-icon lightning-primitiveicon_primitiveicon-host=" ">
                                                    <svg lightning-primitiveIcon_primitiveIcon=" " focusable="false
                   " data-key="info " aria-hidden="true " class="slds-button__icon">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink " xlink:href="{!$Resource.pp_community_icons}/icons.svg#info"></use>
                                                    </svg>
                                                </lightning-primitive-icon>
                                                <span class="slds-assistive-text"></span>
                                            </button>
                                        </span>
                                    </div>
                                    <div class="selectInput">
                                        <apex:inputField styleClass="slds-input container" value="{!userVal.Contact.Third_Choice_Language__c}">
                                            <apex:actionSupport event="onchange" action="{!updateLanguageAction}" oncomplete="checkPassWord();" />
                                        </apex:inputField>
                                    </div>
                                </div>
                            </div>
                            <!--- Language Options End -->
                            <!--- Timezone sec -->
                            <div class="slds-grid slds-wrap" style="margin-top: 22px">
                                <div class="ap-section-title" style="font-size: 20px">
                                    {!$Label.PP_TimeZone_Location}
                                </div>
                            </div>
                            <div class="slds-grid slds-wrap slds-gutters">
                                <div class="rr-form-element slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                                    <label>{!$Label.PP_Preferred_Timezone}
                                        <span title="required" class="slds-required">*</span>
                                    </label>

                                    <div class="selectInput">
                                        <apex:inputField styleClass="slds-input container" value="{!userVal.TimeZoneSidKey}" />
                                    </div>
                                </div>
                                <div class="rr-form-element slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                                    <label>{!$Label.PP_Locale_DateFmt}
                                        <span title="required" class="slds-required">*</span>
                                    </label>

                                    <div class="selectInput">
                                        <apex:inputField styleClass="slds-input container" value="{!userVal.LocaleSidKey}" />
                                    </div>
                                </div>
                            </div>
                            <!---Timezone sec End -->
                            <!--<apex:outputPanel id="thePanel1">old
                                <div class="timeZoneText">
                                    <div class="studyConsentText">
                                        {!$Label.PP_StudyPrivacyPolicyNote1}
                                        <a href="{!tcLink}" target="_blank">
                                            {!$Label.Footer_Link_Terms_Of_Use}</a> vik : {!ctpName} {!$Label.PP_StudyPrivacyPolicyNote2}
                                        <a href="{!studyPrivacyPolicyUrl}" target="_blank">
                                            {!$Label.Footer_Link_Privacy_Policy}</a>{!$Label.PP_StudyPrivacyPolicyNote3}
                                    </div>
                                    
                                    <apex:outputPanel rendered="{!(!isDelegate)}">
                                        <div class=" slds-grid slds-wrap slds-gutters ">

                                            <div class="slds-form-element slds-col slds-size_1-of-2 slds-small-size_2-of-12 ">
                                                <div class="slds-form-element__control ">

                                                    <apex:inputCheckbox value="{!per.Permit_Voice_Text_contact_for_this_study__c}" styleClass="checkboxcss " />

                                                    <label class="slds-checkbox__label " for="checkbox-unique-id-81 ">
                                                        <span class="slds-checkbox_faux "></span>
                                                        <span class="slds-form-element__label ">{!$Label.PP_Phonecheckbox}</span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="slds-form-element slds-col slds-size_1-of-2 slds-small-size_2-of-12 ">
                                                <div class="slds-form-element__control ">
                                                    <apex:inputCheckbox value="{!per.Permit_Mail_Email_contact_for_this_study__c}" styleClass="checkboxcss " />

                                                    <label class="slds-checkbox__label " for="checkbox-unique-id-82 ">
                                                        <span class="slds-checkbox_faux "></span>
                                                        <span class="slds-form-element__label ">{!$Label.PP_EmailCheckbox}</span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="slds-form-element slds-col slds-size_1-of-2 slds-small-size_4-of-12 slds-medium-size_3-of-12">
                                                <div class="slds-form-element__control ">
                                                    <apex:inputCheckbox value="{!per.Permit_SMS_Text_for_this_study__c}" styleClass="checkboxcss" />

                                                    <label class="slds-checkbox__label " for="checkbox-unique-id-83">
                                                        <span class="slds-checkbox_faux"></span>
                                                        <span class="slds-form-element__label">{!$Label.PP_SMSTexMessage}</span>
                                                    </label>

                                                </div>
                                            </div>
                                            <div class="slds-form-element slds-col slds-size_1-of-2 slds-small-size_4-of-12 slds-medium-size_3-of-12">
                                                <div class="slds-form-element__control ">
                                                    <apex:inputCheckbox value="{!per.Study_Direct_Mail_Consent__c}" styleClass="checkboxcss " />

                                                    <label class="slds-checkbox__label " for="checkbox-unique-id-84 ">
                                                        <span class="slds-checkbox_faux "></span>
                                                        <span class="slds-form-element__label ">{!$Label.PP_DirectMailCheckbox}</span>
                                                    </label>

                                                </div>
                                            </div>
                                        </div>
                                    </apex:outputPanel>
                                    <!-- ****************** Participant Consent Ends******************** -->
                            <!-- ***************** Delegate Consent Starts******************** -->
                            <!--<apex:outputPanel rendered="{!isDelegate}">
                                        <div class=" slds-grid slds-wrap slds-gutters ">

                                            <div class="slds-form-element slds-col slds-size_1-of-2 slds-small-size_2-of-12 ">
                                                <div class="slds-form-element__control ">

                                                    <apex:inputCheckbox value="{!pde.Study_Phone_Consent__c}" styleClass="checkboxcss " />

                                                    <label class="slds-checkbox__label " for="checkbox-unique-id-81 ">
                                                        <span class="slds-checkbox_faux "></span>
                                                        <span class="slds-form-element__label ">{!$Label.PP_Phonecheckbox}</span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="slds-form-element slds-col slds-size_1-of-2 slds-small-size_2-of-12 ">
                                                <div class="slds-form-element__control ">
                                                    <apex:inputCheckbox value="{!pde.Study_Email_Consent__c}" styleClass="checkboxcss " />

                                                    <label class="slds-checkbox__label " for="checkbox-unique-id-82 ">
                                                        <span class="slds-checkbox_faux "></span>
                                                        <span class="slds-form-element__label ">{!$Label.PP_EmailCheckbox}</span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="slds-form-element slds-col slds-size_1-of-2 slds-small-size_4-of-12 slds-medium-size_3-of-12">
                                                <div class="slds-form-element__control ">
                                                    <apex:inputCheckbox value="{!pde.Study_SMS_Consent__c}" styleClass="checkboxcss" />

                                                    <label class="slds-checkbox__label " for="checkbox-unique-id-83">
                                                        <span class="slds-checkbox_faux"></span>
                                                        <span class="slds-form-element__label">{!$Label.PP_SMSTexMessage}</span>
                                                    </label>

                                                </div>
                                            </div>
                                            <div class="slds-form-element slds-col slds-size_1-of-2 slds-small-size_4-of-12 slds-medium-size_3-of-12">
                                                <div class="slds-form-element__control ">
                                                    <apex:inputCheckbox value="{!pde.Study_Direct_Mail_Consent__c}" styleClass="checkboxcss " />

                                                    <label class="slds-checkbox__label " for="checkbox-unique-id-84 ">
                                                        <span class="slds-checkbox_faux "></span>
                                                        <span class="slds-form-element__label ">{!$Label.PP_DirectMailCheckbox}</span>
                                                    </label>

                                                </div>
                                            </div>
                                        </div>
                                    </apex:outputPanel>
                                   
                                </div>
                            </apex:outputPanel>-->
                            <!-- platform level -->
                            <!--<div class="timeZoneText " style="{!if((!isDelegate && isIQVIAOutreachToggleOnForParticipant) || (isDelegate && isIQVIAOutreachToggleOnForDelegate)  ,'','display:none')}">
                                <div class="outreachConsentText">
                                    {!$Label.PP_PlatformPrivacyPolicyNote1}
                                    <a href="{!platformPrivacyPolicyUrl}" target="_blank">
                                        {!$Label.Footer_Link_Privacy_Policy}</a>{!$Label.PP_PlatformPrivacyPolicyNote2}
                                </div>
                                <div class="slds-grid slds-wrap slds-gutters">
                                    <div class="slds-form-element slds-col slds-size_1-of-2 slds-small-size_2-of-12">
                                        <div class="slds-form-element__control">
                                            <apex:inputCheckbox value="{!contact.Participant_Phone_Opt_In_Permit_Phone__c}" styleClass="checkboxcss " />
                                            <label class="slds-checkbox__label" for="checkbox-unique-id-85 ">
                                                <span class="slds-checkbox_faux"></span>
                                                <span class="slds-form-element__label">{!$Label.PP_Phonecheckbox}</span>
                                            </label>
                                            
                                        </div>
                                    </div>
                                    <div class="slds-form-element slds-col slds-size_1-of-2 slds-small-size_2-of-12">
                                        <div class="slds-form-element__control">
                                            <apex:inputCheckbox value="{!contact.Participant_Opt_In_Status_Emails__c}" styleClass="checkboxcss " />
                                            <label class="slds-checkbox__label" for="checkbox-unique-id-86 ">
                                                <span class="slds-checkbox_faux"></span>
                                                <span class="slds-form-element__label">{!$Label.PP_EmailCheckbox}</span>
                                            </label>
                                           
                                        </div>
                                    </div>
                                    <div class="slds-form-element slds-col slds-size_1-of-2 slds-small-size_4-of-12 slds-medium-size_3-of-12">
                                        <div class="slds-form-element__control">
                                            <apex:inputCheckbox value="{!contact.Participant_Opt_In_Status_SMS__c}" styleClass="checkboxcss " />

                                            <label class="slds-checkbox__label" for="checkbox-unique-id-87 ">
                                                <span class="slds-checkbox_faux"></span>
                                                <span class="slds-form-element__label">{!$Label.PP_SMSTexMessage}</span>
                                            </label>
                                          
                                        </div>
                                    </div>
                                    <div class="slds-form-element slds-col slds-size_1-of-2 slds-small-size_4-of-12 slds-medium-size_3-of-12">
                                        <div class="slds-form-element__control">
                                            <apex:inputCheckbox value="{!contact.IQVIA_Direct_Mail_Consent__c}" styleClass="checkboxcss " />
                                           
                                            <label class="slds-checkbox__label" for="checkbox-unique-id-88 ">
                                                <span class="slds-checkbox_faux"></span>
                                                <span class="slds-form-element__label">{!$Label.PP_DirectMailCheckbox}</span>
                                            </label>
                                           
                                        </div>
                                    </div>
                                </div>
                            </div>
                           
                            <div class="timeZoneText">{!$Label.PP_ConsentRequired}</div>-->


                            <div class="slds-grid slds-wrap" style="margin-top: 22px">
                                <div class="ap-section-title" style="font-size: 20px">
                                    {!$Label.Study_Program_Consent}
                                </div>
                            </div>
                            <div style="max-width: 798px; margin-bottom: 1rem" class="MediumBText">
                                <apex:outputPanel rendered="{!participant.Mailing_Country_Code__c == 'US'}">
                                    {!$Label.PP_Consent_Study_Program_US}
                                </apex:outputPanel>
                                <apex:outputPanel rendered="{!participant.Mailing_Country_Code__c != 'US'}">
                                    {!$Label.PP_Consent_Study_Program_ROW}
                                </apex:outputPanel>
                            </div>
                            <apex:repeat value="{!cpr}" var="cpref" id="pers">

                                <div class="{!if(isMobileView == true,'slds-grid slds-wrap mob-view','slds-grid slds-wrap slds-grid_vertical-align-center desk-view')}">
                                    <div class="slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12 study-paramters">
                                        <div class="slds-p-top--medium study-p-left">
                                            {!cpref.perListAllforCommPrefs.Clinical_Trial_Profile__r.Study_Code_Name__c}
                                        </div>

                                        <div class="study-p-left slds-p-top--medium slds-p-bottom--small">
                                            <a href="{!cpref.reDirTC}" target="_blank" style="text-decoration: none;">
                                                <span class="slds-p-right--medium txt-color">{!$Label.Footer_Link_Terms_Of_Use}</span>
                                            </a>
                                            <span class="study-vertical-bar"></span>
                                            <a href="{!cpref.reDirPP}" target="_blank" style="text-decoration: none;">
                                                <span class="slds-p-left--medium txt-color">{!$Label.Email_Footer_Privacy_Policy}</span>
                                            </a>
                                        </div>
                                    </div>
                                    <div class="{!if(isMobileView == true,'slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12','slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12')}">
                                        <div class="{!if(isMobileView == true,'slds-grid slds-m-around_x-small mob-inside-view','slds-grid')}">
                                            <div class="slds-col brand-logo slds-p-top_medium slds-p-bottom_medium">
                                                <div>
                                                    <svg class="com-icon" xmlns="http://www.w3.org/2000/svg">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!$Resource.rr_community_icons}/com-phone.svg#com-phone"></use>
                                                    </svg>
                                                </div>
                                                <div>{!$Label.PP_Communication_Pref_Phone}</div>
                                                <div class="slds-m-top_medium">
                                                    <apex:inputCheckbox value="{!cpref.perListAllforCommPrefs.Permit_Voice_Text_contact_for_this_study__c}" id="phone" onchange="doStudyConsent(this)"
                                                        styleClass="checkboxcss " />
                                                </div>
                                            </div>
                                            <div class="slds-col brand-logo slds-p-top_medium slds-p-bottom_medium">
                                                <div>
                                                    <svg class="com-icon" xmlns="http://www.w3.org/2000/svg">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!$Resource.rr_community_icons}/com-email.svg#com-email"></use>
                                                    </svg>
                                                </div>
                                                <div>{!$Label.PP_Communication_Pref_Email}</div>
                                                <div class="slds-m-top_medium">
                                                    <apex:inputCheckbox value="{!cpref.perListAllforCommPrefs.Permit_Mail_Email_contact_for_this_study__c}" id="email" onchange="doStudyConsent(this)"
                                                        styleClass="checkboxcss " />
                                                </div>
                                            </div>
                                            <div class="slds-col brand-logo slds-p-top_medium slds-p-bottom_medium">
                                                <div>
                                                    <svg class="com-icon" xmlns="http://www.w3.org/2000/svg">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!$Resource.rr_community_icons}/com-sms.svg#com-sms"></use>
                                                    </svg>
                                                </div>
                                                <div>{!$Label.PP_Communication_Pref_SMS}</div>
                                                <div class="slds-m-top_medium">
                                                    <apex:inputCheckbox value="{!cpref.perListAllforCommPrefs.Permit_SMS_Text_for_this_study__c}" id="smscn" onchange="doStudyConsent(this)"
                                                        styleClass="checkboxcss " />
                                                </div>
                                            </div>
                                            <div class="slds-col brand-logo slds-p-top_medium slds-p-bottom_medium">
                                                <div>
                                                    <svg class="com-icon" xmlns="http://www.w3.org/2000/svg">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!$Resource.rr_community_icons}/com-dmail.svg#com-dmail"></use>
                                                    </svg>
                                                </div>
                                                <div>{!$Label.PP_Communication_Pref_Dmail}</div>
                                                <div class="slds-m-top_medium">
                                                    <apex:inputCheckbox value="{!cpref.perListAllforCommPrefs.Study_Direct_Mail_Consent__c}" id="dmail" onchange="doStudyConsent(this)"
                                                        styleClass="checkboxcss " />
                                                </div>
                                            </div>
                                            <div class="slds-col brand-logo slds-p-top_medium slds-p-bottom_medium" style="border-left: 1px solid #e3e3e3;">
                                                <div>
                                                    <svg class="com-icon" xmlns="http://www.w3.org/2000/svg">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!$Resource.rr_community_icons}/com-all.svg#com-all"></use>
                                                    </svg>
                                                </div>
                                                <div>{!$Label.PP_Communication_Pref_All}</div>
                                                <div class="slds-m-top_medium">
                                                    <apex:inputCheckbox value="{!cpref.studyCons}" onchange="doallStudyConsent(this)" id="study" html-data-id="{!per.Id}" styleClass="checkboxcss "
                                                    />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </apex:repeat>
                            <!-- Delegate -->
                            <apex:repeat value="{!cprDel}" var="cpref" id="perss">

                                <div class="{!if(isMobileView == true,'slds-grid slds-wrap mob-view','slds-grid slds-wrap slds-grid_vertical-align-center desk-view')}">
                                    <div class="slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12 study-paramters">
                                        <div class="slds-p-top--medium study-p-left">
                                            {!cpref.perListAllforCommPrefsDel.Participant_Enrollment__r.Clinical_Trial_Profile__r.Study_Code_Name__c}
                                        </div>

                                        <div class="study-p-left slds-p-top--medium slds-p-bottom--small">
                                            <a href="{!cpref.reDirTCDel}" target="_blank" style="text-decoration: none;">
                                                <span class="slds-p-right--medium txt-color">{!$Label.Footer_Link_Terms_Of_Use}</span>
                                            </a>
                                            <span class="study-vertical-bar"></span>
                                            <a href="{!cpref.reDirPPDel}" target="_blank" style="text-decoration: none;">
                                                <span class="slds-p-left--medium txt-color">{!$Label.Email_Footer_Privacy_Policy}</span>
                                            </a>
                                        </div>
                                    </div>
                                    <div class="{!if(isMobileView == true,'slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12','slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12')}">
                                        <div class="{!if(isMobileView == true,'slds-grid slds-m-around_x-small mob-inside-view','slds-grid')}">
                                            <div class="slds-col brand-logo slds-p-top_medium slds-p-bottom_medium">
                                                <div>
                                                    <svg class="com-icon" xmlns="http://www.w3.org/2000/svg">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!$Resource.rr_community_icons}/com-phone.svg#com-phone"></use>
                                                    </svg>
                                                </div>
                                                <div>{!$Label.PP_Communication_Pref_Phone}</div>
                                                <div class="slds-m-top_medium">
                                                    <apex:inputCheckbox value="{!cpref.perListAllforCommPrefsDel.Study_Phone_Consent__c }" id="phone" onchange="doStudyConsentDel(this)"
                                                        styleClass="checkboxcss " />
                                                </div>
                                            </div>
                                            <div class="slds-col brand-logo slds-p-top_medium slds-p-bottom_medium">
                                                <div>
                                                    <svg class="com-icon" xmlns="http://www.w3.org/2000/svg">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!$Resource.rr_community_icons}/com-email.svg#com-email"></use>
                                                    </svg>
                                                </div>
                                                <div>{!$Label.PP_Communication_Pref_Email}</div>
                                                <div class="slds-m-top_medium">
                                                    <apex:inputCheckbox value="{!cpref.perListAllforCommPrefsDel.Study_Email_Consent__c}" id="email" onchange="doStudyConsentDel(this)"
                                                        styleClass="checkboxcss " />
                                                </div>
                                            </div>
                                            <div class="slds-col brand-logo slds-p-top_medium slds-p-bottom_medium">
                                                <div>
                                                    <svg class="com-icon" xmlns="http://www.w3.org/2000/svg">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!$Resource.rr_community_icons}/com-sms.svg#com-sms"></use>
                                                    </svg>
                                                </div>
                                                <div>{!$Label.PP_Communication_Pref_SMS}</div>
                                                <div class="slds-m-top_medium">
                                                    <apex:inputCheckbox value="{!cpref.perListAllforCommPrefsDel.Study_SMS_Consent__c}" id="smscn" onchange="doStudyConsentDel(this)"
                                                        styleClass="checkboxcss " />
                                                </div>
                                            </div>
                                            <div class="slds-col brand-logo slds-p-top_medium slds-p-bottom_medium">
                                                <div>
                                                    <svg class="com-icon" xmlns="http://www.w3.org/2000/svg">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!$Resource.rr_community_icons}/com-dmail.svg#com-dmail"></use>
                                                    </svg>
                                                </div>
                                                <div>{!$Label.PP_Communication_Pref_Dmail}</div>
                                                <div class="slds-m-top_medium">
                                                    <apex:inputCheckbox value="{!cpref.perListAllforCommPrefsDel.Study_Direct_Mail_Consent__c}" id="dmail" onchange="doStudyConsentDel(this)"
                                                        styleClass="checkboxcss " />
                                                </div>
                                            </div>
                                            <div class="slds-col brand-logo slds-p-top_medium slds-p-bottom_medium" style="border-left: 1px solid #e3e3e3;">
                                                <div>
                                                    <svg class="com-icon" xmlns="http://www.w3.org/2000/svg">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!$Resource.rr_community_icons}/com-all.svg#com-all"></use>
                                                    </svg>
                                                </div>
                                                <div>{!$Label.PP_Communication_Pref_All}</div>
                                                <div class="slds-m-top_medium">
                                                    <apex:inputCheckbox value="{!cpref.studyConsDel}" onchange="doallStudyConsentDel(this)" id="study" styleClass="checkboxcss "
                                                    />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </apex:repeat>
                            <div class="timeZoneText" style="font-style:italic;margin-top:11px">{!$Label.PP_ConsentRequired}</div>

                            
                            <div class="timeZoneText " style="{!if(isIQVIAOutreachToggleOn ,'','display:none')}">

                                <div class="slds-grid slds-wrap" style="margin-top: 22px">
                                    <div class="ap-section-title" style="font-size: 20px">
                                        {!$Label.IQVIA_Outreach}
                                    </div>
                                </div>
                                <div style="max-width: 798px; margin-bottom: 1rem" class="MediumBText">
                                    <apex:outputPanel rendered="{!participant.Mailing_Country_Code__c == 'US'}">
                                        {!$Label.PP_Consent_IQVIA_US}
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!participant.Mailing_Country_Code__c != 'US'}">
                                        {!$Label.PP_Consent_IQVIA_ROW}
                                    </apex:outputPanel>
                                </div>

                                <div class="{!if(isMobileView == true,'slds-grid slds-wrap slds-grid_vertical-align-center mob-view','slds-grid slds-wrap slds-grid_vertical-align-center desk-view')}">
                                    <div class="slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12 study-paramters">
                                        <div class="study-p-left mob-mar-top">
                                            {!$Label.General_Communication}
                                        </div>
                                    </div>

                                    <div class="{!if(isMobileView == true,'slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12','slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12')}">
                                        <div class="{!if(isMobileView == true,'slds-grid slds-m-around_x-small mob-inside-view','slds-grid')}">
                                            <div class="slds-col brand-logo slds-p-top_medium slds-p-bottom_medium">
                                                <div>
                                                    <svg class="com-icon" xmlns="http://www.w3.org/2000/svg">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!$Resource.rr_community_icons}/com-phone.svg#com-phone"></use>
                                                    </svg>
                                                </div>
                                                <div>{!$Label.PP_Communication_Pref_Phone}</div>
                                                <div class="slds-m-top_medium">
                                                    <apex:inputCheckbox value="{!contact.Participant_Phone_Opt_In_Permit_Phone__c}" onchange="doAllConsent(this)" styleClass="checkboxcss phoneconsent verifyoutreachconst"
                                                    />
                                                </div>
                                            </div>
                                            <div class="slds-col brand-logo slds-p-top_medium slds-p-bottom_medium">
                                                <div>
                                                    <svg class="com-icon" xmlns="http://www.w3.org/2000/svg">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!$Resource.rr_community_icons}/com-email.svg#com-email"></use>
                                                    </svg>
                                                </div>
                                                <div>{!$Label.PP_Communication_Pref_Email}</div>
                                                <div class="slds-m-top_medium">
                                                    <apex:inputCheckbox value="{!contact.Participant_Opt_In_Status_Emails__c}" onchange="doAllConsent(this)" styleClass="checkboxcss emailconsent verifyoutreachconst"
                                                    />
                                                </div>
                                            </div>
                                            <div class="slds-col brand-logo slds-p-top_medium slds-p-bottom_medium">
                                                <div>
                                                    <svg class="com-icon" xmlns="http://www.w3.org/2000/svg">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!$Resource.rr_community_icons}/com-sms.svg#com-sms"></use>
                                                    </svg>
                                                </div>
                                                <div>{!$Label.PP_Communication_Pref_SMS}</div>
                                                <div class="slds-m-top_medium">
                                                    <apex:inputCheckbox value="{!contact.Participant_Opt_In_Status_SMS__c}" onchange="doAllConsent(this)" styleClass="checkboxcss smsconsent verifyoutreachconst"
                                                    />
                                                </div>
                                            </div>
                                            <div class="slds-col brand-logo slds-p-top_medium slds-p-bottom_medium">
                                                <div>
                                                    <svg class="com-icon" xmlns="http://www.w3.org/2000/svg">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!$Resource.rr_community_icons}/com-dmail.svg#com-dmail"></use>
                                                    </svg>
                                                </div>
                                                <div>{!$Label.PP_Communication_Pref_Dmail}</div>
                                                <div class="slds-m-top_medium">
                                                    <apex:inputCheckbox value="{!contact.IQVIA_Direct_Mail_Consent__c}" onchange="doAllConsent(this)" id="outreachdmID" styleClass="checkboxcss directmailconsent verifyoutreachconst"
                                                    />
                                                </div>
                                            </div>
                                            <div class="slds-col brand-logo slds-p-top_medium slds-p-bottom_medium" style="border-left: 1px solid #e3e3e3;">
                                                <div>
                                                    <svg class="com-icon" xmlns="http://www.w3.org/2000/svg">
                                                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!$Resource.rr_community_icons}/com-all.svg#com-all"></use>
                                                    </svg>
                                                </div>
                                                <div>{!$Label.PP_Communication_Pref_All}</div>
                                                <div class="slds-m-top_medium">
                                                    <apex:inputCheckbox value="{!outreachSelection}" onchange="doOutreach(this)" id="outreachID" styleClass="checkboxcss outreachall"
                                                    />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="timeZoneText" style="font-style:italic;margin-top:11px">{!$Label.PP_ConsentRequired}</div>
                            </div>

                            <div class="cp-save-btn-container">
                                <!--<button class="slds-button slds-button_brand changepwdbtn " action="{!checkPasswords} ">Save Continue</button> -->
                                <apex:commandButton action="{!ppChangePassword}" value="{!$Label.PP_SaveContinue}" styleClass="slds-button slds-button_brand changepwdbtn "
                                    disabled="{!isSaveButtonDisabled}" id="saveButton" />
                            </div>
                        </apex:form>
                        <apex:form >
                            <c:PPCookiesBanner id="cookies_banner_form" communityName="{!if(isDelegate,if(pde.Participant_Enrollment__r.Clinical_Trial_Profile__r.CommunityTemplate__c == 'Janssen' && templateName == 'PatientPortal' ,'Janssen Community','null'),if(per.Clinical_Trial_Profile__r.CommunityTemplate__c == 'Janssen' && templateName == 'PatientPortal' ,'Janssen Community','null'))}"
                            />
                        </apex:form>
                    </div>
                </div>
            </div>
        </div>
        <div class="slds-col">
            <footer class="{!if(isMobileView == true,'footerdownMobile','footerdown')}" style="">
                <div class="{!if(isCPRAAvailable == true,'cpralinkcss',' ')}">
                    <apex:outputLink rendered="{!isCPRAAvailable == true}" value="{!CPRALink}" target="_blank" title="{!$Label[CPRAlabel]}">
                        {!$Label[CPRAlabel]}
                        <img src="{!$Resource.CCPA_icon}" class="imgclass" />
                    </apex:outputLink>
                </div>

                <span class="{!if(isMobileView == true,'slds-align--absolute-center copyrightMobile','slds-align_absolute-right')}">{!$Label.PP_Privacypolicy}</span>
            </footer>
        </div>
    </apex:outputPanel>
</apex:page>