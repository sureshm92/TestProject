<template>
    <!-- Loading Spinner-->
    <c-web-spinner fixed="true"></c-web-spinner>
    <lightning-card>
        <div>
            <div class="location-title">{label.location}</div>
            <div class="address-section-outer">
                <div class="address-section">
                    <div class="address-marker">
                        <c-web-icon
                            class="svg-icon"
                            icon-size="medium"
                            icon-name="location_pin"
                            data-id="locationpin"
                            icon-color="#00A3E0"
                        >
                        </c-web-icon>
                    </div>
                    <div class="site-name"><b>{sitename}</b></div>
                </div>
                <div class="site-address slds-truncate" title={siteaddress}>{siteaddress}</div>
                <div class="site-phone">{sitephone}</div>
            </div>
            <div>
                <c-pp-date-time-combo
                    data-id="visitDateTime"
                    if:false={past}
                    reminder={booleanFalse}
                    compdate={compDate}
                    comptime={compTime}
                    mindate={currentDate}
                    mintime={currentTime}
                    ondatechange={handleDate}
                    ontimechange={handleTime}
                    onnulldatetime={handleNullDateTime}
                    oninitialdateload={handleInitialDateLoad}
                    oninitialtimeload={handleInitialTimeLoad}
                    ondate={handleOnlyDate}
                    ontime={handleOnlyTime}
                ></c-pp-date-time-combo>
                <div if:true={past} class="slds-grid slds-wrap">
                    <div class="slds-col slds-size_1-of-1 slds-large-size_6-of-12 slds-p-left_none">
                        {label.date}
                        <div class="curve-input">
                            <c-web-icon
                                class="svg-icon"
                                icon-size="medium"
                                icon-name="calendar"
                                data-id="date"
                                icon-color="#00A3E0"
                            >
                            </c-web-icon>
                            <input disabled type="date" id="disableddate" value={dbCompletedDate} />
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <div class="slds-grid slds-wrap">
                    <div class="slds-size_1-of-1 slds-small-size_1-of-1 slds-p-left_none">
                        <div if:false={past}>
                            <label>{label.reminder}</label>
                            <div class="curve-input">
                                <c-web-icon
                                    class="svg-icon"
                                    icon-size="small"
                                    icon-name="reminderbell_icon"
                                    data-id="reminderbell"
                                    icon-color="#00A3E0"
                                >
                                </c-web-icon>
                                <c-pp-web-select
                                    class="full-width"
                                    label-hidden="true"
                                    place-holder={label.selectreminder}
                                    selected-value={dbReminderOption}
                                    options={reminderOptions}
                                    custom-class="custom-no-border"
                                    is-disabled-options="true"
                                    is-disabled={showReminders}
                                    onchangevalue={doValidateFields}
                                ></c-pp-web-select>
                            </div>
                        </div>
                    </div>
                    <div
                        if:false={past}
                        class="slds-col slds-size_3-of-4 slds-small-size_3-of-4 slds-p-around_none comm-checks"
                    >
                        <div if:true={showEmailSms}>
                            <lightning-input
                                data:id="emailField"
                                label={label.email}
                                type="checkbox"
                                name={label.email}
                                value={email}
                                disabled={emailOptIn}
                                checked={email}
                                onchange={setAttributeValueEmail}
                            ></lightning-input>
                            <lightning-input
                                data:id="smsField"
                                type="checkbox"
                                label={label.sms}
                                name={label.sms}
                                value={sms}
                                disabled={smsOptIn}
                                checked={sms}
                                onchange={setAttributeValueSms}
                            ></lightning-input>
                        </div>
                    </div>
                </div>
                <div class="slds-col slds-size_1-of-1 slds-p-top_xx-smal acc-pref" if:false={past}>
                    <div if:true={showEmailSms}>
                        <a class="comm-link" href={url} target="_blank">
                            <span>{label.PREFERENCES}</span>
                        </a>
                    </div>
                </div>
                <div if:false={past}>
                    <c-pp-date-time-combo
                        if:true={showreminderdatepicker}
                        data-id="reminderDateTime"
                        compdate={dbreminderdate}
                        comptime={dbremindertime}
                        reminder={booleanTrue}
                        mindate={currentDate}
                        maxdate={visitDate}
                        mintime={minReminderTime}
                        maxtime={maxReminderTime}
                        ondatechange={handleReminderDate}
                        ontimechange={handleReminderTime}
                        oninitialdateload={handleInitialReminderDateLoad}
                        oninitialtimeload={handleInitialReminderTimeLoad}
                        onnulldatetime={handleNullDateTimeReminder}
                        ondate={handleOnlyDateReminder}
                        ontime={handleOnlyTimeReminder}
                    ></c-pp-date-time-combo>
                </div>
                &nbsp; &nbsp; &nbsp;
            </div>
            <div if:false={past} class="slds-size_1-of-1 btn-footer">
                <button
                    class="secondaryBtn slds-button"
                    disabled={disableDiscard}
                    type="button"
                    onclick={doCancel}
                >
                    {label.discard}
                </button>
                <button
                    class="primaryBtn slds-button"
                    disabled={disableButtonSaveCancel}
                    type="button"
                    onclick={doSave}
                >
                    {label.saveChanges}
                </button>
            </div>
        </div>
    </lightning-card>
</template>