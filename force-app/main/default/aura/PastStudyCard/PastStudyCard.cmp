<aura:component description="PastStudyCard">

    <!-- attributes: -->
    <aura:attribute name="ctp" type="Clinical_Trial_Profile__c"/>
    <aura:attribute name="pe" type="Participant_Enrollment__c"/>
    <aura:attribute name="resources" type="ResourceService.ResourceWrapper[]"/>

    <!-- component body: -->
    <div class="rr-white-panel padding">
        <div class="slds-grid slds-wrap slds-gutters">
            <div class="slds-col slds-size--1-of-1 slds-large-size_1-of-2">
                <aura:if isTrue="{!!empty(v.ctp.Profile_Picture__c)}">
                    <img src="{!v.ctp.Profile_Picture__c}"/>
                </aura:if>
                <div class="study-title">{!v.ctp.Study_Code_Name__c} ({!v.ctp.Therapeutic_Area__r.Name})</div>
                <div class="study-description">{!v.ctp.Detailed_Description__c}</div>

                <div class="rr-fields-cutter">
                    <div class="rr-fields-container">
                        <div class="rr-output-field">
                            <div class="label slds-text-title_caps">INVESTIGATOR NAME</div>
                            <div class="value">{!v.pe.Study_Site__r.Principal_Investigator__r.Name}</div>
                        </div>
                        <div class="rr-output-field">
                            <div class="label slds-text-title_caps">ENROLLMENT DATE</div>
                            <div class="value">
                                <div class="rp-max-length">
                                    <ui:outputDate format="MM-dd-yyyy" value="{!v.pe.Enrolled_Date__c}" />
                                </div>
                            </div>
                        </div>
                        <div class="rr-output-field">
                            <div class="label slds-text-title_caps">SITE LOCATION</div>
                            <div class="value ">
                                <div class="rp-max-length">{!v.pe.Study_Site__r.Site__r.Name}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slds-col slds-size--1-of-1 slds-large-size_1-of-2 db-charts">
                <aura:iteration items="{!v.resources}" var="resourceWrapper">
                    <div class="resource-item">
                        <c:ResourceLink resourceWrapper="{!resourceWrapper}"/>
                    </div>
                </aura:iteration>
            </div>
        </div>
    </div>

</aura:component>