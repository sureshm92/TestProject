<template>
    <div class="slds-p-around_medium">
        <div class="slds-grid slds-wrap">
            <div class="slds-col slds-size_1-of-2 slds-p-around_xx-small">
                <div><b>Previous Call Dispositions</b></div><br>
                <template if:true={isRecordExists}>
                    <div>
                        <template iterator:it={records}>
                            <div key={it.value.cd.Id} data-value={it.index} onclick={handleClick}>
                                <c-call-dispositions-details key={it.value.cd.Id} items={it.value}
                                    item-id={it.value.cd.Id} call-date={it.value.dtcd}
                                    call-category={it.value.cd.Call_Category__c} index={it.index} selected={selected}>
                                </c-call-dispositions-details>
                            </div>
                            <div if:false={it.last} key={it.value.Id}>
                                <hr key={it.value.Id} style="margin:5px" />
                            </div>
                        </template>
                        <!--<br>-->
                    </div>
                    <template if:true={showViewMore}>
                        <lightning-button variant="base" label="View More" title="Looks like a link" onclick={ViewMore}
                            class="" style="font-size: 14px;"></lightning-button>
                    </template>
                </template>
                <template if:false={isRecordExists}>
                    <p style="font-size:14px;">No records to display</p>
                </template>
            </div>

            <div class="slds-col slds-size_1-of-2 slds-p-around_xx-small">

                <template if:false={ViewMode}>
                    <b>New Call - {month} {day}, {year} </b>
                </template>
                <template if:true={ViewMode}>
                    <b>{Oldcalldate} </b>
                </template>
                <div class="slds-grid slds-wrap ">
                    <div class="slds-col slds-size_1-of-2">

                        <div class="slds-p-around_xx-small">
                            <template if:false={ViewMode}>
                                <lightning-combobox  data-id="callcategory" name="progress" label="Call Category" value=""
                                    placeholder="Select Call Catagory" options={callcategorys}
                                    onchange={handlecallcategory} required>
                                </lightning-combobox>
                            </template>
                            <template if:true={ViewMode}>
                                <lightning-combobox name="progress" label="Call Category" value={Oldcallcategory}
                                    placeholder="Select Call Catagory" options={callcategorys} onchange={handleChange}
                                    required disabled>
                                </lightning-combobox>
                            </template>
                            <template if:false={ViewMode}>
                                <lightning-input type="text" label="Caller" placeholder={conName} disabled>
                                </lightning-input>
                            </template>
                            <template if:true={ViewMode}>
                                <lightning-input type="text" label="Caller" placeholder={Oldcaller} disabled>
                                </lightning-input>
                            </template>
                        </div>
                    </div>
                    <div class="slds-col slds-size_1-of-2">
                        <div class="slds-p-around_xx-small">
                            <template if:false={ViewMode}>
                                <lightning-combobox data-id="callbound" name="progress" label="Inbound / Outbound" value={defcallbound}
                                    placeholder="" options={callboundoptions} onchange={handlecallbound} required>
                                </lightning-combobox>
                            </template>
                            <template if:true={ViewMode}>
                                <lightning-combobox name="progress" label="Inbound / Outbound" value={Oldcallbound}
                                    placeholder="" options={callboundoptions} required disabled>
                                </lightning-combobox>
                            </template>
                            <br>
                            <template if:false={ViewMode}>
                                <lightning-input type="checkbox" label="IQVIA intervention required"
                                    onchange={onCheckboxChange}>
                                </lightning-input>
                            </template>
                            <template if:true={ViewMode}>
                                <template if:true={Oldcallintervention}>
                                    <lightning-input type="checkbox" checked label="IQVIA intervention required"
                                        disabled></lightning-input>
                                </template>
                                <template if:false={Oldcallintervention}>
                                    <lightning-input type="checkbox" label="IQVIA intervention required" disabled>
                                    </lightning-input>
                                </template>
                            </template>
                        </div>
                    </div>
                </div>
                <template if:false={ViewMode}>
                    <template if:true={InterventionRequired}>
                        <lightning-textarea name="notes" label="Notes" placeholder="Type in your notes..."
                            value={newcallnotes} maxlength="500" onchange={handlenotes} required>
                        </lightning-textarea>
                    </template>
                    <template if:false={InterventionRequired}>
                        <lightning-textarea name="notes" label="Notes" placeholder="Type in your notes..."
                            value={newcallnotes} maxlength="500" onchange={handlenotes}>
                        </lightning-textarea>
                    </template>
                </template>
                <template if:true={ViewMode}>
                    <lightning-textarea name="notes" value={Oldcallnotes} label="Notes"
                        placeholder="Type in your notes..." disabled>
                    </lightning-textarea>
                </template>
            </div>
        </div>
    </div>
</template>