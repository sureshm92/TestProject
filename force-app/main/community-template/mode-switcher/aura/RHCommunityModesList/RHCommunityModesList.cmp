<!--
 - Created by Andrii Kryvolap.
 -->

<aura:component description="RHCommunityModesList">

    <!-- attributes: -->
    <aura:attribute name="communityModesList" type="List"/>

    <!-- events: -->
    <aura:registerEvent access="global" name="onclick" type="c:uiEvent"/>

    <ul class="main-container">
        <aura:iteration items="{!v.communityModesList}" var="modeGroup">
            <c:uiMenuItem onclick="{!c.doOnclick}" itemValue="{!modeGroup}">
                <div class="main-box">
                    <aura:if isTrue="{!modeGroup.isCollapsed}">
                        <div class="{!'icon-box ' + if(modeGroup.isGroup, 'icon-unset ','')}">
                            <c:RRIcon iconName="icon-chevron-right"
                                      class="{!'mode-icon ' + if(modeGroup.isSelected,'selected ','')}"/>
                        </div>
                        <aura:set attribute="else">
                            <div class="{!'icon-box ' + if(modeGroup.isGroup, 'icon-unset ','')}">
                                <c:RRIcon iconName="icon-chevron-down"
                                          class="{!'mode-icon ' + if(modeGroup.isSelected,'selected ','')}"/>
                            </div>
                        </aura:set>
                    </aura:if>
                    <div data-group-id="{!modeGroup.itemType}"
                         class="{!'mode-group ' + if(modeGroup.isSelected, 'selected', '')}"
                         onclick="{!c.doToggleGroup}">
                        {!modeGroup.title}
                        <aura:if isTrue="{!and(!modeGroup.isGroup, modeGroup.isSelected)}">
                            <c:RRIcon iconName="icon-check" class="icon-check"/>
                        </aura:if>
                    </div>
                </div>
                <aura:if isTrue="{!!modeGroup.isCollapsed}">
                    <ul>
                        <aura:iteration items="{!modeGroup.subItems}" var="subItem">
                            <c:uiMenuItem onclick="{!c.doOnclick}" itemValue="{!subItem}">
                                <div data-group-id="{!subItem.itemType}" data-delegate-id="{!subItem.itemId}"
                                     class="{!'mode-sub-item ' + if(subItem.isSelected,'selected','')}">
                                    {!subItem.title}
                                    <aura:if isTrue="{!subItem.isSelected}">
                                        <c:RRIcon iconName="icon-check" class="icon-check"/>
                                    </aura:if>
                                </div>
                            </c:uiMenuItem>
                        </aura:iteration>
                    </ul>
                </aura:if>
            </c:uiMenuItem>
        </aura:iteration>
    </ul>
</aura:component>
