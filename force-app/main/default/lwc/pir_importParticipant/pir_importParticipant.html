<template>
     <!--  Import Participants Model Start  -->  
     <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
     aria-describedby="modal-content-id-1" class="slds-modal slds-modal_small slds-align--absolute-center slds-fade-in-open">
     <div class="slds-modal_small">
        <div class="slds-modal__container model-small">
           <div class="slds-modal__content" >
              <div class="bar"></div>
              <div class="slds-p-around_large"><!-- Add RTL class here -->
                 <div class="slds-grid slds-gutters close-arrow-left slds-m-bottom_x-small">
                    <div class="slds-col slds-large-size_11-of-12 slds-medium-size_11-of-12 slds-size_10-of-12">
                       <span class="pop-title">{label.SS_Upload_Participants}</span> 
                    </div>
                    <div class="slds-col slds-size_1-of-12 close-icon">
                       <div onclick={handleImportParticipantclose}>
                          <lightning-icon icon-name="utility:close"
                             alternative-text={label.BTN_Close} title={label.BTN_Close}
                             size="x-small" ></lightning-icon>
                          <span class="slds-assistive-text">{label.BTN_Close}</span>
                       </div>
                    </div>
                 </div>
                 <slot name="bolkimport">
                    <div data-id="mainDivscroll" class="slds-grid slds-wrap slds-gutters importParticipants_popup bulkImportScroll">
                     <template if:true={isDataLoading}>
                        <div class="vertical-scroll">
                          <lightning-spinner alternative-text="Loading..." variant="brand">
                          </lightning-spinner>
                        </div>
                      </template>
                      <div class="slds-grid slds-wrap">
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12 slds-m-bottom_small dropdown_truncate dropdown-fonts_bulk">
                           <lightning-combobox
                           name={label.RH_StudyName_Import}
                           label={label.RH_StudyName_Import}
                           value={selectedStudy}
                           placeholder="Study Name"
                           options={studylist}
                           onchange={studyhandleChange}
                           disabled={isMyStudies}
                           ></lightning-combobox>
                        </div>
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12 slds-m-bottom_small dropdown-fonts_bulk">
                           <lightning-combobox
                               name={label.RH_StudySite_Import}
                               label={label.RH_StudySite_Import}
                               value={selectedSite}
                               placeholder={siteLabel}
                               options={studySiteList}
                               onchange={studysitehandleChange}
                               disabled={studysiteaccess}
                               ></lightning-combobox>
                        </div>
                      
                     
                       <div class="slds-col slds-size_1-of-1 slds-medium-size_12-of-12 slds-large-size_12-of-12">
                          <div class="slds-form-element modalBody">
                             <div class="slds-p-bottom_xxx-small slds-p-top_xxx-small">
                                <div class="slds-grid slds-wrap slds-gutters slds-m-bottom_small">
                                   <div class="slds-col slds-size_1-of-1 slds-medium-size_5-of-12 slds-large-size_4-of-12 ">
                                      <div class="fileUpload">{label.RH_UploadFile_Import}<span class="slds-text-color_error">*</span></div>
                                   </div>
                                   <div class="slds-col slds-size_1-of-1 slds-medium-size_7-of-12 slds-large-size_8-of-12">
                                      <div class="slds-grid slds-wrap slds-gutters">
                                         <div class="slds-col slds-size_1-of-1 w-instruction">
                                          <a href={ParticipantBulkImportInstructions} title={label.PIR_Download}>
                                            <div class="downloadLabel">{label.BulkImport_Instructions} 
                                               <img class="p-left-icon" src="/resource/1654599036000/bulkicons/Download.svg"/>
                                            </div>
                                          </a>
                                         </div>
                                         <div class="slds-col slds-size_1-of-2 w-template">
                                          <a href={downloadTemplate} title={label.PIR_Download}>
                                            <div class="downloadLabel">{label.FU_Download_Template}  
                                               <img class="p-left-icon" src="/resource/1654599036000/bulkicons/Download.svg"/>
                                            </div>
                                          </a>
                                         </div>
                                         <div class="slds-col slds-size_1-of-2 w-langauge">
                                          <a href="javascript:void(0)"  onclick={generateISOLanguage} title={label.PIR_Download}>
                                            <div class="downloadLabel labelRightMob">{label.ISO_Download_Template}
                                               <img class="p-left-icon" src="/resource/1654599036000/bulkicons/Download.svg"/>
                                            </div>
                                          </a>
                                         </div>
                                      </div>
                                      <!-- slds-grid slds-wrap -->  
                                   </div>
                                </div>
                                <!-- slds-grid slds-wrap -->                 
                                <div class="fileHolder" data-id="browsediv">
                                   <input onchange={handleFilesChange_new} type="file" class="fileInput"></input>
                                   <div class="fileBox slds-grid slds-wrap">
                                      <div class="slds-col slds-size_2-of-12 slds-medium-size_12-of-12 slds-large-size_12-of-12">
                                         <div class="slds-size_full slds-align_absolute-center slds-text-align_center slds-p-top--small marTopIcon">
                                            <lightning-icon icon-name="utility:upload" size="small" alternative-text={label.RH_Upload_import} title={label.RH_Upload_import}></lightning-icon>
                                         </div>
                                      </div>    
                                      <div class="slds-col slds-size_10-of-12 slds-medium-size_12-of-12 slds-large-size_12-of-12">
                                         <div class="slds-size_full slds-text-align_center slds-text_center uploadLabel marTop">  
                                            {label.BulkImport_Drag_file_here_or} <span class="linkLabel slds-p-left_xx-small">{label.BulkImport_browse}</span> 
                                         </div>
                                         <div class="slds-size_full slds-text-align_center slds-text_center uploadLabel slds-p-bottom--small uploadLabel-Italic">  
                                            <strong>{label.RH_WaitTime_Import}</strong> 
                                         </div>
                                      </div>
                                   </div>
                                </div>
                                <!-- fileHolder -->  
                                
                                <div>
                                   <template if:true={fileName}>
                                      <div class="fileName">{fileName} </div>
                                      <div class="slds-align--absolute-center">
                                         <div class="progressBar">
                                            <div aria-valuemin="0" aria-valuemax="100" aria-valuenow={progress} aria-busy="true" role="progressbar" class="slds-progress-bar slds-progress-bar_large slds-progress-bar_circular">
                                               <span class="slds-progress-bar__value" style={progressWidth}></span>
                                            </div>
                                         </div>
                                         <div class="closeIcon">
                                            <template if:true={enableDel}>
                                               <span  onclick={deleteFiles}>
                                                  <lightning-icon icon-name="utility:close" alternative-text={label.pir_Delete_Btn} title={label.pir_Delete_Btn} size="xx-small"></lightning-icon>
                                               </span>
                                            </template>
                                         </div>
                                      </div>
                                      <div>
                                         <span class="fileName">{fileRemaining}</span>
                                         <span class="fileName slds-float--right">{progress}%</span>
                                      </div>
                                   </template>
                                </div>
                             </div><!-- slds-p-bottom_xxx-small -->
                          </div><!-- slds-form-element modalBody -->
                       </div><!-- slds-col slds-size_1-of-1 -->
                       <div class="slds-col slds-size_1-of-1 slds-medium-size_12-of-12 slds-large-size_12-of-12 importInputPopup">
                           <div class="display-checkbox country-margin">
                           <lightning-input type="checkbox" data-name="countrycheck" class="checkbox_mtop"  varient="label-hidden" checked={isCountryCheck}  disabled={countryDisable} onchange={handleCountryChange} 
                           name="country"></lightning-input>
                           <span class="checkbox_width"><label class="country-checkbox" >{label.RH_CountryConstent}</label>
                           <span class="slds-text-color_error fileUpload">*</span>
                           </span>
                        </div> 
                     </div>
                       <div class="slds-col slds-size_1-of-1 slds-medium-size_12-of-12 slds-large-size_12-of-12 slds-m-bottom_xx-small">
                          <div class="fileUpload">
                             {label.PG_AP_F_Patient_Status_Select}
                          </div>
                       </div>
                       <div class="slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12 slds-m-top slds-m-bottom_small importInputPopup dropdown-fonts_bulk">
                              <div class="slds-form-element">
                                 <label class="slds-form-element__label" for="select-01">
                                    {label.Participant_Status} <abbr class="slds-required" title="required">* </abbr></label>
                                 <div class="slds-form-element__control">
                                    <div class="dropdown-margin-top slds-unselectdropdown">
                                       <lightning-combobox
                                         data-name="selectStatus" 
                                          name={label.Participant_Status}
                                          varient="label-hidden"
                                          value={selectedStatus}
                                          placeholder={label.PG_AC_Select}
                                          options={importParticipantStatus}
                                          onchange={particiapntStatushandleChange}
                                          read-only ={shouldDisableImportStatus}
                                          ></lightning-combobox>
                                    </div>
                                 </div>
                                 </div>
                       </div>

                       <template if:true={visitPlanAvailable}>
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12 slds-m-top slds-m-bottom_small importInputPopup dropdown-fonts_bulk ">
                          
                          <lightning-combobox
                          name={label.RH_Arm_Cohert_Import}
                          label={label.RH_Arm_Cohert_Import}
                          value={selectedvisitPlanId}
                          placeholder={label.PG_AC_Select}
                          options={visitPlansLVList} 
                          disabled ={visitPlanDisabled}
                          onchange={handleVisitPlan}
                          required ={visitPlanRequired}
                          ></lightning-combobox>

                        </div>

                       </template>

                       <template if:false={shouldDisableImportStatus}>
                          <div class="slds-col slds-size_1-of-1 slds-medium-size_12-of-12 slds-large-size_12-of-12 importInputPopup">
                          <c-consent-manager call-source="importParticipant"  onconsentchange={handleConsentChange} study-site-id={selectedSite}
                          iqviaconst-imp={iqviaconsent}> </c-consent-manager>
                          </div>
                       </template>
                       <template if:false={shouldDisableImportStatus}>
                        <template if:false={isPatientPortalDisable}>
                       <template if:true={isSuppressed}>
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_12-of-12 slds-large-size_12-of-12 slds-m-top_small slds-m-bottom_small">
                           <div class="fileUpload">
                             {label.PG_Ref_L_Invitation_To_PP}
                           </div>
                        </div>
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_12-of-12 slds-large-size_12-of-12 slds-m-bottom_small importInputPopup">
                           <lightning-input type="checkbox" disabled label={label.PG_Ref_L_Permit_IQVIA_To_Invite_Patient_For_PatienPortal} name="inviteToPP"></lightning-input>
                        </div>
                       </template>
                       <template if:false={isSuppressed}>
                          <template if:true={isStudyPPEnabled}>
                           <div class="slds-col slds-size_1-of-1 slds-medium-size_12-of-12 slds-large-size_12-of-12 slds-m-top_small slds-m-bottom_small">
                           <div class="fileUpload">
                              {label.PG_Ref_L_Invitation_To_PP}
                           </div>
                        </div>
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_12-of-12 slds-large-size_12-of-12 slds-m-bottom_small importInputPopup">
                          <template if:true={doContact}>
                           <div class="display-checkbox">
                           <lightning-input type="checkbox" data-name="ppcheck" disabled={disablePatientInvite} varient="label-hidden"   onchange={handleppinvite} 
                           name="inviteToPP"></lightning-input>
                           <span class="checkbox_width"><label class="" >{label.PG_Ref_L_Permit_IQVIA_To_Invite_Patient_For_PatienPortal}</label></span>
                           </div>
                        </template>
                        <template if:false={doContact}>
                           <div class="display-checkbox">
                           <lightning-input type="checkbox" disabled={disablePatientInvite}
                           ></lightning-input>
                           <span class="checkbox_width"><label class="" >{label.PG_Ref_L_Permit_IQVIA_To_Invite_Patient_For_PatienPortal}</label></span>
                           </div>
                        </template>
                        </div> 
                        
                       
                          </template> 
                       </template>
                     </template>
                  </template>
                    </div>
                    </div><!-- slds-grid slds-wrap slds-gutters -->
                    <div class="slds-grid slds-wrap slds-m-top_small">
                       <div class="slds-col slds-size_1-of-1 slds-medium-size_12-of-12 slds-large-size_12-of-12">
                          <div class="slds-float_right mobile-width">                  
                             <button title={label.BTN_Import} class="slds-button apollo-btn primary btn-height import-btn" disabled={shouldDisableImport} onclick={doImportParticipant} >{label.BTN_Import} </button>
                             <button title={label.BTN_Cancel} class="slds-button apollo-btn secondary btn-height discard-btn" onclick={handleImportParticipantclose}> {label.BTN_Cancel}</button> 
                          </div> 
                       </div>
                    </div><!-- slds-grid slds-wrap slds-gutters -->
                    
                 </slot><!-- slot -->
              </div>
           </div>
        </div>
     </div>
  </section>
  <div class="slds-backdrop slds-backdrop_open"></div>
  <!--  Import Participants Model End --> 
</template>