<!--
 - Created by Olga Skrynnikova on 6/10/2020.
 -->

<aura:component description="PPMenuItems">
    <aura:attribute name="allModes" type="Object[]"/>
    <aura:attribute name="currentMode" type="Object"/>

    <aura:registerEvent access="global" name="onclick" type="c:uiEvent"/>

    <div class="mega-container">
    <aura:iteration var="item" items="{!v.allModes}">
        <aura:if isTrue="{!or(item.isGroup, item.participantState == 'ALUMNI')}">
            <div class="contain" style="">
                <aura:if isTrue="{!not(empty(item.subModes))}">
                    <aura:iteration items="{!item.subModes}" var="subItem">
                        <c:uiMenuItem label="{!item.label}" onclick="{!c.doSelectItem}"
                                      itemValue="{!item}"
                                      closeAfterClick="{!and(!item.isGroup, !item.isSplitter)}"
                                      class="unset">
                            <div class="main-box">
                                <div class="menu-item">
                                    <div class="{! v.currentMode.key == subItem.key ? 'selected ' : ''}">
                                        {!item.label}
                                        <aura:if isTrue="{!v.currentMode.key == subItem.key}">
                                            <c:RRIcon class="icon-check" color="#0768FD" iconName="icon-chevron-down"/>
                                        </aura:if>
                                    </div>
                                    <div class="cog">
                                        <c:RRIcon class="icon-del" iconName="delegate"/>
                                        <c:RRIcon class="icon-cog" iconName="cog"/>
                                    </div>
                                </div>
                                <div class="menu-sub-item">
                                    <div class="{!v.currentMode.key == subItem.key ? 'selected ' : '' + 'overflow-ellipsis '}">{!subItem.label}</div>
                                </div>
                            </div>
                        </c:uiMenuItem>
                    </aura:iteration>
                    <aura:set attribute="else">
                        <c:uiMenuItem onclick="{!c.doOnClick}" itemValue="{!item}" class="unset"
                                      closeAfterClick="{!and(!item.isGroup, !item.isSplitter)}">
                        <div class="main-box">
                            <div class="menu-item">
                                <div class="{!v.currentMode.Label == item.Label ? 'selected ' : ''}">
                                    {!item.label}
                                    <aura:if isTrue="{!v.currentMode.Label == item.Label}">
                                        <c:RRIcon class="icon-check" color="#0768FD" iconName="icon-chevron-down"/>
                                    </aura:if>
                                </div>
                            </div>
                            <div class="cog">
                                <c:RRIcon class="icon-del" iconName="delegate"/>
                                <c:RRIcon class="icon-cog" iconName="cog"/>
                            </div>
                            <div class="menu-sub-item">
                                <div class="{!v.currentMode.Label == item.Label ? 'selected ' : '' + 'overflow-ellipsis '}">{!$Label.c.BTN_No_Active_Studies}</div>
                            </div>
                        </div>
                        </c:uiMenuItem>
                    </aura:set>
                </aura:if>
            </div>
        </aura:if>
    </aura:iteration>
    </div>

</aura:component>
