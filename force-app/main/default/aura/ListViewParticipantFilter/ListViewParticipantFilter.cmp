<aura:component
                implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:availableForAllPageTypes,force:lightningQuickAction"
                access="global"
                controller="ListViewParticipantController"
                extends="c:CommunityContext"
                >
    <!-- <aura:handler name="init" value="{!this}" action="{!c.doInit}"/> -->
    <ltng:require
                  scripts="{!join(',', $Resource.rr_community_js)}"
                  afterScriptsLoaded="{!c.doInit}"
                  />
    <aura:attribute name="peFilterData" type="Object" />
    <aura:attribute name="filterList" type="List" />
    <aura:attribute name="oldfilterList" type="List" />
    <aura:attribute name="showspinner" type="Boolean" default="false" />
    <aura:attribute name="PageNumber" type="integer" default="1" />
    <aura:attribute name="TotalPages" type="integer" default="0" />
    <aura:attribute name="TotalRecords" type="integer" default="0" />
    <aura:attribute name="RecordStart" type="integer" default="0" />
    <aura:attribute name="RecordEnd" type="integer" default="0" />
    <aura:attribute name="pageSize" type="Integer" default="5" />
    <aura:attribute name="SelectedIds" type="list" />
    <aura:attribute name="DeSelectedIds" type="list" />
    <aura:attribute name="SelectedRecord" type="list" />
    <aura:attribute name="PaginationList" type="list" />
    <aura:attribute name="count" type="integer" default="0" />
    <aura:attribute name="SelectAll" type="Boolean" default="false" />
    <aura:attribute name="PromoteToSH" type="Boolean" default="false" />
    <aura:attribute name="enablePromoteToSH" type="Boolean" default="true" />
    <aura:attribute name="SortBydefault" type="string" default="Received Date(Oldest First)" />
    <aura:attribute name="lstPR_yes" type="list" />
    <aura:attribute name="lstPR_no" type="list" />
    <aura:attribute name="psIfActive" type="list" />
    <aura:attribute name="spinner" type="boolean" default="FALSE" />
    <aura:attribute name="optionEthnicity" type="List" />
    <aura:attribute name="isFromDoinit" type="boolean" default="FALSE" />
    <aura:attribute name="isSSListUpdated" type="boolean" default="false" />
    <aura:attribute name="isInitVisitReqd" type="Boolean" default="false"/>        
    
    <aura:attribute name="oStatus" type="String" />
    <aura:attribute name="oStudy" type="String" />
    <aura:attribute name="oStudySites" type="String" />
    <aura:attribute name="oSource" type="String" />
    <aura:attribute name="oParticipantStatus" type="String" />
    <aura:attribute name="oAgeFrom" type="String" />
    <aura:attribute name="oAgeTo" type="String" />
    <aura:attribute name="oEthnicity" type="String" />
    <aura:attribute name="oSex" type="String" />
    <aura:attribute name="oisHighRiskOccupation" type="String" />
    <aura:attribute name="oisComorbidities" type="String" />
    <aura:attribute name="oisInitialVisitScheduled" type="String" />
    <aura:attribute name="IsPromoteToSHLimit" type="Decimal" />
    <aura:attribute name="actStatus" type="List" />
    <aura:attribute name="CsvList" type="List" />
    <aura:attribute name="counterLimit" type="Integer" />
    <aura:attribute name="startPos" type="Integer" />
    <aura:attribute name="endPos" type="Integer" />
    <aura:attribute name="flagSet" type="Boolean" default="false" />
    <aura:attribute name="isOpen" type="boolean" default="false"/>
    <aura:attribute name="optionSex" type="List" />
    <aura:attribute name="SortBy" type="List" />
    <aura:attribute
                    name="ShowEntries"
                    type="List"
                    default="[
                             {'label': '5', 'value': '5'},
                             {'label': '10', 'value': '10'},
                             {'label': '25', 'value': '25'},
                             {'label': '40', 'value': '40'},
                             ]"
                    />
    <aura:attribute name="PriorityReferral" type="List" />
    <aura:attribute name="isCheckboxhidden" type="boolean" default="false"/>
    <aura:attribute name="isActionSelected" type="boolean" default="false"/>
    <aura:attribute name="ActionSelected" type="string" default="null"/>
    <aura:attribute name="statusSelected" type="string"/>
    <aura:attribute name="StatusChangeto" type="string" default="null"/>
    <aura:attribute name="statusChange" type="boolean" default="false"/>
    <aura:attribute name="enablePP" type="boolean" default="false"/>
    <aura:attribute name="enableSH" type="boolean" default="false"/>
    <aura:attribute name="turnON" type="boolean" default="false"/>
    <aura:attribute name="availableStatuses" type="List" default="null"/>
    <aura:attribute name="bulkStatusUpdate" type="Boolean" />
    <aura:handler
                  name="change"
                  value="{!v.filterList[0].Status}"
                  action="{!c.handleChangeActive}"
                  />
    <aura:handler name="change" value="{!v.filterList[0].Study}" action="{!c.doStudyChanged}" />
    <aura:handler
                  name="change"
                  value="{!v.filterList[0].StudySites}"
                  action="{!c.handleChangeSites}"
                  />
    <aura:handler
                  name="change"
                  value="{!v.filterList[0].ParticipantStatus}"
                  action="{!c.handleChangePartStatus}"
                  />
    <aura:handler
                  name="change"
                  value="{!v.filterList[0].Source}"
                  action="{!c.handleChangeSource}"
                  />
    <aura:handler name="change" value="{!v.filterList[0].Sex}" action="{!c.handleChangeSex}" />
    <aura:handler
                  name="change"
                  value="{!v.filterList[0].Ethnicity}"
                  action="{!c.handleChangeEthnicity}"
                  />
    <aura:handler name="change" value="{!v.pageSize}" action="{!c.handleTable}" />
    <aura:handler name="change" value="{!v.SortBydefault}" action="{!c.handleTable}" />
    <aura:method name="refreshTable" action="{!c.handleTable}" />
    <aura:method name="handlePromoteSHMethod" action="{!c.handlePromoteSH}"/>
    <aura:method name="handleInviteToPPMethod" action="{!c.inviteToPP}"/>
    <aura:method name="changeStatusTo" action="{!c.changeStatusTo}"/>
    <div class="slds-m-top_medium"></div>
    <div class="slds-card">
        <div class="filter-card slds-grid slds-wrap">
            <div class="slds-size_1-of-1 slds-large-size_9-of-12">
                <div class="demo-only demo-only--sizing slds-grid slds-wrap filterby">
                    <div class="slds-size_6-of-6">
                        <span class="filterTitle">{!$Label.c.RH_FilterBy}</span>
                    </div>
                    
                    <input
                           type="checkbox"
                           checked="checked"
                           class="accordionCheck"
                           name="panel"
                           id="panel-3"
                           />
                    <label for="panel-3" class="slds-size_1-of-3 study-Info"
                           >{!$Label.c.RH_StudyInfo}</label
                        >
                    <div class="accordionContent">
                        <div class="slds-size_1-of-6 activePE">
                            <c:rrSelect
                                        value="{!v.filterList[0].Status}"
                                        options="{!v.peFilterData.activePE}"
                                        placeholder="{!$Label.c.PG_VP_L_Active}"
                                        useSentenceFont="false"
                                        class="fp-ss-filter-container"
                                        setValueAsSelected="true"
                                        />
                        </div>
                        <div class="slds-size_1-of-6 studies">
                            <c:rrSelect
                                        value="{!v.filterList[0].Study}"
                                        options="{!v.peFilterData.studies}"
                                        placeholder="{!$Label.c.PG_MRRL_L_Studies}"
                                        useSentenceFont="false"
                                        class="fp-study-filter-container"
                                        onchange="{!c.StudyAction}"
                                        setValueAsSelected="true"
                                        />
                        </div>
                        <div class="slds-size_1-of-6 studySites">
                            <c:rrSelect
                                        value="{!v.filterList[0].StudySites}"
                                        options="{!v.peFilterData.studySites}"
                                        placeholder="{!$Label.c.PG_VP_L_Study_sites}"
                                        useSentenceFont="false"
                                        class="fp-ss-filter-container"
                                        setValueAsSelected="true"
                                        />
                        </div>
                        <div class="slds-size_1-of-6 source">
                            <c:rrSelect
                                        value="{!v.filterList[0].Source}"
                                        options="{!v.peFilterData.source}"
                                        placeholder="{!$Label.c.PG_VP_L_Source}"
                                        useSentenceFont="false"
                                        class="fp-ss-filter-container"
                                        setValueAsSelected="true"
                                        />
                        </div>
                        <div class="slds-size_1-of-6 statuses">
                            <c:rrSelect
                                        value="{!v.filterList[0].ParticipantStatus}"
                                        options="{!v.peFilterData.statuses}"
                                        placeholder="{!$Label.c.PG_VP_L_Participant_Status}"
                                        useSentenceFont="false"
                                        class="fp-ss-filter-container"
                                        setValueAsSelected="true"
                                        />
                        </div>
                    </div>
                </div>
                <div class="demo-only demo-only--sizing slds-grid slds-wrap filterby">
                    <input type="checkbox" class="accordionCheck" name="panel" id="panel-2" />
                    <label for="panel-2" class="slds-size_1-of-3 demographics">
                        {!$Label.c.RH_Demographics}
                    </label>
                    <div class="accordionContent">
                        <span class="age slds-size_1-of-3">
                            <div class="slds-size_1-of-4 ageBetween">
                                <span>{!$Label.c.RH_AgeIsBetween}</span>
                            </div>
                            <div class="slds-size_1-of-4 ageFromHead">
                                <span class="slds-col">
                                    <lightning:input
                                                     class="andTo"
                                                     aura:id="AgeFrom"
                                                     type="number"
                                                     name="input8"
                                                     placeholder="{!$Label.c.RH_AgeFrom}"
                                                     value="{!v.filterList[0].AgeFrom}"
                                                     label=""
                                                     min="0"
                                                     max="150"
                                                     messageWhenRangeOverflow="Age Range 0-150"
                                                     messageWhenRangeUnderflow="Age Range 0-150"
                                                     onchange="{! c.handleAgeFrom }"
                                                     />
                                </span>
                            </div>
                            <div class="slds-size_1-of-4 andHead">
                                <span class="slds-col and">{!$Label.c.RH_And}</span>
                            </div>
                            <div class="slds-size_1-of-4 ageToHead">
                                <lightning:input
                                                 class="andTo"
                                                 aura:id="AgeTo"
                                                 type="number"
                                                 name="input8"
                                                 placeholder="{!$Label.c.RH_AgeTo}"
                                                 value="{!v.filterList[0].AgeTo}"
                                                 label=""
                                                 min="0"
                                                 max="150"
                                                 messageWhenRangeOverflow="Age Range 0-150"
                                                 messageWhenRangeUnderflow="Age Range 0-150"
                                                 onchange="{! c.handleAgeTo }"
                                                 />
                            </div>
                        </span>
                        <div class="slds-size_2-of-3 slds-small-size_1-of-3 ethnicity">
                            <c:rrSelect
                                        value="{!v.filterList[0].Ethnicity}"
                                        options="{!v.peFilterData.ethnicity}"
                                        placeholder="{!$Label.c.RH_Ethnicity}"
                                        useSentenceFont="false"
                                        class="fp-ss-filter-container"
                                        setValueAsSelected="true"
                                        />
                        </div>
                        <div class="sslds-size_1-of-3 slds-small-size_1-of-3 sex">
                            <c:rrSelect
                                        value="{!v.filterList[0].Sex}"
                                        options="{!v.optionSex}"
                                        placeholder="{!$Label.c.RH_Sex}"
                                        useSentenceFont="false"
                                        class="fp-ss-filter-container"
                                        setValueAsSelected="true"
                                        />
                        </div>
                    </div>
                </div>
                <div class="demo-only demo-only--sizing slds-grid slds-wrap filterby">
                    <input type="checkbox" class="accordionCheck" name="panel" id="panel-1" />
                    <label for="panel-1" class="slds-size_1-of-4 others">
                        {!$Label.c.RH_Others}
                    </label>
                    <div class="accordionContent">
                        <div class="hro">
                            <lightning:input
                                             type="checkbox"
                                             checked="{!v.filterList[0].isHighRiskOccupation}"
                                             label="{!$Label.c.RH_HighRiskOccupation}"
                                             name="input1"
                                             onchange="{! c.handleCheckboxHRO }"
                                             />
                        </div>
                        <div class="cbd">
                            <lightning:input
                                             type="checkbox"
                                             checked="{!v.filterList[0].isComorbidities}"
                                             label="{!$Label.c.RH_Comorbidities}"
                                             name="input2"
                                             onchange="{! c.handleCheckboxCBD }"
                                             />
                        </div>
                        <div class="iv">
                            <lightning:input
                                             type="checkbox"
                                             checked="{!v.filterList[0].isInitialVisitScheduled}"
                                             label="{!$Label.c.RH_InitialVisitScheduled}"
                                             name="input3"
                                             onchange="{! c.handleCheckboxIVS }"
                                             />
                        </div>
                    </div>
                </div>
            </div>
            <!--<div class="{!v.isRTL?'alert-count-condition1 RTL-Text-align':'alert-count-condition1 LTR-Text-align'}">-->
            <div class="slds-size_1-of-1 slds-large-size_3-of-12">
               <div class="{!v.isRTL? 'export-all-RTL' : 'export-all'}">
                    <lightning:button
                                      variant="Neutral"
                                      label="{!$Label.c.RH_ExportFilteredList}"
                                      title="{!$Label.c.RH_ExportFilteredList}"
                                      onclick="{! c.handleExport }"
                                      />
                </div>
                <!-- Button Area -->
                <div class="demo-only demo-only--sizing slds-grid button-grid">
                    <div class="resetHead">
                        <lightning:button
                                          variant="base"
                                          label="{!$Label.c.RH_Reset}"
                                          title="{!$Label.c.RH_Reset}"
                                          onclick="{! c.reset }"
                                          />
                    </div>
                    <div class="searchHead">
                        <button
                                class="apollo-btn secondary mrc-invite-btn search"
                                data-gtm="BTN_InviteRP"
                                onclick="{!c.handleSearch}"
                                >
                            {!$Label.c.RH_ApplyFilters}
                        </button>
                        <!-- <lightning:button variant="Brand" label="Promote to Study Hub" title="Promote to Study Hub" onclick="{! c.handlePromoteSH }" />-->
                    </div>
                </div>
            </div>
        </div>
        <!--/div>-->
    </div>
    
    <div class="slds-text-body_regular">
        <!-- Table -->
        
        <!-- data table start-->
        
        <div class="slds-grid slds-wrap changeBtns">
            <!--<div class="slds-col slds-size_1-of-1 slds-small-size_1-of-2 slds-col_bump-left">
                <span><a style="font-size: 16px;font-weight: 600;"
                         onclick="{!c.onClickCardView}">
                    {!$Label.c.BTN_Naviagte_Card} 
                    </a></span>
            </div>-->
        </div>
        <div class="slds-grid slds-wrap tableSettings">
            <div class="slds-col slds-size_1-of-1 slds-large-size_1-of-2">
                <!--    <span>{!$Label.c.Showing}&nbsp;{!v.RecordStart}-{!v.RecordEnd}&nbsp;{!$Label.c.of}&nbsp;{!v.TotalRecords}&nbsp;{!$Label.c.patients}&nbsp;({!v.count}&nbsp;{!$Label.c.selected_max_50})</span> -->
                <!--<aura:if isTrue="{!and(!v.PromoteToSH,!v.flagSet)}">
                    <span
                          ><button
                                   class="apollo-btn primary mrc-invite-btn"
                                   disabled="{!v.enablePromoteToSH}"
                                   data-gtm="BTN_InviteRP"
                                   onclick="{!c.handlePromoteSH}"
                                   >
                        {!$Label.c.Send_to_Study_Hub}
                        </button>
                    </span>
                </aura:if>-->
                <!--<lightning:button
                    variant="Neutral"
                    label="Bulk Actions"
                    title="Bulk Actions"
                    onclick="{! c.handleExport }"
                />-->
                
                <!-- menu -->
                <aura:if isTrue="{!!v.isActionSelected}">
                <div class="slds-dropdown-trigger slds-dropdown-trigger_click " aura:id="menuItem">
                    <button class="slds-button slds-button_neutral" aria-haspopup="true" onclick="{!c.toggleVisibility}" data-tab="example">{!$Label.c.Bulk_Actions}
                        <lightning:icon iconName="utility:down" size="x-small" alternativeText="right"/>
                    </button>
                    <div aura:id="menu-list" class="slds-dropdown slds-dropdown_left">
                        <ul class="slds-dropdown__list" role="menu" aria-label="Show More">
                            <aura:if isTrue="{!v.enableSH}">
                            <li class="slds-dropdown__item " >
                                <a data-value="Send to Study Hub" onmousedown="{!c.itemclick}" onclick="{!c.selectAction}" tabindex="0">
                                    <span class="slds-truncate listStyle" >{!$Label.c.Send_to_Study_Hub}</span>
                                </a>
                            </li>
                            </aura:if>
                            <aura:if isTrue="{!v.enablePP}">
                             <li class="slds-dropdown__item ">
                                    <a data-value="Invite to Patient Portal" onmousedown="{!c.itemclick}" onclick="{!c.selectAction}" tabindex="-1">
                                        <span class="slds-truncate listStyle">{!$Label.c.Invite_to_Patient_Portal}</span>
                                    </a>
                                </li>
                            </aura:if>
                            <aura:if isTrue="{!(v.TotalRecords > 0 &amp;&amp; v.bulkStatusUpdate)}">
                                <li class="slds-dropdown__item ">
                                    <a data-value="Change Participant Status" onmousedown="{!c.itemclick}" onclick="{!c.selectAction}" tabindex="-2">
                                        <span class="slds-truncate listStyle">{!$Label.c.Change_Participant_Status}</span>
                                    </a>
                                </li>

                            </aura:if>
                        </ul>
                    </div>
                </div>
                </aura:if>
                <!-- menu end -->
                  <aura:if isTrue="{!v.isActionSelected}">
                    <lightning:button disabled="true" onclick="" class="buttonstyle">
                        {!v.ActionSelected}
                    </lightning:button>
                    <aura:if isTrue="{!v.statusChange}">
                        <lightning:select name="select1" 
                                          label="Participant Status" 
                                          value="{!v.statusSelected}"
                                          onchange="{!c.doValueChangeStatus}">
                            <aura:iteration items="{!v.availableStatuses}" var="opt">
                                <option value="{!opt.value}" >
                                     <aura:unescapedHtml value="{!opt.label}" />
                                </option>
                            </aura:iteration>
                        </lightning:select>
                        
                    </aura:if>
                    <div class="cancel-btn">
                        <lightning:button variant="base" label="{!$Label.c.Cancel}" onclick="{!c.noAction}"/>
                    </div>
                    <lightning:button  class="apollo-btn primary" variant="brand" label="{!$Label.c.Submit}" disabled="{!v.turnON}"  onclick="{!c.onSubmit}" />
                </aura:if>

            </div>
            
            <div class="slds-col slds-size_1-of-1 slds-large-size_1-of-2" style="text-align: end">
                <div class="fp-form-element">
                    <label style="padding-right: 5px">{!$Label.c.PG_FP_L_Sort_by}</label>
                    <c:rrSelect
                                useSentenceFont="false"
                                value="{!v.SortBydefault}"
                                aura:id="sortby"
                                options="{!v.SortBy}"
                                setValueAsSelected="true"
                                />
                </div>
                <div class="fp-form-element">
                    <label style="padding-right: 5px">{!$Label.c.PG_FP_L_Show_entries}</label>
                    <c:rrSelect
                                value="{!v.pageSize}"
                                aura:id="pageSize"
                                options="{!v.ShowEntries}"
                                setValueAsSelected="true"
                                />
                </div>
            </div>
        </div>
        
        <c:RRSpinner aura:id="Spinnerpopup" size="medium" showSpinner="false" />
        <c:EmptyListStub targetList="{!v.PaginationList}" />
        <aura:if isTrue="{!(!empty(v.PaginationList))}">
            <div class="table-border">
                <table class="slds-table slds-table_cell-buffer">
                    <thead>
                        <tr>
                            <!--header checkbox for select all-->
                            <th style="width: 2rem" class="slds-text-align_right">
                                <div class="slds-form-element">
                                    <div class="slds-form-element__control">
                                        <aura:if isTrue="{!v.isCheckboxhidden}">
                                            <label class="slds-checkbox">
                                                <ui:inputCheckbox
                                                                  disabled="{!v.totalRecordsCount == 0}"
                                                                  aura:id="selectAllId"
                                                                  change="{!c.selectAllCheckbox}"
                                                                  value="{!v.SelectAll}"
                                                                  />
                                                
                                                <span class="slds-checkbox_faux"></span>
                                                <span class="slds-form-element__label"></span>
                                            </label> </aura:if>
                                    </div>
                                </div>
                            </th>
                            <th scope="col">
                                <div
                                     class="slds-truncate h_font"
                                     title="Name"
                                     style="text-align: center"
                                     >
                                    {!$Label.c.ID}
                                </div>
                            </th>
                            <th scope="col">
                                <div class="slds-truncate h_font" title="Phone">
                                    {!$Label.c.Received_Date}
                                </div>
                            </th>
                            <th scope="col">
                                <div
                                     class="slds-truncate h_font"
                                     title="Phone"
                                     style="text-align: center"
                                     >
                                    {!$Label.c.Source_ID}
                                </div>
                            </th>
                            <th scope="col">
                                <div class="slds-truncate h_font" title="Phone">
                                    {!$Label.c.Sex}
                                </div>
                            </th>
                            <th scope="col">
                                <div class="slds-truncate h_font" title="Phone">
                                    {!$Label.c.Age}
                                </div>
                            </th>
                            <th scope="col">
                                <div class="slds-truncate h_font" title="Phone">
                                    {!$Label.c.Ethnicity}
                                </div>
                            </th>
                            <th scope="col">
                                <div class="slds-truncate h_font" title="Type">
                                    {!$Label.c.Comorbidities}
                                </div>
                            </th>
                            <th scope="col">
                                <div class="slds-truncate h_font" title="Type">{!$Label.c.BMI}</div>
                            </th>
                            <th scope="col">
                                <div class="slds-truncate h_font" title="Type">
                                    {!$Label.c.High_Risk}
                                </div>
                            </th>
                            <th scope="col">
                                <div class="slds-truncate h_font" title="Type">
                                    {!$Label.c.Initial_Visit_Date}
                                </div>
                            </th>
                            <th scope="col">
                                <div class="h_font" title="Type">
                                    {!$Label.c.Participant_Status}
                                </div>
                            </th>
                            <th scope="col">
                                <div class="h_font" title="Type">{!$Label.c.High_Priority}</div>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <aura:iteration items="{!v.PaginationList}" var="obj" indexVar="key">
                            <tr>
                                <th
                                    scope="row"
                                    class="slds-text-align_right"
                                    style="width: 3.25rem"
                                    >
                                    <div class="slds-form-element">
                                        <div class="slds-form-element__control">
                                            <aura:if isTrue="{!v.isCheckboxhidden}">
                                                <label class="slds-checkbox">
                                                    <ui:inputCheckbox
                                                                      text="{!obj.pe.Id}"
                                                                      value="{!obj.isCheckedlatest}"
                                                                      change="{!c.checkboxSelected}"
                                                                      name="{!key}"
                                                                      disabled="{!obj.selectionlock}"
                                                                      />
                                                    <span class="slds-checkbox_faux"></span>
                                                    <span class="slds-form-element__label text"></span>
                                                </label>
                                            </aura:if>
                                        </div>
                                    </div>
                                </th>
                                <th scope="row">
                                    <div class="slds-truncate wraptext">
                                        <lightning:button
                                                          class="align-left"
                                                          variant="base"
                                                          name="{!key}"
                                                          value="{!obj.pe.Participant__r.Id}"
                                                          label="{!obj.pe.Name}"
                                                          onclick="{!c.showEditParticipantInformation}"
                                                          />
                                    </div>
                                </th>
                                <th scope="row">
                                    <div class="slds-truncate">
                                        <lightning:formattedDateTime
                                                                     value="{!obj.pe.CreatedDate}"
                                                                     year="numeric"
                                                                     month="short"
                                                                     day="2-digit"
                                                                     timeZone="UTC"
                                                                     />
                                    </div>
                                </th>
                                <th scope="row">
                                    <div
                                         class="slds-truncate"
                                         style="white-space: pre-wrap; text-align: center"
                                         >
                                        <aura:if isTrue="{!obj.pe.Referral_Source__c == 'PI'}">
                                            {!obj.pe.MRN_Id__c}
                                        </aura:if>
                                        <aura:if isTrue="{!obj.pe.Referral_Source__c == 'HCP'}">
                                            {!obj.pe.Patient_ID__c}
                                        </aura:if>
                                        <aura:if
                                                 isTrue="{!obj.pe.Referral_Source__c != 'PI' &amp;&amp; obj.pe.Referral_Source__c != 'HCP'}"
                                                 >
                                            {!obj.pe.Patient_ID__c}
                                        </aura:if>
                                    </div>
                                </th>
                                <th scope="row">
                                    <div class="slds-truncate">
                                        {!obj.pe.Participant__r.Gender_Technical__c}
                                    </div>
                                </th>
                                <th scope="row">
                                    <div class="slds-truncate">
                                        {!obj.pe.Participant__r.Present_Age__c}
                                    </div>
                                </th>
                                <th scope="row">
                                    <div style="text-align: center">{!obj.Ethnicity}</div>
                                </th>
                                <th scope="row">
                                    <div class="slds-truncate" style="text-align: center">
                                        {!obj.pe.Comorbidities__c}
                                    </div>
                                </th>
                                <th scope="row">
                                    <div class="slds-truncate">{!obj.pe.Participant__r.BMI__c}</div>
                                </th>
                                <th scope="row">
                                    <div class="slds-truncate" style="text-align: center">
                                        {!obj.pe.HighRisk_Indicator__c}
                                    </div>
                                </th>
                                <th scope="row">
                                    <div class="slds-truncate" style="text-align: center">
                                        <ui:outputDate
                                                       value="{!obj.pe.Initial_visit_scheduled_date__c}"
                                                       />
                                    </div>
                                </th>
                                <th scope="row">
                                    <div class="slds-truncate" style="text-align: center">
                                        {!obj.pe.Participant_Status__c}
                                    </div>
                                </th>
                                <th scope="row">
                                    <div class="slds-truncate" style="width: fit-content">
                                        <!--<c:rrSelect value="{!obj.priorityReferral}" id="{!obj.pe.Id}" onchange="{!c.handlePriorityReferral}" disabled="{!obj.selectionlock}" options="{!v.PriorityReferral}" setValueAsSelected="true"/>-->
                                        <lightning:select
                                                          name="{!obj.pe.Id}"
                                                          value="{!obj.priorityReferral}"
                                                          onchange="{!c.handlePriorityReferral}"
                                                          >
                                            <option value="Yes">{!$Label.c.BTN_Yes}</option>
                                            <option value="No">{!$Label.c.BTN_No}</option>
                                        </lightning:select>
                                    </div>
                                </th>
                            </tr>
                        </aura:iteration>
                    </tbody>
                </table>
            </div>
            <c:Action_ParticipantInformation
                                             aura:id="OpenPatientInfoAction"
                                             parent="{! this }"
                                             NotCCMode="true"
                                             isValid="true"
                                             isInvited="true"
                                             isListView="true"
                                             />
            
            <!-- DataTable End -->
            <br />
            <!--  Pagination Buttons Start -->
            <!--<div class="slds-clearfix">
            <div class="slds-page-header" role="banner">
                <div class="slds-align_absolute-center">         
                    <lightning:button disabled="{!v.PageNumber == 1}" variant="brand-outline" aura:id="prevPage" label="{!$Label.c.BTN_Previous}" onclick="{!c.handlePrev}" />            
                    <lightning:button disabled="{!v.RecordEnd == v.TotalRecords}" variant="brand-outline" aura:id="nextPage" label="{!$Label.c.BTN_Next}" onclick="{!c.handleNext}"/>
                    
                </div>
               <span>{!$Label.c.Showing}&nbsp;{!v.RecordStart}-{!v.RecordEnd}&nbsp;{!$Label.c.of}&nbsp;{!v.TotalRecords}&nbsp;{!$Label.c.patients}&nbsp;({!v.count}&nbsp;{!$Label.c.selected_max_50})</span>
            </div>
        </div>-->
            <div class="slds-col slds-size_1-of-1 ListViewHead">
                <span
                      >{!$Label.c.Showing}&nbsp;{!v.RecordStart}-{!v.RecordEnd}&nbsp;{!$Label.c.of}&nbsp;{!v.TotalRecords}&nbsp;{!$Label.c.patients}&nbsp;({!v.count}&nbsp;{!$Label.c.selected_max_50})</span
                    >
                <div class="slds-float_right">
                    <span
                          ><lightning:button
                                             disabled="{!v.PageNumber == 1}"
                                             variant="brand-outline"
                                             aura:id="prevPage"
                                             label="{!$Label.c.BTN_Previous}"
                                             onclick="{!c.handlePrev}"
                                             />
                        <lightning:button
                                          disabled="{!v.RecordEnd == v.TotalRecords}"
                                          variant="brand-outline"
                                          aura:id="nextPage"
                                          label="{!$Label.c.BTN_Next}"
                                          onclick="{!c.handleNext}"
                                          />
                    </span>
                </div>
            </div>
        </aura:if>
        <aura:if isTrue="{!v.isOpen}">
            <c:ListViewParticipantPopup 
                                        aura:id = "openStatusPopup"
                                        statusSelected = "{!v.statusSelected}"
                                        oParticipantStatus = "{!v.oParticipantStatus}"
                                        oStudy = "{!v.oStudy}"
                                        parentComp="{!this}"
                                        SelectedIds = "{!v.SelectedIds}"/>
        </aura:if>

    </div>
</aura:component>