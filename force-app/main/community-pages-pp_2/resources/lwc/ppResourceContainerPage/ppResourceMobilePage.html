<template>
    <!-- Loading Spinner-->
    <c-web-spinner class="main-spinner" fixed="true" show-spinner={showSpinner}></c-web-spinner>
    <template if:true={isInitialized}>
        <div class={cardRTL}>
            <div class="res-container slds-p-top_medium">
                <lightning-layout multiple-rows="true" vertical-align="center">
                    <lightning-layout-item size="6" class="mb-10">
                        <div class="res-header">{labels.RESOURCES}</div>
                    </lightning-layout-item>

                    <lightning-layout-item if:true={resourcesAvailable} size="6" class="mb-8">
                        <div class="pref-container">
                            <div
                                onclick={handleChangePreference}
                                class="change-preferences"
                                style="float: right"
                            >
                                {labels.CHANGE_PREFERENCES}
                            </div>
                        </div>
                    </lightning-layout-item>

                    <lightning-layout-item if:true={resourcesAvailable} size="12">
                        <div class="dropdown" data-key="dropdown" onclick={showOptions}>
                            <span>{selectedOptions}</span>
                            <span class="down-icon"><lightning-icon icon-name='utility:down' alternative-text='down' size="x-small" class='green-utility-icon' title='down'></lightning-icon></span>
                            <ul class="res-options hidden">
                                <template for:each={options} for:item="option">
                                    <li
                                        class="noselected"
                                        key={option.value}
                                        data-key={option.value}
                                        onclick={updateResources}
                                    >
                                        <span>{option.label}</span>
                                    </li>
                                </template>
                            </ul>
                        </div>
                    </lightning-layout-item>
                </lightning-layout>

                <!-- Load Components based on Selection -->
                <lightning-layout multiple-rows="true">
                    <template if:true={engageVisible}>
                        <template if:true={multimedia}>
                            <lightning-layout-item size="12">
                                <!--Explore Section starts here-->
                                <div class="res-explore-container res-explore-mobile">
                                    <!-- EXPLORE LWC COMPONENT PLACEHOLDER -->
                                    <c-pp-resource-multimedia
                                        resourced-data={resourcesData}
                                        desktop={desktop}
                                        onresourceclick={handleResourceClick}
                                    >
                                    </c-pp-resource-multimedia>
                                </div>
                            </lightning-layout-item>
                        </template>
                        <template if:false={multimedia}>
                            <lightning-layout-item size="12">
                                <div class="res-box-engage-container slds-align_absolute-center">
                                    <div class="dis-block">
                                        <span class="center"
                                            ><img src={empty_state} class="empty-state-img-size"
                                        /></span>
                                        <span class="no-links-available slds-m-top_medium"
                                            >No modules available</span
                                        >
                                    </div>
                                </div>
                            </lightning-layout-item>
                        </template>
                    </template>

                    <template if:true={exploreVisible}>
                        <lightning-layout-item size="12">
                            <!--Explore Section starts here-->
                            <div class="res-explore-container res-explore-mobile">
                                <!-- EXPLORE LWC COMPONENT PLACEHOLDER -->
                                <c-pp-resource-engage
                                    desktop={desktop}
                                    is-rtl={isRTL}
                                    onresourceclick={handleResourceClick}
                                >
                                </c-pp-resource-engage>
                            </div>
                        </lightning-layout-item>
                    </template>

                    <template if:true={discoverVisible}>
                        <lightning-layout multiple-rows="true">
                            <lightning-layout-item size="12">
                                <div class="links-will-open-in-a">{labels.DISCLAIMER}</div>
                                <!--Discover Section starts here-->
                            </lightning-layout-item>
                            <lightning-layout-item size="12">
                                <div class="res-box-relLinks-container pad10">
                                    <c-pp-discover-links
                                        links-wrappers={linksWrappers}
                                        discover-empty-state={discoverEmptyState}
                                        onresourceclick={handleResourceClick}
                                    ></c-pp-discover-links>
                                </div>
                            </lightning-layout-item>
                        </lightning-layout>
                    </template>
                </lightning-layout>

                <template if:true={documentsVisible}>
                    <lightning-layout multiple-rows="true">
                        <lightning-layout-item size="12">
                            <!--Explore Section starts here-->
                            <div class="res-box-document-container">
                                <c-pp-Resource-Document-Container
                                    onresourceclick={handleResourceClick}
                                ></c-pp-Resource-Document-Container>
                            </div>
                        </lightning-layout-item>
                    </lightning-layout>
                </template>

                <template if:true={answersVisible}>
                    <lightning-layout multiple-rows="true">
                        <lightning-layout-item size="12">
                            <!--Explore Section starts here-->
                            <div class="res-box-answers-container crossed">
                                <!-- START : COMING SOON -->
                                <div class="object">
                                    <div class="object-rope"></div>
                                    <div class="object-shape">
                                        Coming <span class="soon">Soon</span>
                                    </div>
                                </div>
                                <!-- END : COMING SOON -->
                                <!-- FIND ANSWERS LINKS LWC COMPONENT PLACEHOLDER -->
                            </div>
                        </lightning-layout-item>
                    </lightning-layout>
                </template>

                <lightning-layout multiple-rows="true">
                    <lightning-layout-item size="12" class="mt-16 mb-10">
                        <c-pp-contribute-section></c-pp-contribute-section>
                    </lightning-layout-item>
                </lightning-layout>
            </div>
        </div>
    </template>
</template>