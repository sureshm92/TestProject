<aura:component controller="ParticipantVisitsRemote" description="StudyVisitsPreviewPanel">

    <ltng:require scripts="{!join(',', $Resource.rr_community_js)}" afterScriptsLoaded="{!c.doInit}"/>

    <aura:attribute name="visits" type="List"/>

    <c:RRActionApprove aura:id="popup"
                       dialogTitle="{!$Label.c.Home_Page_StudyVisit_Btn}"
                       message="{!$Label.c.StudyVisit_Popup_Text}"
                       approveBtnName="{!$Label.c.BTN_OK}"
                       cancelBtnName="{!$Label.c.BTN_Cancel}"/>

    <div class="sv-panel rr-white-panel">
        <c:RRSpinner aura:id="spinner" size="small" showSpinner="true"/>
        <div class="sv-header">
            <div class="sv-title">{!$Label.c.Home_Page_StudyVisit_Title}</div>
            <button class="apollo-btn primary sv-btn" onclick="{!c.onTravel}">
                {!$Label.c.Home_Page_StudyVisit_Btn}
            </button>
        </div>
        <div class="sv-body">
            <aura:if isTrue="{!!empty(v.visits)}">
                <c:RRTable>
                    <tr>
                        <th>{!$Label.c.Home_Page_StudyVisit_Visit}</th>
                        <th>{!$Label.c.Home_Page_StudyVisit_Schedule}</th>
                        <th>{!$Label.c.Home_Page_StudyVisit_WhToEx}</th>
                    </tr>
                    <aura:iteration var="visit" items="{!v.visits}">
                        <tr>
                            <td>{!visit.Name}</td>
                            <td>{!visit.Visit_Schedule__c}</td>
                            <td><c:RRIconSplitter class="svl-icon" value="{!visit.Icons__c}" numOfIconsToDisplay="3"/></td>
                        </tr>
                    </aura:iteration>
                </c:RRTable>
            </aura:if>
            <c:EmptyListStub targetList="{!v.visits}" iconName="none"/>
        </div>
        <div class="sv-footer">
            <c:RRLink page="study-workspace?tab=tab-visits" label="{!$Label.c.Resources_See_All}"/>
        </div>
    </div>
</aura:component>
