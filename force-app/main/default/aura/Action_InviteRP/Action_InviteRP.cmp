<!--
 - Created by Kryvolap on 13.08.2019.
 -->

<aura:component description="Action_InviteRP" controller="Action_InviteRPRemote">

    <aura:attribute name="firstName" type="String" default="" access="private"/>
    <aura:attribute name="lastName" type="String" default="" access="private"/>
    <aura:attribute name="clinicName" type="String" default="" access="private"/>
    <aura:attribute name="phone" type="String" default="" access="private"/>
    <aura:attribute name="studySiteId" type="String" default="" access="private"/>
    <aura:attribute name="reqFieldsFilled" type="Boolean" default="true" access="private"/>
    <aura:attribute name="studySitesForInvitation" type="List" access="private"/>

    <!-- handlers: -->
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    <aura:handler name="change" value="{!v.firstName}" action="{!c.checkReqFields}"/>
    <aura:handler name="change" value="{!v.lastName}" action="{!c.checkReqFields}"/>
    <aura:handler name="change" value="{!v.clinicName}" action="{!c.checkReqFields}"/>
    <aura:handler name="change" value="{!v.phone}" action="{!c.checkReqFields}"/>

    <!-- methods:-->
    <aura:method name="execute" action="{!c.doExecute}" access="public">
<!--        <aura:attribute name="messageText" type="String"/>-->
<!--        <aura:attribute name="callback" type="Function"/>-->
    </aura:method>


    <div class="invite-popup">
        <c:Popup aura:id="inviteRPDialog" title="{!$Label.c.PG_MRC_L_Invite_Referring_Provider}"
                 size="small" showScroll="{!true}">
            <div class="slds-grid slds-grid_vertical">
                <div class="rr-form-element slds-col">
                    <div class="label">{!$Label.c.PG_MRC_RF_First_Name}</div>
                    <c:rrInput valueString="{!v.firstName}"/>
                </div>
                <div class="rr-form-element slds-col">
                    <div class="label">{!$Label.c.PG_MRC_RF_Last_Name}</div>
                    <c:rrInput valueString="{!v.lastName}"/>
                </div>
                <div class="rr-form-element slds-col">
                    <div class="label">{!$Label.c.PG_MRC_RF_Clinic_Name}</div>
                    <c:rrInput valueString="{!v.clinicName}"/>
                </div>
                <div class="rr-form-element slds-col">
                    <div class="label">{!$Label.c.PG_MRC_RF_Phone}</div>
                    <c:rrInput valueString="{!v.phone}"/>
                </div>
                <div class="rr-form-element slds-col">
                    <aura:if isTrue="{!!empty(v.studySitesForInvitation)}">
                        <div class="label">{!$Label.c.PG_MRC_RF_Invite_to_Studies}</div>
                        <div class="radio-group">
                            <aura:iteration items="{!v.studySitesForInvitation}" var="site">
                                <lightning:input value="{!site}" type="radio" name="site"
                                                 label="{!site.StudyName}"
                                                 onchange="{!c.doSelectStudy}" checked="{!site.selected}"/>
                            </aura:iteration>
                        </div>
                    </aura:if>
                </div>
            </div>
            <aura:set attribute="footerButtons">
                <c:RRSpinner aura:id="modalSpinner" size="medium" showSpinner="false"/>
                <button class="apollo-btn secondary" onclick="{!c.doClearInviteAndHide}">
                        {!$Label.c.BTN_Cancel}
                </button>
                <button class="apollo-btn primary" onclick="{!c.doInviteRP}"
                        disabled="{!v.reqFieldsFilled}"
                        title="{!(empty(v.lastName)||empty(v.firstName)||
                                empty(v.clinicName)||empty(v.phone))?$Label.c.PG_MRC_RF_Not_all_Req_Fields:''}">
                        {!$Label.c.BTN_Invite}
                </button>
            </aura:set>
        </c:Popup>
    </div>
</aura:component>
