<!--
 - Created by Olga Skrynnikova on 12/20/2019.
 -->

<aura:component description="PaymentsPanel" controller="PaymentsRemote">
    <ltng:require scripts="{!join(',', $Resource.rr_community_js)}" afterScriptsLoaded="{!c.doInit}"/>
    <aura:attribute name="initialized" type="Boolean"/>
    <aura:attribute name="initData" type="Object"/>
    <aura:attribute name="href" type="String"/>

    <aura:if isTrue="{!!equals(v.href, 'none')}">
        <div class="sv-panel rr-white-panel" data-gtm="PNL_PaymentsPanel">
            <c:RRSpinner aura:id="spinner" size="small" showSpinner="true"/>
            <aura:if isTrue="{!v.initialized}">
                <div class="sv-header">
                    <div class="sv-title">{!$Label.c.Home_Page_Payments_Title}</div>
                </div>
                <aura:if isTrue="{!v.initData.informationAvailable}">
                    <div class="sv-body">
                        <c:RRTable>
                            <tr>
                                <th>{!$Label.c.Home_Page_Payments_Card_Status}</th>
                                <th>{!$Label.c.Home_Page_Payments_Balance}</th>
                                <th>{!$Label.c.Home_Page_Payments_Pending_Payments}</th>
                            </tr>
                            <tr>
                                <td>{!v.initData.status}</td>
                                <td>{!v.initData.balance} $</td>
                                <td>{!v.initData.pendingPayments} $</td>
                            </tr>
                        </c:RRTable>
                    </div>
                    <div class="sv-footer">
                        <a href="{!v.href}"
                           class="link rr-link"
                           data-gtm="LNK_ManagePayments">{!$Label.c.Manage_My_Payments}
                            <aura:if isTrue="{!v.isArabic}">
                                <c:RRIcon iconName="icon-chevron-left"/>
                            </aura:if>
                            <aura:if isTrue="{!!v.isArabic}">
                                <c:RRIcon iconName="icon-chevron-right"/>
                            </aura:if>
                        </a>
                    </div>
                    <aura:set attribute="else">
                        <div class="error-message">
                            <c:RRIcon iconName="icon-alert-circle"/>
                            {!$Label.c.No_Payment_Information_Available}
                        </div>
                        <c:EmptyListStub iconName="none" message="{!$Label.c.PG_VP_L_No_Items_display}"/>
                    </aura:set>
                </aura:if>
            </aura:if>
        </div>
    </aura:if>
</aura:component>
