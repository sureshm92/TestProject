<!--
 - Created by Nargiz Mamedova on 12/13/2019.
 -->

<aura:component description="RelevantLinks" controller="RelevantLinksRemote"
                implements="forceCommunity:availableForAllPageTypes">

    <aura:attribute name="links" type="Object[]"/>
    <aura:attribute name="isAvailable" type="Boolean"/>
    <aura:attribute name="resourcePanelAvailable" type="Boolean"/>
    <aura:attribute name="initialized" type="Boolean"/>

    <ltng:require scripts="{!$Resource.rr_community_js}" afterScriptsLoaded="{!c.doInit}"/>

    <aura:if isTrue="{!v.isAvailable}">
        <div aura:id="panel" class="sv-panel rr-white-panel" data-gtm="PNL_RelevantLinks">
            <c:RRSpinner aura:id="spinner" size="small" showSpinner="true"/>
            <aura:if isTrue="{!v.initialized}">
                <div class="sv-header">
                    <div class="sv-title">{!$Label.c.Home_Page_RelevantLinks_Title}</div>
                </div>
                <div class="sv-body">
                    <c:RRTable>
                        <tbody>
                        <aura:iteration var="link" items="{!v.links}" indexVar="ind">
                            <tr>
                                <td class="slds-grid slds-grid_vertical-align-center" data-ind="{!link.URL__c}">
                                    <div class="sv-element">
                                        <lightning:formattedUrl value="{!link.URL__c}" label="{!link.Title__c}"/>
                                    </div>
                                </td>
                            </tr>
                        </aura:iteration>
                        </tbody>
                    </c:RRTable>
                    <c:EmptyListStub targetList="{!v.links}" iconName="none" message="{!$Label.c.PG_VP_L_No_Items_display}"/>
                </div>
            </aura:if>
        </div>
    </aura:if>
</aura:component>
