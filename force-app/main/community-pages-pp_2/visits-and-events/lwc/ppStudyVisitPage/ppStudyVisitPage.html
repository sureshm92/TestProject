<template>
    <c-web-spinner fixed="true"></c-web-spinner>
    <template if:true={contentLoaded}>
        <template if:false={isMobile}>
            <template if:true={isEvent}>
                <h1 class="my-visits">{label.myEvents}</h1>
            </template>
            <template if:false={isEvent}>
                <h1 class="my-visits">{label.myVisits}</h1>
            </template>
            <div class="slds-grid slds-wrap slds-gutters">
                <div
                    class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_3-of-12 col1"
                >
                    <template if:true={contentLoaded}>
                        <c-pp-my-visits-list
                            pastvisits={pastVisits}
                            upcomingvisits={upcomingVisits}
                            visittimezone={visitTimezone}
                            showupcomingvisits={showUpcomingVisits}
                            upcomingvisitid={upcomingVisitId}
                            pastvisitid={pastVisitId}
                            visitid={visitid}
                            visitdata={visitdata}
                            ismobile={isMobile}
                            initialpageload={initialPageLoad}
                            past={past}
                            onvisitchange={onVisitSelect}
                            onpastclick={onPastClick}
                            onupcomingclick={onUpcomingClick}
                            isupcomingvisits={isUpcomingVisits}
                            isevent={isEvent}
                        >
                        </c-pp-my-visits-list>
                    </template>
                </div>

                <div
                    class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_4-of-12 col2 slds-p-horizontal_large"
                    data-id={column2}
                >
                    <h1 if:false={past} class="visit3 slds-truncate" title={visitName}>
                        {visitName}
                        <div class="visit-date-time">
                            <template if:true={plannedDate}>
                                <lightning-formatted-date-time
                                    value={plannedDate}
                                    year="numeric"
                                    month="short"
                                    day="2-digit"
                                    time-zone={visitTimezone}
                                ></lightning-formatted-date-time>
                                &nbsp;|&nbsp;<lightning-formatted-date-time
                                    value={plannedDate}
                                    hour="2-digit"
                                    minute="2-digit"
                                    time-zone={visitTimezone}
                                ></lightning-formatted-date-time>
                            </template>
                            <template if:false={plannedDate}> {label.noVisitsLabel} </template>
                        </div>
                    </h1>
                    <h1 if:true={past} class="visit3 slds-truncate" title={visitName}>
                        {visitName}
                        <div class="visit-date-time">{visitStatus}</div>
                    </h1>
                    <div>
                        <h1 class="what-to-expect">{label.WTELabel}</h1>
                        <div class="icon-cont">
                            <div class="slds-clearfix">
                                <template if:false={isError}>
                                    <!--<template if:true={contentLoaded}>-->
                                    <div class="rem-border">
                                        <c-pp-r-r-icon-splitter
                                            icons={icondetails}
                                            label={cblabel}
                                            description={cbdescription}
                                        ></c-pp-r-r-icon-splitter>
                                    </div>
                                </template>
                                <!--</template>-->
                                <template if:true={isError}>
                                    <div>
                                        <div
                                            class="slds-align_absolute-center no-data-is-available"
                                            style="height: 185px"
                                        >
                                            <template if:true={isEvent}>
                                                {label.eventNoDataAvailable}
                                            </template>
                                            <template if:false={isEvent}>
                                                {label.visitNoDataAvailable}
                                            </template>
                                        </div>
                                    </div>
                                </template>
                            </div>
                        </div>
                        <template if:true={isEvent}>
                            <h1 class="what-to-expect">{label.eventdetails}</h1>
                        </template>
                        <template if:false={isEvent}>
                            <h1 class="what-to-expect">{label.visitdetails}</h1>
                        </template>
                        <div>
                            <div class="slds-clearfix">
                                <div class="card-content">
                                    <c-pp-Study-Visit-Details-Card
                                        if:true={showChild}
                                        past={past}
                                        visitid={visitid}
                                        tasksubject={taskSubject}
                                        taskid={taskId}
                                        visitdata={visitdata}
                                        url={sfdcBaseURL}
                                        siteaddress={siteAddress}
                                        sitename={siteName}
                                        sitephone={sitePhoneNumber}
                                        ondataupdated={handleDataUpdate}
                                        ondiscard={handleDiscard}
                                        onsaveclicked={saveClicked}
                                        isevent={isEvent}
                                    >
                                    </c-pp-Study-Visit-Details-Card>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div
                    class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_4-of-12 col3"
                    data-id={column3}
                >
                    <img src={visitimage2} class="image-result-visit" />
                    <template if:true={isResultsCard}>
                        <h1 class="what-to-expect">{label.results}</h1>
                        <div class="icon-cont1 slds-align_absolute-center">
                            <c-pp-study-visit-result-card></c-pp-study-visit-result-card>
                        </div>
                    </template>
                </div>
            </div>
        </template>
        <template if:true={isMobile}>
            <div class="slds-grid slds-wrap slds-gutters slds-p-horizontal_x-large  slds-m-top_medium">
                <!--MY VISITS SECTION-->
                <div class="slds-col slds-size_1-of-1">
                    <template if:true={isEvent}>
                        <h1 class="my-visits">{label.myEvents}</h1>
                    </template>
                    <template if:false={isEvent}>
                        <h1 class="my-visits">{label.myVisits}</h1>
                    </template>
                    <template if:true={contentLoaded}>
                        <c-pp-my-visits-list
                            pastvisits={pastVisits}
                            upcomingvisits={upcomingVisits}
                            visittimezone={visitTimezone}
                            showupcomingvisits={showUpcomingVisits}
                            upcomingvisitid={upcomingVisitId}
                            pastvisitid={pastVisitId}
                            visitid={visitid}
                            visitdata={visitdata}
                            ismobile={isMobile}
                            initialpageload={initialPageLoad}
                            past={past}
                            onvisitchange={onVisitSelect}
                            onpastclick={onPastClick}
                            onupcomingclick={onUpcomingClick}
                            isupcomingvisits={isUpcomingVisits}
                            isevent={isEvent}
                        >
                        </c-pp-my-visits-list>
                    </template>
                </div>
            </div>
        </template>
    </template>
</template>
