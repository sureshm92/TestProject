<template>
    <div class="slds-grid slds-grid_vertical slds-m-top_xxx-small">
        <div class="slds-col slds-size_1-of-1">
            <template if:true={hasSingleCommMode}>
                <c-patient-portal-menu-picklist
                    place-holder={placeHolder}
                    pick-list-options={pickListOptions}
                    default-pick-list-value={defaultPickListValue}
                    disable-picklist={disablePicklist}
                    combo-box-header={comboBoxHeader}
                >
                </c-patient-portal-menu-picklist>
            </template>
        </div>
    </div>
    <div class="slds-grid slds-grid_vertical pat-menu-items">
        <div class="slds-col slds-align_absolute-center slds-size_1-of-1">
            <div class="slds-col slds-grid slds-grid_vertical">
                <template if:false={hasSingleCommMode}>
                    <div
                        onclick={handleClick}
                        class="slds-col slds-align_absolute-center slds-size_1-of-1 pointer-class"
                    >
                        <span
                            class="slds-m-right_x-small"
                        >{label.viewingAs}
                </span>
                        <template if:false={isToggle}>
                            <lightning-icon
                                icon-name="utility:chevrondown"
                                variant="base"
                                size="xx-small"
                                class="chevron-icon"
                            ></lightning-icon>
                        </template>
                        <template if:true={isToggle}>
                            <lightning-icon
                                icon-name="utility:chevronup"
                                variant="base"
                                size="xx-small"
                                class="chevron-icon"
                            ></lightning-icon>
                        </template>
                        <br />
                    </div>
                    <div class="slds-col slds-align_absolute-center slds-size_1-of-1">
                        <template if:true={showAllModes}>
                            <div class="participant-overflow-scroll">
                                <c-patient-portal-menu-list
                                    comm-modes={commModeList}
                                    onchangemode={handleChangeMode}
                                >
                                </c-patient-portal-menu-list>
                            </div>
                        </template>

                        <template if:false={showAllModes}>
                            <div
                                if:false={currentMode.isDelegate}
                                class="slds-col slds-size_1-of-1 slds-m-vertical_x-small curr-mode-delg-title"
                                onclick={navigateToHome}
                            >
                                <div
                                    class="self curr-mode-title slds-p-top_x-small slds-p-left_small"
                                >
                                    {currentMode.title}
                                </div>
                            </div>
                            <template if:true={currentMode.isDelegate}>
                                <div
                                    class="slds-grid delegate-item slds-p-around_x-small slds-m-bottom_small"
                                    onclick={navigateToHome}
                                >
                                    <div
                                        class="slds-col slds-size_10-of-12 participant-delegate-title"
                                    >
                                        {currentMode.title}
                                        <div class="slds-col slds-grid slds-size_1-of-1">
                                            <div
                                                class="slds-col slds-size_1-of-1 participant-delegate-email"
                                            >
                                                {label.partipantsDelegate}
                                            </div>
                                        </div>
                                    </div>
                                    <div
                                        class="slds-col slds-size_2-of-12 slds-m-top_small slds-m-left_small participant-tooltip"
                                        onclick={handleNavigation}
                                    >
                                        <img
                                            class="helptext-pos"
                                            src={icon_url}
                                            data-id={currentMode.title}
                                        /><lightning-helptext content={label.participantSettings}>
                                        </lightning-helptext>
                                    </div>
                                </div>
                            </template>
                            <br />
                        </template>
                    </div>
                </template>
            </div>
        </div>
    </div>
    <div class="slds-grid slds-m-top_xx-small">
        <div class="slds-col slds-size_1-of-1" if:false={hasSingleCommMode}>
            <c-patient-portal-menu-picklist
                place-holder={placeHolder}
                pick-list-options={pickListOptions}
                default-pick-list-value={defaultPickListValue}
                disable-picklist={disablePicklist}
                combo-box-header={comboBoxHeader}
            >
            </c-patient-portal-menu-picklist>
        </div>
    </div>
</template>
