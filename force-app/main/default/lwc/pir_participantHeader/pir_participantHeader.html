<template>
    <div class={maindivcls}>
    <div class="shadowbox shadowbox-mob"> 
        <div class="slds-grid slds-wrap slds-p-around_x-small slds-media_center">
            <div class="slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12 header-section header-section-mob">
                <template if:true={peId}>
                    <div class="tooltip">  
                        <div class="per-header-name" title="">                                          
                            <b class="slds-truncate pername"> {initialsName} </b>   
                            <span class="per-header-Refno">&nbsp;({refNumber})</span>                     
                        </div>
                    </div>
                    <template if:true={phoneNumber}>
                       <p class="per-mobile slds-truncate">{phoneNumber}</p>
                    </template>
                    <div class="tooltip"> 
                        <div class="">
                            <p class="per-study-details slds-truncate" title="">{studyName} - {siteName} </p>
                            <span class="tooltiptextBottom slds-align_absolute-center">{studySiteName}</span>
                        </div>                     
                    </div>
                    <div class="tooltip"> 
                        <div class="">   
                            <p class="per-study-details slds-truncate" title="">{label.RH_Referred_by} {referredBy} </p>
                            <span class="tooltiptextBottom slds-align_absolute-center">{referredBy}</span>
                        </div> 
                    </div>    
                </template>
            </div>
            <div class="slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12 button-section">
                <div class=" slds-float_right slds-show_medium destop-top-padding tabview slds-gutters_x-small">
                        <template if:true={showPrinticon}>   
                            <img class="slds-p-around_x-small ipad-mode cursor" onclick={doPrint} src={printIcon} width="32px" >
                        </template>
                        <template if:true={showPreScreen}>
                            <button class="apollo-btn secondary ipad-mode-btn slds-p-around_x-small rtl-m-left" title={label.RH_Pre_screen} onclick={doPrescreen}> {label.RH_Pre_screen} </button>
                        </template>
                        <template if:true={showAction}>
                            <template if:true={showActiondt}>
                                <button disabled={showActionbtnDisabled} title={btnToolTip} class="apollo-btn primary ipad-mode-btn slds-p-around_x-small rtl-m-left"  onclick={doAction}> 
                                    <div class="" >
                                        <div class="slds-col slds-size_1-of-1" >
                                            {showActionlabel}
                                        </div>
                                        <div class="slds-col slds-size_1-of-1">
                                            <lightning-formatted-date-time value={showActiondateTime} year="numeric" month="short" day="2-digit" time-zone="UTC" ></lightning-formatted-date-time>
                                        </div>
                                    </div>
                                </button> 
                            </template>
                            <template if:false={showActiondt}>
                                <button disabled={showActionbtnDisabled} title={btnToolTip} class="apollo-btn primary ipad-mode-btn slds-p-around_x-small rtl-m-left"  onclick={doAction}> {showActionlabel} </button> 
                            </template>
                        </template>
                    </div>
                <div class="slds-grid slds-grid_vertical slds-hide_medium">
                    <div class="slds-col slds-size_1-of-1 slds-align_absolute-center slds-p-vertical_x-small cursor"> <img onclick={doPrint} src={printIcon} width="32px"></div>
                    <template if:true={showAction}>
                        <template if:true={showActiondt}>
                            <div class="slds-col slds-size_1-of-1 slds-align_absolute-center slds-p-vertical_x-small">
                                <button disabled={showActionbtnDisabled} title={btnToolTip} class="apollo-btn primary btn-lrg btn-dt"  onclick={doAction}> 
                                    <div class="">
                                        <div class="slds-col slds-size_1-of-1">
                                            {showActionlabel}
                                        </div>
                                        <div class="slds-col slds-size_1-of-1">
                                            <lightning-formatted-date-time value={showActiondateTime} year="numeric" month="short" day="2-digit" time-zone="UTC" ></lightning-formatted-date-time>
                                        </div>
                                    </div>
                                </button> 
                            </div>
                        </template>
                        <template if:false={showActiondt}>
                            <div class="slds-col slds-size_1-of-1 slds-align_absolute-center slds-p-vertical_x-small rtl-m-left"><button class="apollo-btn primary btn-lrg "  onclick={doAction} title={btnToolTip}>  {showActionlabel} </button></div>
                        </template>
                    </template>
                    <template if:true={showPreScreen}>
                        <div class="slds-col slds-size_1-of-1 slds-align_absolute-center slds-p-vertical_x-small rtl-m-left"><button class="apollo-btn secondary btn-lrg"  onclick={doPrescreen} title={label.RH_Pre_screen}> {label.RH_Pre_screen} </button></div>
                    </template>
                </div>
            </div>
        </div>
    </div>
    <template if:true={openMRR_Modal}>
        <c-popup-l-w-c
        show-modal=true
        onclose={closeMRR_Modal} 
        header2=true
        header-value2=""
        modalsize="small">    
        <div slot="body" class="processBody">
            
            <div class="progress-bar">
                <div class="status-bar">
                    <template for:each={surveyCompleted} for:item="Scom">
                        <div class="status-path-item  completed"  key={Scom.Id}>      
                        </div>
                    </template>
                    <template for:each={surveyInProgress} for:item="SurveyProgress">
                        
                    <div  class="status-path-item  progress" key={SurveyProgress.Id}>      
                    </div>
                    </template>
                    <template for:each={surveyPending} for:item="SurveyPend">
                        <div  class="status-path-item  " key={SurveyPend.Id}>      
                        </div>
                    </template>
                    
                </div><!-- status-bar  -->                 
            </div><!-- progress-bar  -->
            <div class="screenercss">
            {completedSurveyByUser} {label.of} {totalSurveyToComplete} {label.RH_ScreenerComplete} 
            </div>
             
            <template if:false={mrrResults}>
                 <c-pir_mrr-log gizmosrc={mrrLink} peid={peId} currentsurvey ={currentSurvey}   onmedicalreviewresult={doMrrResult} ></c-pir_mrr-log>
            </template>
            <template if:true={mrrResults}>
                <div class="mrr-alert">
                    <div>
                        <template if:true={mrrPassed}>
                            <svg xmlns="http://www.w3.org/2000/svg" class="mrr-icon-pass">
                                <use xlink:href={mrrPass}></use>
                            </svg>
                        </template>
                        <template if:false={mrrPassed}>
                            <svg xmlns="http://www.w3.org/2000/svg" class="mrr-icon-fail">
                                <use xlink:href={mrrFail}></use>
                            </svg>
                        </template>
                    </div>
                    <div class="main-title">
                        <template if:true={mrrPassed}>
                            <div class="slds-truncate"> {per.Participant__r.Full_Name__c}  &nbsp;{label.PG_MRR_R_Passed} </div>
                        </template>
                        <template if:false={mrrPassed}>
                           <div class="slds-truncate">  {per.Participant__r.Full_Name__c} &nbsp;{label.PG_MRR_R_Failed} </div>
                        </template>
                    </div>
                    <div>
                        <template if:true={checkAction}>
                            <template if:true={showAction}>
                                <template if:false={showActiondt}>
                                    <template if:false={showActionbtnDisabled}>
                                        <button class="apollo-btn primary mrr-btn ipad-mode-btn slds-p-around_x-small" title={label.inviteToPP}  onclick={doAction}> {label.inviteToPP} </button>
                                </template>
                            </template>
                            </template>
                        </template>
                    </div>
                    <div>
                        <template if:true={showPreScreener_Button}>
                            <button class="apollo-btn primary mrr-btn ipad-mode-btn slds-p-around_x-small" onclick={pre_Eligibility}>{label.RH_Complete_Participant_Screener}</button>
                        </template>
                    </div>        
                    <div>
                        <lightning-button variant="base" label={label.PG_MRR_BTN_Back_to_My_Participant} onclick={closeMRR_Modal} class="back-to-my-participant"></lightning-button>
                    </div>
                </div>
            </template>
        </div> 
    </c-popup-l-w-c>
   </template>
    </div>
</template>