<template>
    <template if:true={isVisitAvailable}>
        <c-web-spinner fixed="true"></c-web-spinner>
        <div class={containerClass}>
            <div class={titleClass}>Televisit</div>
            <template if:true={isFilterAvailable}>
                <div class="select-container">
                    {labels.FILTER_LABEL}
                    <c-web-select value={searchStatus} options={options} container-class="select-list"
                        onpasstotelevisitparent={statusHandler}>
                    </c-web-select>
                </div>
            </template>
            <template if:true={isDisplayTable}>
                <c-ui-table>
                    <template if:true={isDesktop}>
                        <table slot="body">
                            <tr class="tv-table-header">
                                <th>{labels.TV_TH_Title}</th>
                                <th>{labels.TV_TH_Date}</th>
                                <th>{labels.TV_TH_Time}</th>
                                <th>{labels.TV_TH_Duration}</th>
                                <template if:false={attendeeVisibility}>
                                    <th>{labels.TV_TH_Attendees}</th>
                                </template>

                            </tr>
                            <template for:each={tabTeleVisits} for:item="visitWrapper">
                                <tr key={visitWrapper.tvId}>
                                    <td>{visitWrapper.title}</td>
                                    <td>
                                        <lightning-formatted-date-time value={visitWrapper.visitDate} year="numeric"
                                            month="short" day="2-digit" time-zone={timeZone}>
                                        </lightning-formatted-date-time>
                                    </td>
                                    <td>
                                        <lightning-formatted-date-time value={visitWrapper.visitTime} hour="numeric"
                                            minute="numeric" time-zone={timeZone}>
                                        </lightning-formatted-date-time>
                                    </td>
                                    <td>{visitWrapper.duration}</td>
                                    <template if:false={attendeeVisibility}>
                                        <td>{visitWrapper.attendeeList}</td>
                                    </template>

                                </tr>
                            </template>
                        </table>

                    </template>
                    <template if:false={isDesktop}>
                        <table slot="body">
                            <tr class="tv-nested-row_header">
                                <th>{labels.TV_TH_Title}</th>
                                <th>{labels.TV_TH_Date}</th>
                                <th>{labels.TV_TH_Time}</th>
                            </tr>
                            <template for:each={tabTeleVisits} for:item="visitWrapper" for:index="index">
                                <tr key={visitWrapper.tvId}>
                                    <td>
                                        {visitWrapper.title} <br />
                                        <div class="tv-dur-row hidden" data-index={index}>
                                            <span class="tv-dur-row_header">{labels.TV_TH_Duration}
                                            </span><br />{visitWrapper.duration}
                                        </div>
                                    </td>
                                    <td>
                                        <lightning-formatted-date-time value={visitWrapper.visitDate} year="numeric"
                                            month="short" day="2-digit" time-zone={timeZone}>
                                        </lightning-formatted-date-time>
                                        <br />
                                    </td>
                                    <td>
                                        <lightning-formatted-date-time value={visitWrapper.visitTime} hour="numeric"
                                            minute="numeric" time-zone={timeZone}>
                                        </lightning-formatted-date-time>
                                        &nbsp;&nbsp;
                                        <span class="tv-data-btn" data-index={index}>
                                            <lightning-button-icon icon-name="utility:chevrondown" size="medium"
                                                variant="bare" alternative-text="View More" value={index}
                                                onclick={displayData}></lightning-button-icon>
                                        </span>
                                        <span class="tv-data-btn hidden" data-index={index}>
                                            <lightning-button-icon icon-name="utility:chevronup" size="medium"
                                                variant="bare" alternative-text="View Less" value={index}
                                                onclick={displayData}></lightning-button-icon>
                                        </span>
                                    </td>
                                </tr>
                            </template>
                        </table>
                    </template>
                </c-ui-table>
                <template if:true={attendeeVisibility}>
                    <div class="sv-footer">
                        <c-ui-link page="alumini-televisits?tab=televisits">
                            <span slot="body">{labels.SEE_ALL}
                                <c-web-icon icon-size="xsmall-custom" icon-name="icon-chevron-right"
                                    icon-color="#297dfd">
                                </c-web-icon></span>
                        </c-ui-link>
                    </div>
                </template>
            </template>
        </div>
    </template>
</template>

</template>