<aura:component controller="ResourceRemote" description="ResourceDashboardCard"
                implements="forceCommunity:availableForAllPageTypes">

    <!--ATTRIBUTES-->
    <aura:attribute name="videoResource" type="Object"/>
    <aura:attribute name="articleResource" type="Object"/>
    <aura:attribute name="trialId" type="String"/>
    <aura:attribute name="noTAMessage" type="String" default="{!null}"/>
    <aura:attribute name="resourcesLoading" type="Boolean[]"/>

    <!--HANDLERS-->
    <aura:handler name="init" value="this" action="{!c.doInit}"/>

    <!--COMPONENT BODY-->
    <div class="rr-white-panel resource-card">

        <header class="resource-card-title">
            Resources
        </header>

        <aura:if isTrue="{!v.noTAMessage != null}">
            <div class="resource-noTAMessage">
                <aura:unescapedHtml value="{!v.noTAMessage}"/>
            </div>
            <aura:set attribute="else">
                <div class="resource-content">
                    <lightning:layout horizontalAlign="center" multipleRows="true">

                        <lightning:layoutItem smallDeviceSize="12" mediumDeviceSize="12" largeDeviceSize="6" size="12" flexibility="auto">
                            <c:ResourceDashboardCardItem resourceType="Video" trialId="{!v.trialId}"
                                                         resourcesLoading="{!v.resourcesLoading[0]}"/>
                        </lightning:layoutItem>
                        <lightning:layoutItem smallDeviceSize="12" mediumDeviceSize="12" largeDeviceSize="6" size="12" flexibility="auto">
                            <c:ResourceDashboardCardItem resourceType="Article" trialId="{!v.trialId}"
                                                         resourcesLoading="{!v.resourcesLoading[1]}"/>
                        </lightning:layoutItem>

                    </lightning:layout>
                </div>
            </aura:set>
        </aura:if>

        <footer class="resource-footer" onclick="{!c.navigateToPage}">
            {!$Label.c.Resources_See_All}
        </footer>

        <aura:if isTrue="{!and(and(v.resourcesLoading != null, v.resourcesLoading.length), or(v.resourcesLoading[0], v.resourcesLoading[1]))}">
            <c:RRSpinner aura:id="spinner" showSpinner="true" size="medium"/>
        </aura:if>

    </div>

</aura:component>
