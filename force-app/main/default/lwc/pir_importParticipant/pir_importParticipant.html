<template>
     <!--  Import Participants Model Start  -->  
     <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
     aria-describedby="modal-content-id-1" class="slds-modal slds-modal_small slds-align--absolute-center slds-fade-in-open">
     <div class="slds-modal_small">
        <div class="slds-modal__container model-small">
           <div class="slds-modal__content" >
              <div class="bar"></div>
              <div class="slds-p-around_large"><!-- Add RTL class here -->
                 <div class="slds-grid slds-gutters close-arrow-left slds-m-bottom_small">
                    <div class="slds-col slds-large-size_11-of-12 slds-medium-size_11-of-12 slds-size_10-of-12">
                       <span class="pop-title">Import Participants</span> 
                    </div>
                    <div class="slds-col slds-size_1-of-12 close-icon">
                       <div onclick={handleImportParticipantclose}>
                          <lightning-icon icon-name="utility:close"
                             alternative-text="close"
                             size="x-small" ></lightning-icon>
                          <span class="slds-assistive-text">Close</span>
                       </div>
                    </div>
                 </div>
                 <slot name="bolkimport">
                    <div data-id="mainDivscroll" class="slds-grid slds-wrap slds-gutters importParticipants_popup bulkImportScroll">
                     <template if:true={isDataLoading}>
                        <div class="slds-m-around_large vertical-scroll">
                          <lightning-spinner alternative-text="Loading..." variant="brand">
                          </lightning-spinner>
                        </div>
                      </template>
                     
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12 slds-m-bottom_small dropdown_truncate dropdown-fonts_bulk">
                           <lightning-combobox
                           name="Study Name:"
                           label="Study Name:"
                           value={selectedStudy}
                           placeholder="Study Name"
                           options={studylist}
                           onchange={studyhandleChange}
                           disabled={isMyStudies}
                           ></lightning-combobox>
                        </div>
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12 slds-m-bottom_small dropdown-fonts_bulk">
                           <lightning-combobox
                               name="studysite"
                               label="Study Site:"
                               value={selectedSite}
                               placeholder={siteLabel}
                               options={studySiteList}
                               onchange={studysitehandleChange}
                               disabled={studysiteaccess}
                               ></lightning-combobox>
                        </div>
                      
                     
                       <div class="slds-col slds-size_1-of-1 slds-medium-size_12-of-12 slds-large-size_12-of-12">
                          <div class="slds-form-element modalBody">
                             <div class="slds-p-bottom_xxx-small slds-p-top_xxx-small">
                                <div class="slds-grid slds-wrap slds-gutters slds-m-bottom_small">
                                   <div class="slds-col slds-size_1-of-1 slds-medium-size_5-of-12 slds-large-size_4-of-12 ">
                                      <div class="fileUpload">Upload File <span class="slds-text-color_error">*</span></div>
                                   </div>
                                   <div class="slds-col slds-size_1-of-1 slds-medium-size_7-of-12 slds-large-size_8-of-12">
                                      <div class="slds-grid slds-wrap slds-gutters">
                                         <div class="slds-col slds-size_1-of-1 w-instruction">
                                            <div class="downloadLabel">Instructions 
                                               <a href={ParticipantBulkImportInstructions} title="Download"><img class="p-left-icon" src="/resource/1654599036000/bulkicons/Download.svg"/></a>
                                            </div>
                                         </div>
                                         <div class="slds-col slds-size_1-of-2 w-template">
                                            <div class="downloadLabel">Download Template  
                                               <a href={downloadTemplate} title=""><img class="p-left-icon" src="/resource/1654599036000/bulkicons/Download.svg"/></a>
                                            </div>
                                         </div>
                                         <div class="slds-col slds-size_1-of-2 w-langauge">
                                            <div class="downloadLabel labelRightMob">ISO language Guide
                                               <a   onclick={generateISOLanguage} title=""><img class="p-left-icon" src="/resource/1654599036000/bulkicons/Download.svg"/></a>
                                            </div>
                                         </div>
                                      </div>
                                      <!-- slds-grid slds-wrap -->  
                                   </div>
                                </div>
                                <!-- slds-grid slds-wrap -->                 
                                <div class="fileHolder" data-id="browsediv">
                                   <input onchange={handleFilesChange_new} type="file" class="fileInput"></input>
                                   <div class="fileBox slds-grid slds-wrap">
                                      <div class="slds-col slds-size_2-of-12 slds-medium-size_12-of-12 slds-large-size_12-of-12">
                                         <div class="slds-size_full slds-align_absolute-center slds-text-align_center slds-p-top--small marTopIcon">
                                            <lightning-icon icon-name="utility:upload" size="small" alternative-text="Upload" title="Upload"></lightning-icon>
                                         </div>
                                      </div>    
                                      <div class="slds-col slds-size_10-of-12 slds-medium-size_12-of-12 slds-large-size_12-of-12">
                                         <div class="slds-size_full slds-text-align_center slds-text_center uploadLabel marTop">  
                                            Drag files here or <span class="linkLabel slds-p-left_xx-small">browse</span> 
                                         </div>
                                         <div class="slds-size_full slds-text-align_center slds-text_center uploadLabel slds-p-bottom--small uploadLabel-Italic">  
                                            <strong>Your wait time may vary based on the number of records you upload</strong> 
                                         </div>
                                      </div>
                                   </div>
                                </div>
                                <!-- fileHolder -->  
                                
                                <div>
                                   <template if:true={fileName}>
                                      <div class="fileName">{fileName} </div>
                                      <div class="slds-align--absolute-center">
                                         <div class="progressBar">
                                            <div aria-valuemin="0" aria-valuemax="100" aria-valuenow={progress} aria-busy="true" role="progressbar" class="slds-progress-bar slds-progress-bar_large slds-progress-bar_circular">
                                               <span class="slds-progress-bar__value" style={progressWidth}></span>
                                            </div>
                                         </div>
                                         <div class="closeIcon">
                                            <template if:true={enableDel}>
                                               <span  onclick={deleteFiles}>
                                                  <lightning-icon icon-name="utility:close" alternative-text="Delete" title="Delete" size="xx-small"></lightning-icon>
                                               </span>
                                            </template>
                                         </div>
                                      </div>
                                      <div>
                                         <span class="fileName">{fileRemaining}</span>
                                         <span class="fileName slds-float--right">{progress}%</span>
                                      </div>
                                   </template>
                                </div>
                             </div><!-- slds-p-bottom_xxx-small -->
                          </div><!-- slds-form-element modalBody -->
                       </div><!-- slds-col slds-size_1-of-1 -->
                       <div class="slds-col slds-size_1-of-1 slds-medium-size_12-of-12 slds-large-size_12-of-12 slds-m-bottom_xx-small">
                          <div class="fileUpload">
                             Select Participant Status
                          </div>
                       </div>
                       <div class="slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12 slds-m-top slds-m-bottom_small importInputPopup dropdown-fonts_bulk">
                          <lightning-combobox
                             name="Participant Status"
                             label="Participant Status"
                             value={selectedStatus}
                             placeholder="Select...."
                             options={importParticipantStatus}
                             onchange={particiapntStatushandleChange}
                             disabled ={shouldDisableImportStatus}
                             required
                             ></lightning-combobox>
                       </div>

                       <template if:true={visitPlanAvailable}>
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12 slds-m-top slds-m-bottom_small importInputPopup dropdown-fonts_bulk ">
                          
                          <lightning-combobox
                          name="Arm/Cohort:"
                          label="Arm/Cohort:"
                          value={selectedvisitPlanId}
                          placeholder="Select...."
                          options={visitPlansLVList} 
                          disabled ={visitPlanDisabled}
                          onchange={handleVisitPlan}
                          required ={visitPlanRequired}
                          ></lightning-combobox>

                        </div>

                       </template>

                       <template if:false={shouldDisableImportStatus}>
                          <div class="slds-col slds-size_1-of-1 slds-medium-size_12-of-12 slds-large-size_12-of-12 importInputPopup">
                          <c-consent-manager call-source="importParticipant"  onconsentchange={handleConsentChange} study-site-id={selectedSite}> </c-consent-manager>
                          </div>
                       
                       </template>
                       <template if:false={shouldDisableImportStatus}>
                       <template if:true={isSuppressed}>
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_12-of-12 slds-large-size_12-of-12 slds-m-top_small slds-m-bottom_small">
                           <div class="fileUpload">
                              Invitation to Patient Portal
                           </div>
                        </div>
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_12-of-12 slds-large-size_12-of-12 slds-m-bottom_small importInputPopup">
                           <lightning-input type="checkbox" disabled label="Invite the patient to join Patient Portal" name="inviteToPP"></lightning-input>
                        </div>
                       </template>
                       <template if:false={isSuppressed}>
                          <template if:true={isStudyPPEnabled}>
                           <div class="slds-col slds-size_1-of-1 slds-medium-size_12-of-12 slds-large-size_12-of-12 slds-m-top_small slds-m-bottom_small">
                           <div class="fileUpload">
                              Invitation to Patient Portal
                           </div>
                        </div>
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_12-of-12 slds-large-size_12-of-12 slds-m-bottom_small importInputPopup">
                           <div class="display-checkbox">
                           <lightning-input type="checkbox" data-name="ppcheck" disabled={disablePatientInvite} varient="label-hidden"   onchange={handleppinvite} 
                           name="inviteToPP"></lightning-input>
                           <span class="checkbox_width"><label class="" >Invite the patient to join Patient Portal</label></span>
                           </div>
                        </div> 
                        
                       
                          </template> 
                       </template> 
                     </template>
                    </div><!-- slds-grid slds-wrap slds-gutters -->
                    <div class="slds-grid slds-wrap slds-m-top_small">
                       <div class="slds-col slds-size_1-of-1 slds-medium-size_12-of-12 slds-large-size_12-of-12">
                          <div class="slds-float_right mobile-width">                  
                             <button title="" class="slds-button apollo-btn primary btn-height import-btn" disabled={shouldDisableImport} onclick={doImportParticipant} > Import </button>
                             <button class="slds-button apollo-btn secondary btn-height discard-btn" onclick={handleImportParticipantclose}> Cancel</button> 
                          </div> 
                       </div>
                    </div><!-- slds-grid slds-wrap slds-gutters -->
                    
                 </slot><!-- slot -->
              </div>
           </div>
        </div>
     </div>
  </section>
  <div class="slds-backdrop slds-backdrop_open"></div>
  <!--  Import Participants Model End --> 
</template>