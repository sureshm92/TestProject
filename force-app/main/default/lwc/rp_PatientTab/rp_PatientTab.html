<!--rp_PatientTab-->
<!--Created By Gulam Sabir Khan on 15-08-2021-->
<template>
    <div class="c-container">
        <template for:each={patientrecord} for:item="pe">
            <div key={pe.peRecord.Id} class="section-header">{label.RH_RP_Main_Info}</div>
            <lightning-layout multiple-rows="true" key={pe.peRecord.Id}>
                <lightning-layout-item padding="around-small" size="12" small-device-size="6" medium-device-size="12"
                    large-device-size="6">
                    <lightning-layout>
                        <lightning-layout-item padding="around-small" size="12">
                            <div>
                                <lightning-input disabled={isaccesslevelthree} type="text"
                                    label={label.RH_RP_Patient_ID} name="Patient ID" value={pe.peRecord.Patient_ID__c}
                                    data-value="PatientID" data-id={pe.peRecord.Id} onchange={changeInputValue}
                                    required="true"></lightning-input>
                            </div>
                        </lightning-layout-item>
                    </lightning-layout>
                    <lightning-layout multiple-rows="true" key={pe.peRecord.Id} vertical-align="end">
                        <lightning-layout-item padding="around-small" size="9">
                            <div>
                                <lightning-input disabled={isaccesslevelthree} type="text"
                                    label={label.RH_RP_First_Name} name="First Name"
                                    value={pe.peRecord.Participant_Name__c} data-value="FirstName"
                                    data-id={pe.peRecord.Id} onchange={changeInputValue} required="true">
                                </lightning-input>
                            </div>
                        </lightning-layout-item>
                        <lightning-layout-item padding="around-small" size="3">
                            <div class="tooltip">
                                <div class="textoverlap middle-initial">{label.RH_RP_Middle_Initial}</div>
                                <lightning-input type="text" disabled={isaccesslevelthree} variant="label-hidden"
                                    name="Middle Initial" value={pe.peRecord.Patient_Middle_Name_Initial__c}
                                    data-value="MI" data-id={pe.peRecord.Id} onchange={changeInputValue}>
                                </lightning-input>
                                <span>{label.RH_RP_Middle_Initial}</span>
                            </div>
                        </lightning-layout-item>
                        <lightning-layout-item padding="around-small" size="12">
                            <div>
                                <lightning-input disabled={isaccesslevelthree} type="text" label={label.RH_RP_Last_Name}
                                    name="Last Name" value={pe.peRecord.Participant_Surname__c} data-value="LastName"
                                    data-id={pe.peRecord.Id} onchange={changeInputValue} required="true">
                                </lightning-input>
                            </div>
                        </lightning-layout-item>
                        <!--<lightning-layout-item padding="around-small" size="6">
                            <div>
                                <lightning-combobox disabled={isaccesslevelthree} label={label.RH_RP_Sex} name="Sex"
                                    placeholder={label.RH_RP_Select_Sex} value={pe.peRecord.Patient_Sex__c}
                                    options={pe.sexList} data-value="Sex" data-id={pe.peRecord.Id}
                                    onchange={changeInputValue} class="col-top">
                                </lightning-combobox>
                            </div>
                        </lightning-layout-item>-->
                    </lightning-layout>
                </lightning-layout-item>
                <lightning-layout-item padding="around-small" size="12" small-device-size="6" medium-device-size="12"
                    large-device-size="6">
                    <lightning-layout>
                        <lightning-layout-item padding="around-small" size="12">
                            <div>
                                <lightning-input type="text" label={label.RH_RP_Email_ID} name="Email ID"
                                    value={pe.peRecord.Email__c} data-value="EmailID" disabled={disableField}
                                    data-id={pe.peRecord.Id} onchange={changeInputValue}>
                                </lightning-input>
                            </div>
                        </lightning-layout-item>
                    </lightning-layout>
                    <lightning-layout multiple-rows="true">
                        <lightning-layout-item padding="around-small" size="6">
                            <lightning-combobox disabled={isaccesslevelthree} label={label.RH_RP_Birth_Month}
                                name="Birth Month" placeholder={label.RH_RP_Select_Birth_Month}
                                value={pe.peRecord.Birth_Month__c} options={pe.monthDateOption} data-value="BirthMonth"
                                data-id={pe.peRecord.Id} onchange={changeInputValue} class="col-top">
                            </lightning-combobox>
                        </lightning-layout-item>
                        <lightning-layout-item padding="around-small" size="6">
                            <lightning-combobox disabled={isaccesslevelthree} required="true"
                                label={label.RH_RP_Birth_Year} name="Birth Year"
                                placeholder={label.RH_RP_Select_Birth_Year} value={pe.peRecord.YOB__c}
                                options={pe.yearDateOption} data-value="BirthYear" data-id={pe.peRecord.Id}
                                onchange={changeInputValue} class="col-top">
                            </lightning-combobox>
                        </lightning-layout-item>
                        <lightning-layout-item padding="around-small" size="6">
                            <div>
                                <lightning-combobox disabled={isaccesslevelthree} label={label.RH_RP_Sex} name="Sex"
                                    placeholder={label.RH_RP_Select_Sex} value={pe.peRecord.Patient_Sex__c}
                                    options={pe.sexList} data-value="Sex" data-id={pe.peRecord.Id}
                                    onchange={changeInputValue} class="col-top">
                                </lightning-combobox>
                            </div>
                        </lightning-layout-item>
                    </lightning-layout>
                </lightning-layout-item>
            </lightning-layout>
            <div key={pe.Id} class="section-header">{label.RH_RP_Address}</div>
            <lightning-layout multiple-rows="true" key={pe.peRecord.Id}>
                <lightning-layout-item size="12" small-device-size="6" medium-device-size="12" large-device-size="6">
                    <lightning-layout multiple-rows="true">
                        <lightning-layout-item padding="around-small" size="12">
                            <div>
                                <lightning-combobox disabled={isaccesslevelthree} label={label.RH_RP_Country}
                                    name="Country" placeholder={label.RH_RP_Select_Country}
                                    value={pe.peRecord.Mailing_Country_Code__c} options={pe.countryList}
                                    data-value="Country" data-id={pe.peRecord.Id} onchange={changeInputValue}
                                    class="col-top">
                                </lightning-combobox>
                            </div>
                        </lightning-layout-item>
                        <lightning-layout-item padding="around-small" size="12">
                            <div>
                                <lightning-combobox disabled={isaccesslevelthree} label={label.RH_RP_State} name="State"
                                    placeholder={label.RH_RP_Select_State} value={pe.peRecord.Mailing_State_Code__c}
                                    options={states} data-value="States" data-id={pe.peRecord.Id}
                                    onchange={changeInputValue} class="col-top">
                                </lightning-combobox>
                            </div>
                        </lightning-layout-item>
                        <lightning-layout-item padding="around-small" size="12">
                            <div>
                                <lightning-input disabled={isaccesslevelthree} type="text"
                                    label={label.RH_RP_Postal_Code} name="Postal Code"
                                    value={pe.peRecord.Postal_Code__c} data-value="PostalCode" data-id={pe.peRecord.Id}
                                    pattern="[0-9]*" onchange={changeInputValue}></lightning-input>
                            </div>
                        </lightning-layout-item>
                    </lightning-layout>
                </lightning-layout-item>
                <lightning-layout-item size="12" small-device-size="6" medium-device-size="12" large-device-size="6">
                    <lightning-layout multiple-rows="true">
                        <lightning-layout-item padding="around-small" size="6">
                            <div>
                                <lightning-input type="text" label={label.RH_RP_Phone_Number} name="Phone Number"
                                    value={pe.peRecord.Phone__c} data-value="PhoneNumber" disabled={disableField}
                                    data-id={pe.peRecord.Id} onchange={changeInputValue}></lightning-input>
                            </div>
                        </lightning-layout-item>
                        <lightning-layout-item padding="around-small" size="6">
                            <div>
                                <div class="tooltip">
                                    <div class="textoverlap">{label.RH_RP_Phone_Type}</div>
                                    <lightning-combobox disabled={disableField} variant="label-hidden" name="Phone Type"
                                        placeholder={label.RH_RP_Select_Phone_Type}
                                        value={pe.peRecord.Patient_Phone_Type__c} options={pe.phoneTypeList}
                                        data-value="PhoneType" data-id={pe.peRecord.Id} onchange={changeInputValue}
                                        class="col-top">
                                    </lightning-combobox>
                                    <span>{label.RH_RP_Phone_Type}</span>
                                </div>
                            </div>
                        </lightning-layout-item>
                        <lightning-layout-item padding="around-small" size="6">
                            <div>
                                <div class="tooltip">
                                    <div class="textoverlap">{label.RH_RP_Alt_Phone_Number}</div>
                                    <lightning-input type="text" disabled={disableField} variant="label-hidden"
                                        name="Alt Phone Number" value={pe.peRecord.Participant_Alternative_Phone__c}
                                        data-value="AltPhoneNumber" data-id={pe.peRecord.Id}
                                        onchange={changeInputValue}>
                                    </lightning-input>
                                    <span>{label.RH_RP_Alt_Phone_Number}</span>
                                </div>
                            </div>
                        </lightning-layout-item>
                        <lightning-layout-item padding="around-small" size="6">
                            <div>
                                <div class="tooltip">
                                    <div class="textoverlap">{label.RH_RP_Alt_Phone_Type}</div>
                                    <lightning-combobox disabled={disableField} variant="label-hidden"
                                        name="Alt Phone Type" placeholder={label.RH_RP_Select_Phone_Type}
                                        value={pe.peRecord.Participant_Alt_Phone_Type__c} options={pe.altPhoneTypeList}
                                        data-value="AltPhoneType" data-id={pe.peRecord.Id} onchange={changeInputValue}
                                        class="col-top">
                                    </lightning-combobox>
                                    <span>{label.RH_RP_Alt_Phone_Type}</span>
                                </div>
                            </div>
                        </lightning-layout-item>
                    </lightning-layout>
                </lightning-layout-item>
            </lightning-layout>
            <div key={pe.Id} class="section-header">{label.RH_RP_site_info}</div>
            <lightning-layout multiple-rows="true" key={pe.peRecord.Id}>
                <lightning-layout-item size="12" small-device-size="6" medium-device-size="12" large-device-size="6">
                    <lightning-layout multiple-rows="true">
                        <lightning-layout-item padding="around-small" size="12">
                            <div>
                                <lightning-combobox disabled={isaccesslevelthree} label={label.RH_RP_Site_Name}
                                    name="Site Name" placeholder={label.RH_RP_Select_Site_Name}
                                    value={pe.backendSelectedSite} options={pe.siteList} data-value="SiteName"
                                    data-id={pe.peRecord.Id} onchange={changeInputValue} class="col-top">
                                </lightning-combobox>
                            </div>
                        </lightning-layout-item>
                        <lightning-layout-item padding="around-small" size="12">
                            <div>
                                <lightning-combobox required="true" label={label.RH_RP_Legal_Status} name="Legal Status"
                                    placeholder={label.RH_RP_Legal_Status_Verified} value={pe.peRecord.Legal_Status__c}
                                    options={pe.legalStatusList} data-value="LegalStatus" data-id={pe.peRecord.Id}
                                    onchange={changeInputValue} class="col-top">
                                </lightning-combobox>
                            </div>
                        </lightning-layout-item>
                    </lightning-layout>
                </lightning-layout-item>
                <lightning-layout-item size="12" small-device-size="6" medium-device-size="12" large-device-size="6">
                    <lightning-layout>
                        <lightning-layout-item padding="around-small" size="12">
                            <div>
                                <div class="tooltip">
                                    <div class="textoverlap">{label.RH_RP_Patient_Auth_Status}</div>
                                    <lightning-combobox disabled={isaccesslevelthree} required="true"
                                        variant="label-hidden" name="Patient Auth Status"
                                        placeholder={label.RH_RP_Patient_Auth_Status_Verified}
                                        value={pe.peRecord.Patient_Auth__c} options={pe.patientAuthStatusList}
                                        data-value="PatientAuthStatus" data-id={pe.peRecord.Id}
                                        onchange={changeInputValue} class="col-top">
                                    </lightning-combobox>
                                    <span>{label.RH_RP_Patient_Auth_Status}</span>
                                </div>
                            </div>
                        </lightning-layout-item>
                    </lightning-layout>
                </lightning-layout-item>
            </lightning-layout>
            <div key={pe.peRecord.Id} style="margin-top: 10px;">
                <c-consent-manager isaccesslevelthree={isaccesslevelthree} onconsentchange={handleConsentUpdate}
                    pe-updation="true" participant-enrollment={pe.peRecord}
                    participant-country={pe.peRecord.Mailing_Country_Code__c} call-source="ReferParticipantRP">
                </c-consent-manager>
            </div>
        </template>
        <div class="topIcon-control slds-hide_medium">
            <img src={topIcon} class="topIcon" onclick={goTop}>
        </div>
    </div>
    <div class="divider"></div>

    <div class="patient-button">
        <button class="slds-button slds-button_neutral" onclick={cancelModelOpen} title="Cancel"
            disabled={disabledsavebutton}>{label.Cancel}</button> &nbsp;&nbsp;&nbsp;&nbsp;
        <button class="apollo-btn primary search-more-btn" onclick={openUnsavedModal} title="Save"
            disabled={disabledsavebutton}>
            {label.Save}
        </button>
    </div>

    <!--for unsaved records-->
    <template if:true={isUnsavedModalOpen}>
        <!-- Modal/Popup Box LWC starts here -->
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
            aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <!-- Modal/Popup Box LWC header here -->
                <header class="slds-modal__header">
                    <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">{label.RH_RP_Save_Data}
                    </h2>
                </header>
                <!-- Modal/Popup Box LWC body starts here -->
                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                    <p>{label.RH_RP_Save_Changes}</p>
                </div>
                <!-- Modal/Popup Box LWC footer starts here -->
                <footer class="slds-modal__footer">
                    <button class="slds-button slds-button_neutral" onclick={closeUnsavedModal} title="Cancel"
                        disabled={disableButton}>
                        {label.Cancel}
                    </button>&nbsp;&nbsp;&nbsp;&nbsp;
                    <button class="apollo-btn primary search-more-btn" onclick={proceedDetailsModal} title="Proceed"
                        disabled={disableButton}>
                        {label.Proceed}
                    </button>
                </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>
    <template if:true={cancelOpen}>
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
            aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <header class="slds-modal__header">
                    <h2 id="modal-heading-02" class="slds-text-heading_medium slds-hyphenate">
                        {label.RH_RP_Cancel_Record}</h2>
                </header>
                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-2">
                    <p>{label.RH_RP_discard_changes}</p>
                </div>
                <footer class="slds-modal__footer">
                    <button class="slds-button slds-button_neutral" onclick={closeCancelModal} title="Cancel">
                        {label.Cancel}
                    </button>&nbsp;&nbsp;&nbsp;&nbsp;
                    <button class="apollo-btn primary search-more-btn" onclick={cancelRecord} title="Ok">
                        {label.BTN_OK}
                    </button>
                </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>
</template>