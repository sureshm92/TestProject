<!--
  @description       : TrialSurveyContainer
  @created by        : Krishna Kumar Mahto
  @created Date      : 11-25-2021
-->
<aura:component description="TrialSurveyContainer"
                controller="TrialSurveyContainerController" 
                implements="force:lightningQuickAction,lightning:actionOverride,lightning:hasPageReference,force:hasRecordId">
    <aura:attribute name="recordtypeName" type="String" />
    <aura:attribute name="ctpId" type="Id" />
    <aura:attribute name="recordId" type="Id" />
    <aura:attribute name="recordTypeId" type="Id" />
    <aura:attribute name="pageReference" type="Object" />
    <aura:attribute name="isCallLWCComponent" type="Boolean" default="true" />
    
    <ltng:require
        scripts="{!join(',', $Resource.rr_community_js, $Resource.moment_js)}"
        afterScriptsLoaded="{!c.doInit}"
    />
 
    <aura:handler name="change" value="{!v.pageReference}" action="{!c.doInit}" />

    <c:RRSpinner aura:id="spinner" size="medium" />
	
    <aura:if isTrue="{!or(not(empty(v.recordtypeName)), not(empty(v.recordId)))}"> 
        <aura:if isTrue="{!v.isCallLWCComponent}"> <!-- Avoid unnccessary calling LWC component after Cancel/Save button-->
      	  <c:trialSurvey ctpId="{!v.ctpId}" recordId="{!v.recordId}" recordTypeId ="{!v.recordTypeId}" recordTypeName="{!v.recordtypeName}" onpagerefresh="{!c.refresh}"/> 
        </aura:if> 
    </aura:if> 
    
</aura:component>