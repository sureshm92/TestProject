<!--
 - Created by Nikita Abrazhevitch on 19-Sep-19.
 -->

<aura:component description="ReferHealthcareProvider" controller="ReferHealthcareProviderRemote">
    <aura:attribute name="pe" type="Object"/>
    <aura:attribute name="healthCareProviders" type="List"/>
    <aura:attribute name="actionDisabled" type="Boolean" default="false"/>
    <aura:attribute name="printMode" type="Boolean" default="false"/>
    <aura:attribute name="fromActionParticipant" type="Boolean" default="false"/>
    <aura:attribute name="fromEmancipParticipant" type="Boolean" default="false"/>
    <aura:attribute name="refProvider" type="Object"/>
    <aura:attribute name="showReferringProvider" type="Boolean"/>

    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    <aura:handler name="change" value="{!v.pe}" action="{!c.doInit}"/>

    <aura:method name="disconnectHCP" action="{!c.doDisconnect}">
        <aura:attribute name="index" type="Integer"/>
    </aura:method>
    <!--<aura:handler name="change" value="{!v.pe.healthCareProviders}" action="{!c.doLog}"/>-->

    <div class="slds-grid slds-wrap healthcare-container">
        <div class="slds-grid slds-wrap slds-size--1-of-1">
                <aura:if isTrue="{!!v.fromActionParticipant &amp;&amp; v.refProvider &amp;&amp; !v.fromEmancipParticipant}">
                <div class="header">{!$Label.c.HealthCare_Provider}</div>
                </aura:if>
                <div class="healthcare-info">{!!v.fromEmancipParticipant ? $Label.c.HealCare_Provider_Message : $Label.c.BTN_Participant_Would_Like_Share_Info}
                </div>
                <aura:if isTrue="{!v.fromActionParticipant &amp;&amp; v.refProvider}">
                <div class="referring">{!$Label.c.Referring_Provider}</div>
                    <div class="slds-grid slds-wrap slds-size--1-of-1">
                    <c:ReferHealthcareProviderForm healthCareProvider = "{!hcProvider}" index = "{!index}" showReferringProvider="{!v.showReferringProvider}" isValid="true" refProvider="{!v.refProvider}" parent="{!this}"
                                                   pe="{!v.pe}" actionDisabled="{!v.actionDisabled}" printMode="{!v.printMode}"/>
                    </div>
                </aura:if>
            <!--<div class="slds-col slds-size&#45;&#45;1-of-4 referring-provider-header">
                <aura:if isTrue="{!v.pe.HCP_Contact_HCPEnroll__r.Name}">
                    <div class="rp-label">{!$Label.c.HealthCare_Provider_RP}</div>
                    <div class="healthcare-info">{!v.pe.HCP_Contact_HCPEnroll__r.Name}</div>
                </aura:if>
            </div>-->
        <div class="referring">{!!v.fromEmancipParticipant ? $Label.c.Other_Providers : ''}</div>
        <div class="slds-grid slds-wrap slds-size--1-of-1">
            <aura:iteration items="{!v.healthCareProviders}" var="hcProvider" indexVar="index">
                <c:ReferHealthcareProviderForm healthCareProvider = "{!hcProvider}" index = "{!index}" parent="{!this}"
                                               pe="{!v.pe}" actionDisabled="{!v.actionDisabled}" printMode="{!v.printMode}"/>
            </aura:iteration>
        </div>
        <aura:if isTrue="{!!v.actionDisabled}">
            <div>
                <button class="apollo-btn secondary slds-box" onclick="{!c.doAddProvider}">{!$Label.c.Add_Another_Provider}
                    <c:RRIcon class='rr-icon--left' color="#297dfd"
                              iconName="icon-plus"/>
                </button>
            </div>
        </aura:if>
        </div>
    </div>
</aura:component>
