<aura:component controller="ResourceRemote" description="StudyDocumentContainer">

    <!--ATTRIBUTES-->

    <aura:attribute name="resourceMode" type="String" default="Documents" access="private"
                    description="constant variable"/>
    <aura:attribute name="resourceWrappers" type="ResourceService.ResourceWrapper[]"/>
    <aura:attribute name="resourcesOnPage" type="ResourceService.ResourceWrapper[]"/>
    <aura:attribute name="errorMessage" type="String" default=""/>

    <!--HANDLERS-->

    <aura:handler name="init" value="this" action="{!c.doInit}"/>

    <!--COMPONENT BODY-->

    <div class="rr-white-panel">
        <div class="resource-table">
            <div class="resource-title">
                {!$Label.c.Resource_Tab_Study_Documents}
            </div>
            <c:RRTable>
                <tr>
                    <th class="study-document-icon"></th>
                    <th class="study-document-title">{!$Label.c.Resources_Study_Document_Table_Col_Title}</th>
                    <th class="study-document-summary">{!$Label.c.Resources_Study_Document_Table_Col_Summary}</th>
                    <th class="study-document-version-date">{!$Label.c.Resources_Study_Document_Table_Col_Version_Date}</th>
                </tr>
                <aura:iteration items="{!v.resourcesOnPage}" var="resourceWrapper">
                    <tr class="study-document-row-data">
                        <td class="study-document-icon">
                            <div class="resource-pointer"
                                 data-type="{!v.resourceWrappers[0].resource.RecordType.DeveloperName}"
                                 data-id="{!v.resourceWrappers[0].resource.Id}" onclick="{!c.navigateToPage}">
                                <c:RRIcon iconName="icon-pdf" class="resources-icon-pdf"/>
                            </div>
                        </td>
                        <td class="study-document-column-data study-document-title-data">
                            <a data-type="{!v.resourceWrappers[0].resource.RecordType.DeveloperName}"
                               data-id="{!v.resourceWrappers[0].resource.Id}"
                               onclick="{!c.navigateToPage}">
                                {!resourceWrapper.resource.Title__c}
                            </a>
                        </td>
                        <td class="study-document-summary study-document-column-data">{!resourceWrapper.resource.Description__c}</td>
                        <td class="study-document-version-date study-document-column-data">
                            <ui:outputDate value="{!resourceWrapper.resource.Version_Date__c}" format="DD-MMM-YYYY"/>
                        </td>
                    </tr>
                </aura:iteration>
            </c:RRTable>
            <footer class="resource-footer" style="{!lessthan(v.resourceWrappers.length, 11) ? 'display: none;' : ''}">
                <c:rrPagination allObjects="{!v.resourceWrappers}" currentObjects="{!v.resourcesOnPage}"
                                entriesOnPage="11"/>
            </footer>
            <aura:if isTrue="{!v.errorMessage}">
                <div class="resource-error-message">{!v.errorMessage}</div>
            </aura:if>
        </div>
        <c:RRSpinner aura:id="spinner" showSpinner="true" fixed="true" size="medium"/>
    </div>
</aura:component>
